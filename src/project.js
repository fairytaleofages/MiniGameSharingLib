window.__require=function e(t,o,n){function i(a,s){if(!o[a]){if(!t[a]){var c=a.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+a+"'")}}var u=o[a]={exports:{}};t[a][0].call(u.exports,function(e){return i(t[a][1][e]||e)},u,u.exports,e,t,o,n)}return o[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<n.length;a++)i(n[a]);return i}({AnimNode:[function(e,t,o){"use strict";cc._RF.push(t,"e3284wLuZFKh46Gwdd+Sdn8","AnimNode"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../game/manager/mgrCfg"),i=e("../../game/manager/mgrDirector"),r=e("../utils/Tools"),a=e("../component/LifeCycleMonitor"),s=function(e){function t(t){var o=e.call(this)||this;return o.nodeResource=null,o.clipName=null,o.animData=n.default.get("anim_node_db",t),o.addComponent(a.default).setOnLoadCallback(o.onLoad.bind(o)),o}return __extends(t,e),t.prototype.onLoad=function(){this._loadResourceNode()},t.prototype._onPreDestroy=function(){if(cc.isValid(this.nodeResource)){var t=this.nodeResource.getComponent(cc.Animation);cc.isValid(t)&&t.stop()}e.prototype._onPreDestroy&&e.prototype._onPreDestroy.call(this)},t.prototype._loadResourceNode=function(){var e=this,t=this.animData;i.default.loadRes(t.prefabFileName,cc.Prefab,function(t,o){if(t)cc.warn("AnimNode._loadResourceNode error:",t);else if(cc.isValid(e)){var n=cc.instantiate(o);n.parent=e,e.nodeResource=n,e.play(e.clipName),e.callback&&e.registerEventCallback(e.callback)}else cc.warn("AnimNode._loadResourceNode on loadRes finish, this is invalid!")})},t.prototype.reset=function(){this.active=!0,this.rotation=0,this.setPosition(0,0),this.scaleX=this.animData.scaleX,this.scaleY=this.animData.scaleY,this.opacity=255},t.prototype.play=function(e){if(this.clipName=e,this.nodeResource&&cc.isValid(this)){var t=this.nodeResource.getComponent(cc.Animation);if(cc.isValid(t)){if(!e){var o=t.getClips();o.length>0?e=o[0].name:cc.warn("AnimNode.play clip not found!",e)}t.play(e)}}},t.prototype.registerEventCallback=function(e){if(this.callback=e,this.nodeResource&&cc.isValid(this)){this.unregisterEventCallback(),this.callback=e;var t=this.nodeResource.getComponent(cc.Animation);t.on("play",this.onAnimationPlay,this),t.on("stop",this.onAnimationStop,this),t.on("pause",this.onAnimationPause,this),t.on("resume",this.onAnimationResume,this),t.on("lastframe",this.onAnimationLastframe,this),t.on("finished",this.onAnimationFinished,this)}},t.prototype.unregisterEventCallback=function(){if(this.callback=null,this.nodeResource&&cc.isValid(this)){var e=this.nodeResource.getComponent(cc.Animation);e.off("play",this.onAnimationPlay,this),e.off("stop",this.onAnimationStop,this),e.off("pause",this.onAnimationPause,this),e.off("resume",this.onAnimationResume,this),e.off("lastframe",this.onAnimationLastframe,this),e.off("finished",this.onAnimationFinished,this)}},t.prototype.isLoaded=function(){return cc.isValid(this.nodeResource)},t.prototype._onEvent=function(e,t){if(cc.isValid(this.nodeResource)){var o=this.nodeResource.getComponent(cc.Animation).currentClip.name;this.callback instanceof Function&&this.callback({name:t,clipName:o})}},t.prototype.onAnimationPlay=function(e){this._onEvent(e,"play")},t.prototype.onAnimationStop=function(e){this._onEvent(e,"stop")},t.prototype.onAnimationPause=function(e){this._onEvent(e,"pause")},t.prototype.onAnimationResume=function(e){this._onEvent(e,"resume")},t.prototype.onAnimationLastframe=function(e){this._onEvent(e,"lastframe")},t.prototype.onAnimationFinished=function(e){this._onEvent(e,"finished")},t.prototype.setColorEx=function(e){r.default.setCascadeColor(this,e)},t}(cc.Node);o.default=s,cc._RF.pop()},{"../../game/manager/mgrCfg":"mgrCfg","../../game/manager/mgrDirector":"mgrDirector","../component/LifeCycleMonitor":"LifeCycleMonitor","../utils/Tools":"Tools"}],Base64:[function(e,t,o){"use strict";cc._RF.push(t,"b84der7CppMXapFQITVgKSQ","Base64"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,function(){function e(){}return e.encodeForUrl=function(e){var t=this.encode(e);return t?t=(t=t.replace("+","-")).replace("/","*"):null},e.decodeForUrl=function(e){return e?(e=(e=e.replace("-","+")).replace("*","/"),this.decode(e)):null},e.encode=function(e){var t,o,n,i,r,a,s,c="",l=0;for(e=this._utf8_encode(e);l<e.length;)i=(t=e.charCodeAt(l++))>>2,r=(3&t)<<4|(o=e.charCodeAt(l++))>>4,a=(15&o)<<2|(n=e.charCodeAt(l++))>>6,s=63&n,isNaN(o)?a=s=64:isNaN(n)&&(s=64),c=c+this._keyStr.charAt(i)+this._keyStr.charAt(r)+this._keyStr.charAt(a)+this._keyStr.charAt(s);return c},e.decode=function(e){var t,o,n,i,r,a,s="",c=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<e.length;)t=this._keyStr.indexOf(e.charAt(c++))<<2|(i=this._keyStr.indexOf(e.charAt(c++)))>>4,o=(15&i)<<4|(r=this._keyStr.indexOf(e.charAt(c++)))>>2,n=(3&r)<<6|(a=this._keyStr.indexOf(e.charAt(c++))),s+=String.fromCharCode(t),64!=r&&(s+=String.fromCharCode(o)),64!=a&&(s+=String.fromCharCode(n));return s=this._utf8_decode(s)},e._utf8_encode=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",o=0;o<e.length;o++){var n=e.charCodeAt(o);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t},e._utf8_decode=function(e){for(var t="",o=0,n=0,i=0,r=0;o<e.length;)(n=e.charCodeAt(o))<128?(t+=String.fromCharCode(n),o++):n>191&&n<224?(i=e.charCodeAt(o+1),t+=String.fromCharCode((31&n)<<6|63&i),o+=2):(i=e.charCodeAt(o+1),r=e.charCodeAt(o+2),t+=String.fromCharCode((15&n)<<12|(63&i)<<6|63&r),o+=3);return t},e._keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e=__decorate([i],e)}());o.default=r,cc._RF.pop()},{}],CfgParser:[function(e,t,o){"use strict";cc._RF.push(t,"28a48t7aL9M2aeRvb7tTw6M","CfgParser"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,function(){function e(){}var t;return t=e,e.parseCfgByJsonObj=function(e,t,o){var n=this.preprocess(e,t);return this.formatDb(e,n,o,t.fields)},e.parseNumber=function(e){var t=parseFloat(e);return isNaN(t)&&(t=null),t},e.parseString=function(e){return e},e.parseArray=function(e){var t=null;try{(t=JSON.parse(e))instanceof Array||(t=null)}catch(e){}return t},e.parseObject=function(e){var t=null;try{(t=JSON.parse(e))instanceof Object||(t=null)}catch(e){}return t},e.parseBoolean=function(e){return"TRUE"==e||"true"==e},e.parseValue=function(e,t){var o=this.PARSE_FUNCTIONS[t];if(!o)return"";var n=o(e);if(null==n){var i=this.PARSE_DEFAULT_VALUE_CREATORS[t]();return e.length>0&&cc.log("[\u8b66\u544a] CfgParser.parseValue \u89e3\u6790\u9519\u8bef\uff1atype="+t+", srcValue=["+e+"], \u9ed8\u8ba4\u503c=["+i+"]]"),i}return n},e.preprocess=function(e,t){var o=[],n=t.types||[],i=t.fields||[],r=t.values||[];if(!(r.length<=0)){if(n.length!=r[0].length||i.length!=r[0].length)return cc.log("[\u8b66\u544a] CfgParser.preprocessData  "+e+" \u6570\u636e\u957f\u5ea6\u4e0d\u5339\u914d\uff01"),[];for(var a=0;a<r.length;a++){for(var s=r[a],c={},l=0;l<s.length;l++){var u=n[l],d=i[l],p=s[l];c[d]=this.parseValue(p,u)}o.push(c)}return o}cc.log("[\u8b66\u544a] CfgParser.preprocessData "+e+" \u6570\u636e\u4e3a\u7a7a")},e.formatDb=function(e,t,o,n){for(var i=o.split(""),r={},a=0;a<t.length;a++){for(var s=t[a],c=r,l=0;l<i.length-1;l++){var u=c[p=s[n[l]]];u||(u=l==i.length-2&&"a"==i[i.length-1]?[]:{},c[p]=u),c=u}var d=i[i.length-1];if("m"==d){var p;if(null!=c[p=s[n[i.length-1]]]){var h="db";for(l=0;l<i.length;l++)h+="["+s[n[l]]+"]";cc.log("[\u8b66\u544a] CfgParser.formatDb  "+e+" \u5b57\u6bb5\u88ab\u8986\u76d6\uff01",h,c[p])}c[p]=s}else"a"==d&&(c instanceof Array||1==i.length&&(r=c=[]),c instanceof Array?c.push(s):cc.log("[\u8b66\u544a] CfgParser.formatDb  "+e+" a\u6a21\u5f0f\uff0c\u5bb9\u5668\u4e0d\u662f\u6570\u7ec4\uff01"))}return r},e.PARSE_FUNCTIONS={A:t.parseArray,O:t.parseObject,N:t.parseString,S:t.parseString,I:t.parseNumber,F:t.parseNumber,B:t.parseBoolean},e.PARSE_DEFAULT_VALUE_CREATORS={A:function(){return[]},O:function(){return{}},N:function(){return""},S:function(){return""},I:function(){return 0},F:function(){return 0},B:function(){return!1}},e=t=__decorate([i],e)}());o.default=r,cc._RF.pop()},{}],Const:[function(e,t,o){"use strict";cc._RF.push(t,"c54bf4JLl9PjLK3VwVekJ0m","Const"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass;n.property;(function(e){e[e.none=1]="none",e[e.releax=2]="releax",e[e.careful=3]="careful"})(o.AdMode||(o.AdMode={})),function(e){e[e.locked=1]="locked",e[e.unlocked=2]="unlocked",e[e.finished=3]="finished",e[e.received=4]="received"}(o.AchievementState||(o.AchievementState={})),function(e){e[e.sprite=1]="sprite",e[e.spine=2]="spine",e[e.particle=3]="particle",e[e.animNode=4]="animNode"}(o.ResourceType||(o.ResourceType={})),function(e){e[e.none_passAll=0]="none_passAll",e[e.none_blockkAll=1]="none_blockkAll",e[e.none_passHole=2]="none_passHole",e[e.mask_passAll=3]="mask_passAll",e[e.mask_blockAll=4]="mask_blockAll",e[e.mask_passHole=5]="mask_passHole"}(o.GuideMaskType||(o.GuideMaskType={})),function(e){e[e.body=1]="body",e[e.side=2]="side",e[e.top=3]="top",e[e.sideDeco=4]="sideDeco",e[e.ornament=5]="ornament",e[e.plate=6]="plate"}(o.CakePartType||(o.CakePartType={}));var r=function(){function e(){}return e.LOCAL_PATCH_INFO=null,e.GAME_VERSION="unknown",e.IS_OPEN_VIDEO_RECORD=!0,e.HAD_TIP_USER_LOGIN=!0,e.IS_SHOW_URL_AD_ICON=!1,e.IS_COP_OPEN_PAY=!1,e.PAY_CHANNEL=null,e.LOCAL_PUBLISH_CHANNEL="",e.ANDROID_SWITCH_THIRD_EXIT=!1,e.ANDROID_SWITCH_MORE_GAME=!1,e.ANDROID_SWITCH_ABOUT=!1,e.ANDROID_SWITCH_MUSIC_ENABLED=!1,e.PACKAGE_VERSION=null,e.B_SDK_HAS_WEB_VIEW=!0,e.ACHIEVEMENT_CATEGORY_LIST=1,e.ACHIEVEMENT_CATEGORY_FARM=2,e.ACHIEVEMENT_CATEGORY_COOKBOOK=3,e.ACHIEVEMENT_CATEGORY_ROOM=4,e.ACHIEVEMENT_CATEGORY_KITCHEN=5,e.ITEM_ID_RMB=1,e.ITEM_ID_GOLD=2,e.ITEM_ID_KEY=3,e.ITEM_ID_ENERGY=4,e.ITEM_ID_MAX_ENERGY=5,e.ITEM_ID_PVE_ITEM=6,e.ITEM_ID_FRAGMENT=7,e.ITEM_ID_OPEN_CHEST=8,e.ITEM_ID_VIDEO_SHARE_COUNT=9,e.ITEM_ID_SHARE_COUNT=10,e.ITEM_ID_WIPE_AD=11,e.ITEM_FLAG_MONEY=1,e.ITEM_FLAG_PART=2,e.ITEM_FLAG_PART_BLUEPRINT=3,e.ITEM_FLAG_MATERIAL=4,e.ITEM_FLAG_PLAYER_ATTR=5,e.ITEM_FLAG_NPC_GIFT=6,e.GLOBAL_ORDER_TIP_ICON=900,e.GLOBAL_ORDER_DIALOG=1e3,e.GLOBAL_ORDER_TIP=1100,e.GLOBAL_ORDER_GUIDE=1200,e.GLOBAL_ORDER_WARP_SCENE_NODE=1e4,e.GLOBAL_ORDER_MASK=10001,e.RESOLUTION_RANGE={maxWidth:768,minWidth:576,maxHeight:1344,minHeight:1024},e.SERVER_HOST="https://rank.ultralisk.cn",e.SERVER_URL_FORMAT="%s/ultralisk/",e.SERVER_APP_ID=57,e.SERVER_RANK_ID=62,e.WARP_SCENE_MIN_LOAD_TIME=.1,e.B_PROMISE_RESOLVE_NEED_WAIT=!0,e.PROMISE_RESOLVE_WAIT_TIME=1,e.AD_VIDEO_VALID_COUNT=1,e.ITEM_ID_PLAYER=99,e.RADIAN2EULAR=180/Math.PI,e=__decorate([i],e)}();o.default=r,cc._RF.pop()},{}],DebugMenu:[function(e,t,o){"use strict";cc._RF.push(t,"c2312XTyQZI+6yxGda96ndc","DebugMenu"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../game/view/node/LayerColor"),i=e("../utils/Tools"),r=function(e){function t(t,o,r,a){void 0===a&&(a=4);var s=e.call(this)||this,c=o+2*a,l=r*t.length+a*(t.length+1),u=new n.default(cc.color(63,63,63,191));u.parent=s,u.setContentSize(c,l),u.setAnchorPoint(0,1);for(var d=-a,p=function(e){var s=t[e],c=s[0],l=s[1],p=new n.default(cc.color(0,0,0,63));p.parent=u,p.setContentSize(o,r),p.x=a+o/2,p.y=d-e*(a+r)-r/2;var h=new cc.Node;h.parent=p;var f=h.addComponent(cc.Label);f.fontSize=20,f.string=c,f.verticalAlign=cc.Label.VerticalAlign.CENTER,i.default.registerTouchHandler(p,function(e){"began"==e.name?h.color=cc.color(0,255,0):"ended"==e.name&&(h.color=cc.color(255,255,255),l())})},h=0;h<t.length;h++)p(h);return s}return __extends(t,e),t}(cc.Node);o.default=r,cc._RF.pop()},{"../../game/view/node/LayerColor":"LayerColor","../utils/Tools":"Tools"}],DebugMouseControlNode:[function(e,t,o){"use strict";cc._RF.push(t,"bfaedijI1JElr+wGeM26gAa","DebugMouseControlNode"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,cc.Event.EventMouse.BUTTON_RIGHT),a=cc.Event.EventMouse.BUTTON_MIDDLE,s=function(e){function t(){var t=e.call(this)||this;return t.registerEvents(),t}return __extends(t,e),t.prototype.cleanup=function(){this._listener&&cc.eventManager.removeListener(this._listener)},t.prototype.registerEvents=function(){this.mousePressd={},this.registerMouseListener()},t.prototype.registerMouseListener=function(){var e=this,t=cc.EventListener.create({event:cc.EventListener.MOUSE,onMouseUp:function(t){t.name="up",e.onMouseHandler(t)},onMouseMove:function(t){t.name="move",e.onMouseHandler(t)},onMouseDown:function(t){t.name="down",e.onMouseHandler(t)},onMouseScroll:function(t){t.name="scroll",e.onMouseHandler(t)}});cc.eventManager.addListener(t,this)},t.prototype.onCameraTranslation=function(e,t){this.bPressedCtrl&&(e*=.1,t*=.1);var o=this.x,n=this.y;this.setPosition(o+e,n+t)},t.prototype.onCameraZoom=function(e,t,o){e=cc.misc.clampf(e,-1,1),cc.sys.isBrowser&&(e*=-1),this.bPressedCtrl&&(e*=.1);var n=this.convertToNodeSpace(cc.v2(t,o)),i=this.scale;this.scale=Math.max(.5,i+.5*-e);var r=this.convertToWorldSpace(n),a=this.x,s=this.y;this.setPosition(a+(t-r.x),s+(o-r.y))},t.prototype.onMouseHandler=function(e){var t=e.getButton(),o=e.getLocation(),n=(e.getScrollX(),e.getScrollY());switch(e.name){case"down":this.mousePressd[t]=!0;break;case"move":this.mousePressd[r]&&this.onCameraTranslation(e.getDeltaX(),e.getDeltaY());break;case"up":this.mousePressd[t]=!1,t==a&&(this.setPosition(0,0),this.scale=1);break;case"scroll":this.onCameraZoom(n,o.x,o.y)}},t=__decorate([i],t)}(cc.Node);o.default=s,cc._RF.pop()},{}],DialogBase:[function(e,t,o){"use strict";cc._RF.push(t,"1142doFnitPdpYq8C742uzP","DialogBase"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../game/manager/mgrDirector"),i=e("../../game/view/node/LayerColor"),r=e("../utils/Tools"),a=e("./ViewBase"),s=e("../../game/Const"),c=cc._decorator,l=c.ccclass,u=(c.property,function(e){function t(t){void 0===t&&(t={});var n=e.call(this,t)||this;n._viewName="",n.bClosing=!1,n.DEFAULT_SHADOW_OPACITY=200,n.bOpenCompleted=!1;var i=t.__viewName||"";return i&&(n._viewName=i,o.CUR_VIEWS[i]=!0),n}var o;return __extends(t,e),o=t,t.hasDialogExists=function(){return this.GLOBAL_DIALOG_COUNT>0},t.clearViews=function(){o.CUR_VIEWS={}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this),o.GLOBAL_DIALOG_COUNT++},t.prototype.onResourceLoaded=function(){var t=this;if(e.prototype.onResourceLoaded.call(this),this.context.bImmediately)this.layerShadow&&(this.layerShadow.active=!0),this._onOpenDialogCompleted();else{if(this.layerShadow&&(this.layerShadow.active=!0,this.layerShadow.opacity=0,this.layerShadow.runAction(cc.fadeTo(.3,this.getShadowOpacity())).setTag(o.ACTION_TAG_OPEN)),this.bClosing)return;var n=this.getComponent(cc.Animation);if(cc.isValid(n)){var i=n.play("defaultDialogOpen");i.speed=i.duration/.3,n.on("finished",function(){t._onOpenDialogCompleted(),n.targetOff(t)},this),n.setCurrentTime(1/60)}else this.scale=.5,this.runAction(cc.sequence(cc.scaleTo(.3,1).easing(cc.easeBackOut()),cc.callFunc(this._onOpenDialogCompleted.bind(this)))).setTag(o.ACTION_TAG_OPEN)}},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),o.GLOBAL_DIALOG_COUNT--,this.bClosing||(this.bClosing=!0,this.context.fOnDialogClose&&this.context.fOnDialogClose instanceof Function&&this.context.fOnDialogClose())},t.prototype._onOpenDialogCompleted=function(){this.onOpenDialogCompleted(),this.bOpenCompleted=!0},t.prototype.onOpenDialogCompleted=function(){},t.prototype._loadResource=function(){var t=this.getComponent(cc.Animation);if(!t){t=this.addComponent(cc.Animation);for(var o=[n.default.tryGetRes("2d/animation/defaultDialogOpen",cc.AnimationClip),n.default.tryGetRes("2d/animation/defaultDialogClose",cc.AnimationClip)],i=0;i<o.length;i++)t.addClip(o[i])}e.prototype._loadResource.call(this)},t.prototype.openDialog=function(e){void 0===e&&(e=!1);var t=n.default.getUIRoot();if(this.nodeRoot=new cc.Node,this.nodeRoot.parent=t,this.nodeRoot.zIndex=s.default.GLOBAL_ORDER_DIALOG,this.isShadowEnabled()){var o=new i.default(cc.color(0,0,0,this.getShadowOpacity()));o.setContentSize(cc.winSize),o.zIndex=-1,o.parent=this.nodeRoot,o.active=!1,r.default.registerTouchHandler(o,this.onTouchLayerShadow.bind(this),!0),this.layerShadow=o}e=e||this.context.bImmediately,this.context.bImmediately=e,this.parent=this.nodeRoot},t.prototype.closeDialog=function(e){void 0===e&&(e=!1),this.bClosing||(o.CUR_VIEWS[this._viewName]=!1,this.bClosing=!0,this.closeDialogEx(e))},t.prototype.closeDialogEx=function(e){var t=this;if(this.context.fOnDialogClose&&this.context.fOnDialogClose instanceof Function&&this.context.fOnDialogClose(),cc.isValid(this.layerShadow)&&(r.default.unregisterTouchHandler(this.layerShadow),this.layerShadow.stopActionByTag(o.ACTION_TAG_OPEN)),this.stopActionByTag(o.ACTION_TAG_OPEN),cc.isValid(this.nodeRoot))if(e)this.nodeRoot.destroy();else{this.layerShadow&&this.layerShadow.runAction(cc.fadeOut(.2)),this.runAction(cc.spawn(cc.scaleTo(.2,1.2,0).easing(cc.easeBackIn()),cc.sequence(cc.delayTime(.2*.7),cc.fadeOut(.06).easing(cc.easeOut(2)),cc.callFunc(function(){t.nodeRoot.destroy()})))).setTag(o.ACTION_TAG_CLOSE)}},t.prototype.isShadowEnabled=function(){return!0},t.prototype.getShadowOpacity=function(){return this.DEFAULT_SHADOW_OPACITY},t.prototype.isClickShadowClose=function(){return!0},t.prototype.playOpenDialogSound=function(){},t.prototype.onTouchLayerShadow=function(e){e.isClick()&&(this.bOpenCompleted?this.isClickShadowClose()&&(this.sendMsg("MSG_GUIDE_POINT",{id:"DialogBase.shadow.click"}),this.closeDialog()):cc.warn("DialogBase.onTouchLayerShadow dialog is opening"))},t.GLOBAL_DIALOG_COUNT=0,t.CUR_VIEWS={},t.ACTION_TAG_OPEN=1,t.ACTION_TAG_CLOSE=2,t=o=__decorate([l],t)}(a.default));o.default=u,cc._RF.pop()},{"../../game/Const":"Const","../../game/manager/mgrDirector":"mgrDirector","../../game/view/node/LayerColor":"LayerColor","../utils/Tools":"Tools","./ViewBase":"ViewBase"}],EventTouchEx:[function(e,t,o){"use strict";cc._RF.push(t,"c5c052Cml9LpJLJJGhORhUX","EventTouchEx"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.CLICK_RANGE_SQ=400,t.name="",t}return __extends(t,e),t.prototype.isClick=function(){return!1},t.prototype.isInClickRange=function(){return!1},t=__decorate([i],t)}(cc.Event.EventTouch));o.default=r;cc.Event.EventTouch.prototype.isClick=function(){if("ended"!=this.name&&"cancelled"!=this.name)return!1;var e=this.getStartLocation(),t=this.getLocation();return e.sub(t).magSqr()<=400},cc.Event.EventTouch.prototype.isInClickRange=function(){var e=this.getStartLocation(),t=this.getLocation();return e.sub(t).magSqr()<=400},cc._RF.pop()},{}],FSMObject:[function(e,t,o){"use strict";cc._RF.push(t,"78340ZFwntCqJb7oj6CQ375","FSMObject"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,-1),a=function(){function e(){var e;this._currentStateID=r,this._nextStateID=r,this._states=((e={})[r]={leave:null,execute:null,enter:null},e)}return e.prototype.registerState=function(e,t,o,n){void 0===t&&(t=null),void 0===o&&(o=null),void 0===n&&(n=null),null!=this._states[e]&&cc.warn("\u8b66\u544a] FSMObject.registerState state override!",e),this._states[e]={enter:t,execute:o,leave:n}},e.prototype.removeState=function(e){this._states[e]=null},e.prototype.update=function(e){if(null!=this._nextStateID){var t=this._states[this._currentStateID].leave;t&&t(),this._currentStateID=this._nextStateID,this._nextStateID=null;var o=this._states[this._currentStateID].enter;if(o&&(o(),this._nextStateID))return this.update(e)}if(this._states){var n=this._states[this._currentStateID].execute;n&&n(e)}},e.prototype.setNextState=function(e){this._nextStateID=e},e.prototype.getState=function(){return this._currentStateID},e.prototype.getNextState=function(){return this._nextStateID},e.prototype.destroy=function(){this._states=null},e=__decorate([i],e)}();o.FSMObject=a,cc._RF.pop()},{}],FSMSceneBase:[function(e,t,o){"use strict";cc._RF.push(t,"a2b1eJc0CRLSqpq/jnoMOnx","FSMSceneBase"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../utils/FSMObject"),i=e("./SceneBase"),r=cc._decorator,a=r.ccclass,s=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){this._fsmObject=new n.FSMObject,e.prototype.onLoad.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t),this._fsmObject&&this._fsmObject.update(t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this._fsmObject&&this._fsmObject.destroy()},t.prototype.getState=function(){return this._fsmObject.getState()},t.prototype.getNextState=function(){return this._fsmObject.getNextState()},t.prototype.setNextState=function(e){this._fsmObject.setNextState(e)},t.prototype.removeState=function(e){this._fsmObject.removeState(e)},t.prototype.registerState=function(e,t,o,n){var i=null,r=null,a=null;t&&(i=this[t])&&(i=i.bind(this)),o&&(r=this[o])&&(r=r.bind(this)),n&&(a=this[n])&&(a=a.bind(this)),this._fsmObject.registerState(e,i,r,a)},t=__decorate([a],t)}(i.default));o.default=s,cc._RF.pop()},{"../utils/FSMObject":"FSMObject","./SceneBase":"SceneBase"}],IPoolManagerCacheableObject:[function(e,t,o){"use strict";cc._RF.push(t,"f7e8cE+m5FBIKVP1uVaqX4s","IPoolManagerCacheableObject"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],IReuseLayouter:[function(e,t,o){"use strict";cc._RF.push(t,"b30d6M0rXJDLLQUbIdDTyu1","IReuseLayouter"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],LayerColor:[function(e,t,o){"use strict";cc._RF.push(t,"9dcecZrzvBF8Z+r3MsJQolH","LayerColor"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../manager/mgrDirector"),i=function(e){function t(t){var o=e.call(this)||this,i=new cc.Node;i.parent=o;var r=t.getA();t.setA(255),i.color=t,i.opacity=r,t.setA(r),o.nodeSprite=i;var a=i.addComponent(cc.Sprite);return a.sizeMode=cc.Sprite.SizeMode.CUSTOM,n.default.loadRes("2d/default/white_dot",cc.SpriteFrame,function(e,t){if(!e){var o=i.getContentSize();a.spriteFrame=t,i.setContentSize(o)}}),o}return __extends(t,e),t.prototype.setContentSize=function(t,o){e.prototype.setContentSize.call(this,t,o),this.nodeSprite.setContentSize(t,o)},t.prototype.setAnchorPoint=function(t,o){e.prototype.setAnchorPoint.call(this,t,o),this.nodeSprite.setAnchorPoint(t,o)},Object.defineProperty(t.prototype,"color",{set:function(e){this._color=e,this.nodeSprite.color=e},enumerable:!0,configurable:!0}),t}(cc.Node);o.default=i,cc._RF.pop()},{"../../manager/mgrDirector":"mgrDirector"}],LifeCycleMonitor:[function(e,t,o){"use strict";cc._RF.push(t,"20ed8Gu2q1A3quCZsuyhsNt","LifeCycleMonitor"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fOnLoad=null,t.fStart=null,t.fUpdate=null,t.fOnDestroy=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.fOnLoad&&this.fOnLoad()},t.prototype.start=function(){this.fStart&&this.fStart()},t.prototype.update=function(e){this.fUpdate&&this.fUpdate(e)},t.prototype.onDestroy=function(){this.fOnDestroy&&this.fOnDestroy()},t.prototype.setOnLoadCallback=function(e){this.fOnLoad=e},t.prototype.setUpdateCallback=function(e){this.fUpdate=e},t.prototype.setStartCallback=function(e){this.fStart=e},t.prototype.setOnDestroyCallback=function(e){this.fOnDestroy=e},t=__decorate([i],t)}(cc.Component));o.default=r,cc._RF.pop()},{}],Manager:[function(e,t,o){"use strict";cc._RF.push(t,"bb517iTiWxAha7AbPfnKLLw","Manager"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../utils/MsgHandler"),i=e("../utils/Tools"),r=cc._decorator,a=r.ccclass,s=(r.property,function(){function e(){}var t;return t=e,e.loadAllManagers=function(){for(var e=0;e<this._managerInstances.length;e++){var t=this._managerInstances[e];try{t.onLoad()}catch(e){cc.error("Manager.loadAllManager has error",e)}}},e.init=function(){t._managerInstances.push(this),this._msgHander=new n.default,this._msgHander.startProcMsg()},e.onLoad=function(){this.registerListeners({MSG_RECORD_RESET:this.loadRecord}),this._bNetworkResponseRegistered||(this._bNetworkResponseRegistered=!0,this.onRegisterNetworkResponseListeners())},e.loadRecord=function(){},e.saveRecord=function(){},e.onRegisterNetworkResponseListeners=function(){},e.registerListeners=function(e){var t=this;i.default.forEachMap(e,function(o,n){e[o]=n.bind(t)}),this._msgHander.registerListeners(e)},e.startProcMsg=function(){this._msgHander.startProcMsg()},e.stopProcMsg=function(){this._msgHander.stopProcMsg()},e.sendMsg=function(e,t){this._msgHander.sendMsg(e,t)},e._managerInstances=[],e._bNetworkResponseRegistered=!1,e=t=__decorate([a],e)}());o.default=s,cc._RF.pop()},{"../utils/MsgHandler":"MsgHandler","../utils/Tools":"Tools"}],MsgHandler:[function(e,t,o){"use strict";cc._RF.push(t,"0852c+vjjFK2r/FdcXtbrUO","MsgHandler"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Tools"),i=function(){function e(e){this.eventTarget=e||cc.game,this.registeredListeners={},this.startedListeners={},this.bStarted=!1}return e.prototype.registerListeners=function(e){var t=this;n.default.forEachMap(e,function(e,o){null!=t.registeredListeners[e]&&cc.log("[\u8b66\u544a] MsgHandler.registerListeners msg\u91cd\u590d\u6ce8\u518c\uff01 msgName="+e);t.registeredListeners[e]=function(e){try{o(e)}catch(e){cc.error("MsgHandler.listener has error!",e)}}}),this.bStarted&&this.startProcMsg()},e.prototype.startProcMsg=function(){var e=this;this.bStarted=!0,n.default.forEachMap(this.registeredListeners,function(t,o){if(!e.startedListeners[t]){var n=e.registeredListeners[t];e.eventTarget.on(t,n,e),e.startedListeners[t]=n}})},e.prototype.stopProcMsg=function(){var e=this;n.default.forEachMap(this.startedListeners,function(t,o){e.eventTarget.off(t,o,e)}),this.bStarted=!1,this.startedListeners={}},e.prototype.sendMsg=function(e,t){try{this.eventTarget.emit(e,t)}catch(e){cc.error("MsgHandler.sendMsg has exception",e)}},e}();o.default=i,cc._RF.pop()},{"./Tools":"Tools"}],NetworkAdapterBase:[function(e,t,o){"use strict";cc._RF.push(t,"19f10Ph5gxPjZVUGeVhqU2/","NetworkAdapterBase"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../utils/Tools"),i=e("../utils/Timer"),r=cc._decorator,a=r.ccclass,s=(r.property,function(){function e(){}return e.prototype.setReceiveCallback=function(e){return this.fOnReceive=e,this},e.prototype.setFaildCallback=function(e){return this.fOnFaild=e,this},e.prototype.triggerReceiveCallback=function(e){this.fOnReceive&&this.fOnReceive(e)},e.prototype.triggerFaildCallback=function(e){this.fOnFaild&&this.fOnFaild(e)},e.prototype.send=function(e){var t=this;i.default.callLater(.1,function(o){if("CMD_1"==e.cmd){var i={cmd:e.cmd,info:"response."+e.info};t.triggerReceiveCallback(i)}else if("CMD_2"==e.cmd)if(n.default.random(100)<50){i={cmd:e.cmd,info:"response."+e.info};t.triggerReceiveCallback(i)}else t.triggerFaildCallback("random faild")})},e.prototype.connect=function(){},e.prototype.disconnect=function(){},e.prototype.update=function(e){},e=__decorate([a],e)}());o.NetworkAdapterBase=s,cc._RF.pop()},{"../utils/Timer":"Timer","../utils/Tools":"Tools"}],NetworkAdapterHttpUlServer:[function(e,t,o){"use strict";cc._RF.push(t,"ba6a3sqZGhIbanIFIQ9RJtc","NetworkAdapterHttpUlServer"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./NetworkAdapterBase"),i=e("../utils/Timer"),r=cc._decorator,a=r.ccclass,s=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timeout=5e3,t}return __extends(t,e),t.prototype.setHost=function(e){this.host=e},t.prototype.setUrlFormat=function(e){this.urlFormat=e},t.prototype.setUlServerArg=function(e,t,o,n){this.signkey=e,this.platform=t,this.appid=o,this.channel=n},t.prototype.setTimeout=function(e){this.timeout=e},t.prototype.send=function(e){var t=JSON.stringify(e);t=encodeURIComponent(t);var o=ul.format("signkey=%s&platform=%s&appid=%s&channel=%s&data=%s",this.signkey,this.platform,this.appid,this.channel,t),n=ul.format(this.urlFormat,this.host);cc.log("send",n,o);var i=cc.loader.getXMLHttpRequest();i.onreadystatechange=this.onReadyStateChange.bind(this),i.open("POST",n),i.timeout=1e3*this.timeout,this.xhr=i,this.startTimeoutTimer(),i.send(o)},t.prototype.onReadyStateChange=function(){var e=this.xhr;if(e&&4==e.readyState){if(200==e.status){var t=e.response||"",o={str:null},n=void 0;try{n=JSON.parse(t)}catch(e){}n?o=n:o.str=t,this.triggerReceiveCallback(o)}else this.triggerFaildCallback(ul.format("http error: readyState=[%s], status=[%s]",e.readyState,e.status));this.stopTimeoutTimer(),this.disconnect()}},t.prototype.disconnect=function(){if(this.xhr)try{this.xhr.abort(),this.xhr=null}catch(e){console.log("disconnect error"),this.xhr=null}},t.prototype.startTimeoutTimer=function(){var e=this;this.stopTimeoutTimer();var t=new i.default(this.timeout,1,function(){e.stopTimeoutTimer(),e.disconnect()});t.start(),this.timeoutTimer=t},t.prototype.stopTimeoutTimer=function(){this.timeoutTimer&&(this.timeoutTimer.stop(),this.timeoutTimer=null)},t=__decorate([a],t)}(n.NetworkAdapterBase));o.NetworkAdapterHttpUlServer=s,cc._RF.pop()},{"../utils/Timer":"Timer","./NetworkAdapterBase":"NetworkAdapterBase"}],NetworkAdapterHttp:[function(e,t,o){"use strict";cc._RF.push(t,"fd376cjprVCg6tz28Mt+EGm","NetworkAdapterHttp"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./NetworkAdapterBase"),i=e("../utils/Timer"),r=cc._decorator,a=r.ccclass,s=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timeout=5e3,t}return __extends(t,e),t.prototype.setTimeout=function(e){this.timeout=e},t.prototype.send=function(e){var t=e.url;if(t){var o=e.requestType||"GET",n=e.postData||"",i=cc.loader.getXMLHttpRequest();i.onreadystatechange=this.onReadyStateChange.bind(this),i.open(o,t),i.timeout=this.timeout,this.xhr=i,this.startTimeoutTimer(),i.send(n)}else cc.warn("\u8b66\u544a] NetworkAdapterHttp.send url not found!")},t.prototype.onReadyStateChange=function(){var e=this.xhr;if(e&&4==e.readyState){if(200==e.status){var t={response:e.response||""};this.triggerReceiveCallback(t)}else this.triggerFaildCallback(ul.format("http error: readyState=[%s], status=[%s]",e.readyState,e.status));this.stopTimeoutTimer(),this.disconnect()}},t.prototype.disconnect=function(){if(this.xhr)try{this.xhr.abort(),this.xhr=null}catch(e){console.log("disconnect error1"),this.xhr=null}},t.prototype.startTimeoutTimer=function(){var e=this;this.stopTimeoutTimer();var t=new i.default(this.timeout,1,function(){e.stopTimeoutTimer(),e.disconnect()});t.start(),this.timeoutTimer=t},t.prototype.stopTimeoutTimer=function(){this.timeoutTimer&&(this.timeoutTimer.stop(),this.timeoutTimer=null)},t=__decorate([a],t)}(n.NetworkAdapterBase));o.NetworkAdapterHttp=s,cc._RF.pop()},{"../utils/Timer":"Timer","./NetworkAdapterBase":"NetworkAdapterBase"}],NetworkManager:[function(e,t,o){"use strict";cc._RF.push(t,"33b8bnH9ttOA7UWhgWmkZ7E","NetworkManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../utils/FSMObject"),i=e("./NetworkTask"),r=1,a=2,s=3,c=4,l=function(e){function t(t){var o=e.call(this)||this;return o.bAutoDoNextTask=!0,o.currTask=null,o.tasks=[],o.adapter=null,o.adapter=t,t.setReceiveCallback(o.onReceive.bind(o)),t.setFaildCallback(o.onFaild.bind(o)),o.registerState(r,o.onEnterStandby.bind(o),o.onExecuteStandby.bind(o),null),o.registerState(a,o.onEnterRequest.bind(o),o.onExecuteRequest.bind(o),null),o.registerState(s,o.onEnterResponse.bind(o),o.onExecuteResponse.bind(o),null),o.registerState(c,o.onEnterFaild.bind(o),null,null),o.setNextState(r),o}return __extends(t,e),t.prototype.setAutoDoNextTaskEnabled=function(e){this.bAutoDoNextTask=e},t.prototype.update=function(t){e.prototype.update.call(this,t),this.adapter.update(t)},t.prototype.onEnterStandby=function(){0},t.prototype.onExecuteStandby=function(){var e=this.tasks;if(e.length>0){var t=e[0];this.currTask=t,this.setNextState(a)}},t.prototype.onEnterRequest=function(){var e=this.currTask;e.triggerRequestCallback(),this.adapter.send(e.getRequestData())},t.prototype.onExecuteRequest=function(){},t.prototype.onEnterResponse=function(){var e=this.currTask;e?e.triggerResponseCallback():this.setNextState(r)},t.prototype.onExecuteResponse=function(){this.bAutoDoNextTask&&this.doNextTask()},t.prototype.onEnterFaild=function(){var e=this.currTask;e?e.triggerFaildCallback():this.setNextState(r)},t.prototype.onReceive=function(e){if(this.getState()==a){var t=this.currTask;t?(t.setResponseData(e),this.setNextState(s)):cc.log("[warn] NetworkManager.onReceive, currTask !found!")}else cc.log("[warn] NetworkManager.onReceive, state is !ST_REQUEST!")},t.prototype.onFaild=function(e){if(this.getState()==a){var t=this.currTask;t?(t.setFaildMsg(e),this.setNextState(c)):cc.log("[warn] NetworkManager.onReceive, currTask !found!")}else cc.log("[warn] NetworkManager.onReceive, state is !ST_REQUEST!")},t.prototype.addTask=function(e,t,o,n,r){if(e){var a=new i.NetworkTask;a.setRequestData(e),a.setOnReceiveCallback(t),a.setOnFaildCallback(o),a.setOnRequestCallback(n),a.setBackgroundEnabled(r),this.tasks.push(a)}else cc.log("[warn] NetworkManager.addTask, requestData is null!")},t.prototype.getCurrentTask=function(){return this.tasks[0]},t.prototype.getTasks=function(){return this.tasks},t.prototype.retryCurrentTask=function(){this.getState()==c?this.setNextState(r):cc.log("[warn] NetworkManager.retryCurrentTask, state is !ST_FAILD, no need to retry!")},t.prototype.stopAllTasks=function(){this.tasks=[],this.currTask=null,this.adapter.disconnect(),this.setNextState(r)},t.prototype.doNextTask=function(){this.currTask&&(this.currTask=null,this.tasks.shift(),this.setNextState(r))},t}(n.FSMObject);o.NetworkManager=l,cc._RF.pop()},{"../utils/FSMObject":"FSMObject","./NetworkTask":"NetworkTask"}],NetworkTask:[function(e,t,o){"use strict";cc._RF.push(t,"fef47QyITxJGal2U1lUImfJ","NetworkTask"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,function(){function e(){this.fOnRequest=null,this.fOnFaild=null,this.fOnReceive=null,this.faildMsg="",this.responseData=null,this.requestData={}}return e.prototype.setBackgroundEnabled=function(e){return this.bBackgroundEnabled=e,this},e.prototype.isBackgroundEnabled=function(){return this.bBackgroundEnabled},e.prototype.setRequestData=function(e){return this.requestData=e,this},e.prototype.getRequestData=function(){return this.requestData},e.prototype.setResponseData=function(e){return this.responseData=e,this},e.prototype.getResponseData=function(){return this.responseData},e.prototype.setFaildMsg=function(e){return this.faildMsg=e,this},e.prototype.getFaildMsg=function(){return this.faildMsg},e.prototype.setOnRequestCallback=function(e){return this.fOnRequest=e,this},e.prototype.setOnReceiveCallback=function(e){return this.fOnReceive=e,this},e.prototype.setOnFaildCallback=function(e){return this.fOnFaild=e,this},e.prototype.triggerRequestCallback=function(){this.fOnRequest&&this.fOnRequest(this)},e.prototype.triggerResponseCallback=function(){this.fOnReceive&&this.fOnReceive(this)},e.prototype.triggerFaildCallback=function(){this.fOnFaild&&this.fOnFaild(this)},e=__decorate([i],e)}());o.NetworkTask=r,cc._RF.pop()},{}],Particle:[function(e,t,o){"use strict";cc._RF.push(t,"a10b8ZLs3ZDqYswx11SLC3c","Particle"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../game/manager/mgrCfg"),i=e("../../game/manager/mgrDirector"),r=function(e){function t(t){var o=e.call(this)||this;o.bLoaded=!1;var r=n.default.get_from_particle_db(t),a=o.addComponent(cc.ParticleSystem);return""!=r.positionType&&(a.positionType=parseInt(r.positionType)),o.particleData=r,o.bAutoRemoveOnFinish=r.bPlayOnce,r.texturename&&i.default.loadRes(r.texturename,cc.SpriteFrame,function(e,t){e?cc.warn("Particle loadRes error:",e.message):cc.isValid(o)&&(a.spriteFrame=t)}),i.default.loadRes(r.filename,cc.ParticleAsset,function(e,t){e?cc.warn("Particle loadRes error:",e.message):cc.isValid(o)&&(a.file=t,o.bLoaded=!0)}),o}return __extends(t,e),t.prototype.reset=function(){var e=this.getComponent(cc.ParticleSystem);e.autoRemoveOnFinish=this.bAutoRemoveOnFinish,e.resetSystem()},t.prototype.setAutoRemoveOnFinish=function(e){this.bAutoRemoveOnFinish=e,this.getComponent(cc.ParticleSystem).autoRemoveOnFinish=this.bAutoRemoveOnFinish},t.prototype.isLoaded=function(){return this.bLoaded},t}(cc.Node);o.default=r,cc._RF.pop()},{"../../game/manager/mgrCfg":"mgrCfg","../../game/manager/mgrDirector":"mgrDirector"}],PoolManager:[function(e,t,o){"use strict";cc._RF.push(t,"a121cUYpppN0Zm8VXjSKZa4","PoolManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Tools"),i=cc._decorator,r=i.ccclass,a=(i.property,function(){function e(){this.pools={},this.poolConfigs={}}return e.prototype._getPool=function(e,t){var o=this.pools[e];o||(o={},this.pools[e]=o);var n=o[t];return n||(n=[],o[t]=n),n},e.prototype._safeRelease=function(e){},e.prototype.register=function(e,t,o,n,i,r){this.poolConfigs[e]={creator:t,resetter:o,cleanuper:n,destroyer:i,maxCount:r}},e.prototype.get=function(e,t){if(e){var o=this.poolConfigs[e];if(o){null==t&&(t="__default__");for(var n=this._getPool(e,t),i=0;i<n.length;i++)n[i];var r=n.shift();for(i=0;i<n.length;i++)n[i];return r&&r.parent&&(cc.warn("[warn] PoolManager.get, node already has a parent!"),r=null),r||(r=o.creator(t))&&(r.__pool_id=e,r.__pool_key=t),r&&(o.resetter&&o.resetter(r),r.__pool_flag_inpool=null),r}cc.warn(ul.format("PoolManager.get config not found! poolId = %s",e))}else cc.warn("PoolManager.get need a poolId")},e.prototype.put=function(e){if(e){var t=e.__pool_id,o=e.__pool_key;if(t)if(o)if(cc.isValid(e)){var n=this.poolConfigs[t];if(n)if(e.__pool_flag_inpool)cc.warn("PoolManager.put obj is already in pool!");else{var i=this._getPool(t,o);i.length<n.maxCount?(n.cleanuper&&n.cleanuper(e),e.__pool_flag_inpool=!0,i.push(e)):(n.destroyer&&n.destroyer(e),this._safeRelease(e))}else cc.warn(ul.format("PoolManager.put config not found! poolId = %s",t))}else cc.warn("PoolManager.put obj not valid.");else cc.warn("PoolManager.put obj.__pool_key not found!")}else cc.warn("PoolManager.put node is nil!")},e.prototype.clean=function(e,t){var o=this;n.default.forEachMap(this.pools,function(i,r){if(!e||e==i){var a=o.poolConfigs[i].destroyer;n.default.forEachMap(r,function(e,n){if(!t||t==e){for(var i=0;i<n.length;i++){var s=n[i];a&&a(s),o._safeRelease(s)}r[e]=null}})}})},e=__decorate([r],e)}());o.default=a,cc._RF.pop()},{"./Tools":"Tools"}],Randomizer:[function(e,t,o){"use strict";cc._RF.push(t,"92d72KdO7hG8YoOt/riTl26","Randomizer"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Tools"),i=function(){function e(e){null==e&&(e=(new Date).getTime()),this.originSeed=e,this.seed=e}return e.prototype.getSeed=function(){return this.seed},e.prototype.getOriginSeed=function(){return this.originSeed},e.prototype.setSeed=function(e){this.originSeed=e,this.seed=e},e.prototype.random=function(e,t){this.seed=(9301*this.seed+49297)%233280;var o=this.seed/233280;return null==e&&null==t?o:null==t?Math.floor(o*e+1):Math.floor(o*(t-e+1)+e)},e.prototype._pureRandomWithoutReturn=function(){this.seed=(9301*this.seed+49297)%233280},e._getStaticRandomizer=function(){return this.staticFixedRandomizer||(this.staticFixedRandomizer=new e),this.staticFixedRandomizer},e.calcFixedRandom=function(e,t,o,n){t<0&&(cc.warn("FixedRandomizer.calcFixedRandom index must >= 0"),t=0);var i=this._getStaticRandomizer();i.setSeed(e);for(var r=0;r<t;r++)i._pureRandomWithoutReturn();return i.random(o,n)},e.calcFixedRandoms=function(e,t,o,n){var i=[],r=this._getStaticRandomizer();r.setSeed(e);for(var a=0;a<t;a++)i.push(r.random(o,n));return i},e._test=function(){cc.log("randomizer(1)");for(var t=new e(1),o=0;o<10;o++)cc.log(o,t.random(100),t.getSeed());cc.log("calcFixedRandoms(1)");var i=e.calcFixedRandoms(1,10,100);for(o=0;o<i.length;o++)cc.log(o,i[o]);cc.log("calcFixedRandom(1)");for(o=0;o<10;o++)cc.log(o,e.calcFixedRandom(1,o,100));cc.log("randomizer(2)"),t=new e(2);for(o=0;o<10;o++)cc.log(o,t.random(100),t.getSeed());cc.log("\u968f\u673a\u5206\u5e03\u6d4b\u8bd5");var r={};t=new e(1);for(o=0;o<1e3;o++){r[a=t.random(100)]=(r[a]||0)+1}cc.log(r),cc.log("\u7cfb\u7edfrandom\u5206\u5e03\u6d4b\u8bd5"),r={};for(o=0;o<1e3;o++){var a;r[a=n.default.random(100)]=(r[a]||0)+1}cc.log(r)},e.staticFixedRandomizer=null,e}();o.default=i,cc._RF.pop()},{"./Tools":"Tools"}],ResourceNode:[function(e,t,o){"use strict";cc._RF.push(t,"fdf91oWa0hH9pol5x0DZP7K","ResourceNode"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../game/Const"),i=e("../../game/manager/mgrPool"),r=cc._decorator,a=r.ccclass,s=(r.property,function(e){function t(t,o,n){var i,r,a=e.call(this)||this;t instanceof Array?(i=t[0],r=t[1]):(i=t,r=o);var s=new cc.Node;return null!=i&&r?(a.resType=i,a.resId=r,a.movName=n,a.loadRes(),a):s}return __extends(t,e),t.prototype._onPreDestroy=function(){this.unloadRes(),e.prototype._onPreDestroy&&e.prototype._onPreDestroy.call(this)},t.prototype.loadRes=function(){this.unloadRes();var e=this.resType,t=this.resId;if(e==n.ResourceType.sprite){if(t&&""!=t){var o=i.default.get("sprite",t);o.parent=this,this.nodeSprite=o}}else if(e==n.ResourceType.spine){var r=i.default.get("spine",t);r&&(r.parent=this,this.spine=r,this.movName&&this.spine.play(this.movName,!0))}else if(e==n.ResourceType.particle){var a=i.default.get("particle",t);a&&(a.parent=this,this.particle=a)}else if(e==n.ResourceType.animNode){var s=i.default.get("animNode",t);s&&(s.parent=this,s.play())}},t.prototype.unloadRes=function(){var e=this.resType;this.resId;e==n.ResourceType.sprite?(cc.isValid(this.nodeSprite)&&(this.nodeSprite.removeFromParent(),i.default.put(this.nodeSprite)),this.nodeSprite=null):e==n.ResourceType.spine?(cc.isValid(this.spine)&&(this.spine.removeFromParent(),i.default.put(this.spine)),this.spine=null):e==n.ResourceType.particle&&(cc.isValid(this.particle)&&(this.particle.removeFromParent(),i.default.put(this.particle)),this.particle=null)},t.prototype.tryPlaySpineMov=function(e,t){cc.isValid(this.spine)&&this.spine.play(e,t)},t.prototype.setAnchorPoint=function(t,o){e.prototype.setAnchorPoint.call(this,t,o),this.nodeSprite&&this.nodeSprite.setAnchorPoint(t,o)},t=__decorate([a],t)}(cc.Node));o.default=s,cc._RF.pop()},{"../../game/Const":"Const","../../game/manager/mgrPool":"mgrPool"}],ReuseLayouterHBox:[function(e,t,o){"use strict";cc._RF.push(t,"80ad6lBxMFIz5G/a2oiNaax","ReuseLayouterHBox"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,function(){function e(){this.cellSize=cc.size(0,0),this.gap=0,this.pending=0,this.containerHeight=0,this.cellTop=0}return e.prototype.setCellSize=function(e,t){return e instanceof cc.Size?this.cellSize=e:this.cellSize=cc.size(e,t||0),this.tryBuildHeight(),this},e.prototype.setGap=function(e){return this.gap=e,this},e.prototype.setPending=function(e){return this.pending=e,this},e.prototype.setContainerHeight=function(e){return this.containerHeight=e,this.tryBuildHeight(),this},e.prototype.tryBuildHeight=function(){var e=this.cellSize.height,t=this.containerHeight;0!=e&&0!=t&&(this.cellTop=Math.floor((t-e)/2))},e.prototype.getPos=function(e){var t=this.pending+e*(this.cellSize.width+this.gap),o=-this.cellTop;return t+=this.cellSize.width/2,o-=this.cellSize.height/2,cc.v2(t,o)},e.prototype.getCellSize=function(){return this.cellSize},e.prototype.setListSize=function(e){this.setContainerHeight(e.height)},e.prototype.getContainerSize=function(e){var t=2*this.pending+this.cellSize.width*e+this.gap*(e-1);return cc.size(t,this.containerHeight)},e.prototype.getPending=function(){return this.pending},e.prototype.getJumpOffset=function(){return cc.v2(-this.pending,0)},e.prototype.isHorizontalScroll=function(){return!0},e.prototype.isVerticalScroll=function(){return!1},e=__decorate([i],e)}());o.default=r,cc._RF.pop()},{}],ReuseLayouterHGrid:[function(e,t,o){"use strict";cc._RF.push(t,"35f5czwDvtMA6NDCYUSl2jj","ReuseLayouterHGrid"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,function(){function e(){this.cellSize=cc.size(0,0),this.rows=0,this.hgap=0,this.vgap=0,this.pending=0,this.containerHeight=0,this.cellTop=0}return e.prototype.setCellSize=function(e,t){return e instanceof cc.Size?this.cellSize=e:this.cellSize=cc.size(e,t||0),this.tryBuildTop(),this},e.prototype.setRows=function(e){return this.rows=e,this.tryBuildTop(),this},e.prototype.setGap=function(e,t){return this.hgap=e,this.vgap=t,this},e.prototype.setPending=function(e){return this.pending=e,this},e.prototype.setContainerHeight=function(e){return this.containerHeight=e,this.tryBuildTop(),this},e.prototype.tryBuildTop=function(){var e=this.rows,t=this.cellSize.height,o=this.containerHeight,n=this.vgap;if(0!=e&&0!=t&&0!=o){var i=e*t+(e-1)*n;this.cellTop=Math.floor((o-i)/2)}},e.prototype.getPos=function(e){var t=Math.floor(e/this.rows),o=e%this.rows,n=this.pending+t*(this.cellSize.width+this.hgap),i=-this.cellTop-o*(this.cellSize.height+this.vgap);return n+=this.cellSize.width/2,i-=this.cellSize.height/2,cc.v2(n,i)},e.prototype.getCellSize=function(){return this.cellSize},e.prototype.setListSize=function(e){this.setContainerHeight(e.height)},e.prototype.getContainerSize=function(e){var t=Math.ceil(e/this.rows),o=2*this.pending+this.cellSize.width*t+this.hgap*(t-1);return cc.size(o,this.containerHeight)},e.prototype.getPending=function(){return this.pending},e.prototype.getJumpOffset=function(){return cc.v2(-this.pending,0)},e.prototype.isHorizontalScroll=function(){return!0},e.prototype.isVerticalScroll=function(){return!1},e=__decorate([i],e)}());o.default=r,cc._RF.pop()},{}],ReuseLayouterVBox:[function(e,t,o){"use strict";cc._RF.push(t,"b1de5hw1QtHOp9XvYtOMMAS","ReuseLayouterVBox"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,function(){function e(){this.cellSize=cc.size(0,0),this.gap=0,this.pending=0,this.containerWidth=0,this.cellLeft=0}return e.prototype.setCellSize=function(e,t){return e instanceof cc.Size?this.cellSize=e:this.cellSize=cc.size(e,t||0),this.tryBuildLeft(),this},e.prototype.setGap=function(e){return this.gap=e,this},e.prototype.setPending=function(e){return this.pending=e,this},e.prototype.setContainerWidth=function(e){return this.containerWidth=e,this.tryBuildLeft(),this},e.prototype.tryBuildLeft=function(){var e=this.cellSize.width,t=this.containerWidth;0!=e&&0!=t&&(this.cellLeft=Math.floor((t-e)/2))},e.prototype.getPos=function(e){var t=this.cellLeft,o=-this.pending-e*(this.cellSize.height+this.gap);return t+=this.cellSize.width/2,o-=this.cellSize.height/2,cc.v2(t,o)},e.prototype.getCellSize=function(){return this.cellSize},e.prototype.setListSize=function(e){this.setContainerWidth(e.width)},e.prototype.getContainerSize=function(e){var t=2*this.pending+this.cellSize.height*e+this.gap*(e-1);return cc.size(this.containerWidth,t)},e.prototype.getPending=function(){return this.pending},e.prototype.getJumpOffset=function(){return cc.v2(0,-this.pending)},e.prototype.isHorizontalScroll=function(){return!1},e.prototype.isVerticalScroll=function(){return!0},e=__decorate([i],e)}());o.default=r,cc._RF.pop()},{}],ReuseLayouterVGrid:[function(e,t,o){"use strict";cc._RF.push(t,"103774IVeNDcKnA1XUhN5I/","ReuseLayouterVGrid"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,function(){function e(){this.cellSize=cc.size(0,0),this.cols=0,this.hgap=0,this.vgap=0,this.pending=0,this.containerWidth=0,this.cellLeft=0}return e.prototype.setCellSize=function(e,t){return e instanceof cc.Size?this.cellSize=e:this.cellSize=cc.size(e,t||0),this.tryBuildLeft(),this},e.prototype.setCols=function(e){return this.cols=e,this.tryBuildLeft(),this},e.prototype.setGap=function(e,t){return this.hgap=e,this.vgap=t,this},e.prototype.setPending=function(e){return this.pending=e,this},e.prototype.setContainerWidth=function(e){return this.containerWidth=e,this.tryBuildLeft(),this},e.prototype.tryBuildLeft=function(){var e=this.cols,t=this.cellSize.width,o=this.containerWidth,n=this.hgap;if(0!=e&&0!=t&&0!=o){var i=e*t+(e-1)*n;this.cellLeft=Math.floor((o-i)/2)}},e.prototype.getPos=function(e){var t=e%this.cols,o=Math.floor(e/this.cols),n=this.cellLeft+t*(this.cellSize.width+this.hgap),i=-this.pending-o*(this.cellSize.height+this.vgap);return n+=this.cellSize.width/2,i-=this.cellSize.height/2,cc.v2(n,i)},e.prototype.getCellSize=function(){return this.cellSize},e.prototype.setListSize=function(e){this.setContainerWidth(e.width)},e.prototype.getContainerSize=function(e){var t=Math.ceil(e/this.cols),o=2*this.pending+this.cellSize.height*t+this.vgap*(t-1);return cc.size(this.containerWidth,o)},e.prototype.getPending=function(){return this.pending},e.prototype.getJumpOffset=function(){return cc.v2(0,-this.pending)},e.prototype.isHorizontalScroll=function(){return!1},e.prototype.isVerticalScroll=function(){return!0},e=__decorate([i],e)}());o.default=r,cc._RF.pop()},{}],ReuseList:[function(e,t,o){"use strict";cc._RF.push(t,"4aa41F5bWpCm4a0dSfgUa1x","ReuseList"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../game/view/node/LayerColor"),i=e("../utils/Timer"),r=e("./ViewBase"),a=cc._decorator,s=a.ccclass,c=(a.property,function(e){function t(){var t=e.call(this)||this;return t._CELL_ID=0,t.datas=[],t.cells=[],t.cellPool=[],t.bInit=!1,t.bDebugLineEnabled=!1,t.bClippingEnabled=!0,t.bReuseEnabled=!0,t.bElasticEnabled=!0,t.bTouchScrollEnabled=!0,t.bAsyncSetterEnabled=!1,t.fOnContainerMoved=null,t}return __extends(t,e),t.prototype.onAsyncTimerSpan=function(e){var t=this.asyncSetterTasks;if(null!=t&&t.length>0){var o=t[0];t.splice(0,1);var n=o[0],i=o[1];this.setter(n,i),n.active=!0}},t.prototype.init=function(){var e=this,t=this.layouter,o=this.getContentSize();if(t.setListSize(o),this.bDebugLineEnabled){var i=new n.default(cc.color(255,255,0,63));i.parent=this,i.setContentSize(this.getContentSize()),i.setAnchorPoint(this.getAnchorPoint())}var r=new cc.Node;r.setAnchorPoint(0,1),r.parent=this,r.setPosition(0,0),this.nodeContainer=r;var a=this.addComponent(cc.ScrollView);a.horizontal=t.isHorizontalScroll(),a.vertical=t.isVerticalScroll(),a.content=r,a.cancelInnerEvents=!1,a.elastic=this.bElasticEnabled;var s=a.onEnable;if(a.onEnabled=function(){s(),e._tryApplayTouchScrollEnabled()},this._tryApplayTouchScrollEnabled(),this.bClippingEnabled)this.addComponent(cc.Mask);this.on("scrolling",this.onScrolling,this)},t.prototype.reloadList=function(){if(null!=this.layouter)if(null!=this.creator)if(null!=this.setter){this.bInit||(this.bInit=!0,this.init());var e=this.layouter,t=this.datas,o=(this.cells,this.getContentSize()),n=e.getContainerSize(t.length),i=Math.max(o.width,n.width),r=Math.max(o.height,n.height),a=this.getComponent(cc.ScrollView),s=a.getScrollOffset();this.nodeContainer.setContentSize(i,r),a.scrollToOffset(s);for(var c=0;c<this.cells.length;c++){var l=this.cells[c];this.putCellToPool(l)}this.cells=[],this.onContainerMoved()}else cc.log("[\u9519\u8bef] ReuseList.reloadList setter not found!");else cc.log("[\u9519\u8bef] ReuseList.reloadList creator not found!");else cc.log("[\u9519\u8bef] ReuseList.reloadList layouter not found!")},t.prototype.updateCellState=function(){for(var e=this,t=this.layouter,o=this.nodeContainer,n=this.datas,i=this.cells,r=this.width*this.anchorX,a=this.height*this.anchorY,s=o.x+r,c=o.y+a,l=this.getContentSize(),u=-(c-l.height),d=-c,p=-s,h=-s+l.width,f=t.getCellSize(),g=f.width,m=f.height,_=function(o){if(!e.bReuseEnabled)return!0;var n=t.getPos(o);return d<n.y+m/2&&n.y-m/2<u&&p<n.x+g/2&&n.x-g/2<h},v=[],y=0;y<i.length;y++){if(_(b=(C=i[y]).__data_index))break;v.push(y)}for(var S=v.length-1;S>=0;S--){var C=i[y=v[S]];i.splice(y,1),this.putCellToPool(C)}var T=i[0];if(T)for(var b=T.__data_index-1;b>=0&&_(b);b--){C=this.getCellFromPool();i.splice(0,0,C);var R=n[b];this._callCellSetter(C,R),C.__data_index=b,C.zIndex=b,C.data=R,C.setPosition(t.getPos(b))}else for(b=0;b<n.length;b++)if(_(b)){C=this.getCellFromPool();i.push(C);R=n[b];this._callCellSetter(C,R),C.__data_index=b,C.zIndex=b,C.data=R,C.setPosition(t.getPos(b))}for(y=i.length-1;y>=0;y--){if(_(b=(C=i[y]).__data_index))break;this.putCellToPool(C),i.splice(y,1)}var k=i[i.length-1];if(k)for(b=k.__data_index+1;b<n.length;b++)if(_(b)){C=this.getCellFromPool();i.push(C);R=n[b];this._callCellSetter(C,R),C.__data_index=b,C.zIndex=b,C.data=R,C.setPosition(t.getPos(b))}},t.prototype.getCellFromPool=function(){var e=this.cellPool,t=null;if(e.length>0&&(t=e.splice(0,1)[0]),!t){var o=this.layouter.getCellSize();if(this._CELL_ID++,(t=new r.default).parent=this.nodeContainer,t.setContentSize(o),t.__cell_id=this._CELL_ID,this.creator(t),this.bDebugLineEnabled){var n=new cc.Node;n.setContentSize(o),n.parent=t;var i=n.addComponent(cc.Graphics);i.clear(),i.lineWidth=2,i.strokeColor=cc.color(255,255,0,255),i.rect(0,0,o.width,o.height),i.stroke();var a=new cc.Node;a.parent=t;var s=a.addComponent(cc.Label);s.string=t.__cell_id.toString(),s.fontSize=14,a.setAnchorPoint(0,1),a.setPosition(-o.width/2+2,o.height/2-2),a.color=cc.color(255,255,0,255)}}return t.active=!0,t},t.prototype.putCellToPool=function(e){e.active=!1,this.cellPool.push(e)},t.prototype._calcPercentPos=function(e,t){var o=this.getContentSize(),n=this.nodeContainer.getContentSize(),i=e/(n.width-o.width),r=t/(n.height-o.height);return r=1-r,i=cc.misc.clampf(i,0,1),r=cc.misc.clampf(r,0,1),cc.v2(i,r)},t.prototype._callCellSetter=function(e,t){if(this.bAsyncSetterEnabled){var o=this.asyncSetterTasks;null==o&&(o=[],this.asyncSetterTasks=o),e.active=!1;for(var n=o.length-1;n>=0;n--){o[n][0]==e&&o.splice(n,1)}o.push([e,t])}else this.setter(e,t)},t.prototype.setLayouter=function(e){return this.layouter=e,this},t.prototype.setCreator=function(e){return this.creator=e,this},t.prototype.setSetter=function(e){return this.setter=e,this},t.prototype.setDatas=function(e){return this.datas=e,this.reloadList(),this},t.prototype.getDatas=function(){return this.datas},t.prototype.getActiveCellsByFilter=function(e){for(var t=[],o=0;o<this.cells.length;o++){var n=this.cells[o];e(n)&&t.push(n)}return t},t.prototype.setDebugLineEnabled=function(e){return this.bDebugLineEnabled=e,this},t.prototype.setReuseEnabled=function(e){return this.bReuseEnabled=e,this},t.prototype.setClippingEnabled=function(e){return this.bClippingEnabled=e,this},t.prototype.setElasticEnabled=function(e){return this.bElasticEnabled=e,this},t.prototype.setTouchScrollEnabled=function(e){return this.bTouchScrollEnabled=e,this._tryApplayTouchScrollEnabled(),this},t.prototype._tryApplayTouchScrollEnabled=function(){var e=this.getComponent(cc.ScrollView);cc.isValid(e)&&(this.bTouchScrollEnabled?e._registerEvent():e._unregisterEvent())},t.prototype.setAsyncSetterEnabled=function(e){return this.bAsyncSetterEnabled=e,e?null==this.asyncTimer&&(cc.log("start Timer"),this.asyncTimer=new i.default(1/60,-1,this.onAsyncTimerSpan.bind(this)),this.asyncTimer.startAndBindToNode(this)):null!=this.asyncTimer&&this.asyncTimer.stop(),this},t.prototype.setOnContainerMoved=function(e){return this.fOnContainerMoved=e,this},t.prototype.refreshActiveCells=function(){for(var e=this.cells,t=this.datas,o=0;o<e.length;o++){var n=e[o],i=t[n.__data_index];this._callCellSetter(n,i)}},t.prototype.jumpToHead=function(){this.scrollToHead(0,!1)},t.prototype.jumpToTail=function(){this.scrollToTail(0,!1)},t.prototype.jumpToIndex=function(e,t){this.scrollToIndex(e,t,0,!1)},t.prototype.jumpToData=function(e,t){this.scrollToData(e,t,0,!1)},t.prototype.scrollToHead=function(e,t){void 0===e&&(e=.3),void 0===t&&(t=!0);var o=this.getComponent(cc.ScrollView);o.vertical&&o.horizontal?o.scrollToTopLeft(e,t):o.vertical?o.scrollToTop(e,t):o.horizontal&&o.scrollToLeft(e,t),e<=0&&this.onContainerMoved()},t.prototype.scrollToTail=function(e,t){void 0===e&&(e=.3),void 0===t&&(t=!0);var o=this.getComponent(cc.ScrollView);o.vertical&&o.horizontal?o.scrollToBottomRight(e,t):o.vertical?o.scrollToBottom(e,t):o.horizontal&&o.scrollToRight(e,t),e<=0&&this.onContainerMoved()},t.prototype.scrollToIndex=function(e,t,o,n){void 0===o&&(o=.3),void 0===n&&(n=!0);var i=this.getComponent(cc.ScrollView);cc.log("jumpToIndex",e);var r=this.layouter.getPos(e),a=this.layouter.getCellSize(),s=r.x,c=-r.y,l=this.layouter.getJumpOffset();s+=-a.width/2+l.x,c+=-a.height/2+l.y;var u=this._calcPercentPos(s,c);i.stopAutoScroll(),i.scrollTo(u,o,n),this.onContainerMoved()},t.prototype.scrollToData=function(e,t,o,n){void 0===o&&(o=.3),void 0===n&&(n=!0);var i=this.datas.indexOf(e);i<0||this.scrollToIndex(i,t,o,n)},t.prototype.onContainerMoved=function(e){this.updateCellState(),this.fOnContainerMoved&&this.fOnContainerMoved(this,this.cells)},t.prototype.onScrolling=function(e){this.onContainerMoved(e)},t=__decorate([s],t)}(cc.Node));o.default=c,cc._RF.pop()},{"../../game/view/node/LayerColor":"LayerColor","../utils/Timer":"Timer","./ViewBase":"ViewBase"}],ReusePageView:[function(e,t,o){"use strict";cc._RF.push(t,"65fdazMNa9BV6Lsa+An3z73","ReusePageView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./ReuseList"),i=e("../utils/Tools"),r=cc._decorator,a=r.ccclass,s=(r.property,function(e){function t(){var t=e.call(this)||this;return t.fOnCellMoved=null,t.indexWhenBegan=0,t.touchBeganTime=0,i.default.registerTouchHandler(t,t.onTouchHandler.bind(t)),t}return __extends(t,e),t.prototype.onTouchHandler=function(e){if("began"==e.name){var t=this.calcNearestIndex();this.indexWhenBegan=t,this.touchBeganTime=(new Date).getTime()}else if("ended"==e.name||"cancelled"==e.name){t=this.calcNearestIndex();var o=e.getStartLocation(),n=e.getLocation(),i=((new Date).getTime()-this.touchBeganTime)/100,r=(o.x-n.x)/i,a=this.datas.length-1;t>=0&&(t==this.indexWhenBegan&&(r>=50&&t<a?t+=1:r<=-50&&t>0&&(t-=1)),0==t&&0==this.indexWhenBegan&&r<0||t==a&&this.indexWhenBegan==a&&r>0||this.scrollToIndex(t,null,.5,!0))}},t.prototype.calcNearestIndex=function(){for(var e=this.getListCenterInScrollX(),t=Number.POSITIVE_INFINITY,o=-1,n=0;n<this.cells.length;n++){var i=this.cells[n],r=(i.getContentSize(),i.getPosition().x),a=Math.abs(e-r);a<t&&(t=a,o=i.__data_index)}return o},t.prototype.getCellByDataIndex=function(e){for(var t=0;t<this.cells.length;t++){var o=this.cells[t];if(o.__data_index==e)return o}},t.prototype.getListCenterInScrollX=function(){var e=this.getComponent(cc.ScrollView).getScrollOffset();return this.getContentSize().width/2-e.x},t.prototype.onContainerMoved=function(t){if(e.prototype.onContainerMoved.call(this),this.fOnCellMoved)for(var o=this.getListCenterInScrollX(),n=0;n<this.cells.length;n++){var r=this.cells[n],a=r.getContentSize(),s=r.getPosition().x,c=Math.abs(o-s),l=i.default.scaleInRange(c,5,a.width,0,Math.PI/2),u=i.default.scaleInRange(Math.sin(l),0,1,1,0);this.fOnCellMoved(r,u,c)}},t.prototype.setOnCellMovedListener=function(e){this.fOnCellMoved=e},t=__decorate([a],t)}(n.default));o.default=s,cc._RF.pop()},{"../utils/Tools":"Tools","./ReuseList":"ReuseList"}],SceneBase:[function(e,t,o){"use strict";cc._RF.push(t,"5b505L37y1I6Zz2EV3Ib1Z3","SceneBase"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./ViewBase"),i=e("../../game/manager/mgrDirector"),r=cc._decorator.ccclass,a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.refreshSize(),this.registerListeners({MSG_VIEW_RESIZE:this.onMsgViewResize}),this.sendMsg("MSG_SCENE_LOADED")},t.prototype.refreshSize=function(){var e=i.default.size;this.setContentSize(e),this.nodeResource.setContentSize(e);for(var t=this.nodeResource.getComponentsInChildren(cc.Widget),o=0;o<t.length;o++){t[o].updateAlignment()}},t.prototype.onMsgViewResize=function(){this.refreshSize()},t=__decorate([r],t)}(n.default);o.default=a,cc._RF.pop()},{"../../game/manager/mgrDirector":"mgrDirector","./ViewBase":"ViewBase"}],ScleableButton:[function(e,t,o){"use strict";cc._RF.push(t,"d73bdn/VphF27UW9pqVYirD","ScleableButton"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../utils/Tools"),i=cc._decorator,r=i.ccclass,a=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fOnTouchCallback=null,t._bFocused=!1,t.isAction=!0,t}var o;return __extends(t,e),o=t,t.setSoundPlayHandler=function(e){this.soundPlayHandler=e},t.prototype.onLoad=function(){},t.prototype.onEnable=function(){n.default.registerTouchHandler(this.node,this.onTouchHandler.bind(this))},t.prototype.onDisable=function(){n.default.unregisterTouchHandler(this.node)},t.prototype.registerOnTouchCallback=function(e){this.fOnTouchCallback=e},t.prototype.triggerOnTouchCallback=function(e){this.fOnTouchCallback&&this.fOnTouchCallback(e)},t.prototype._doDownAction=function(e,t){if(0!=this.isAction){var o=this.node;o.stopAllActions(),o.runAction(cc.scaleTo(.1,.85*e,.85*t).easing(cc.easeIn(2)))}},t.prototype._doUpAction=function(e,t){if(0!=this.isAction){var o=this.node;o.stopAllActions(),o.runAction(cc.sequence(cc.scaleTo(.1,1.1*e,1.1*t).easing(cc.easeIn(2)),cc.scaleTo(.075,.95*e,.95*t),cc.scaleTo(.03,1*e,1*t)))}},t.prototype._doCancellAction=function(e,t){if(0!=this.isAction){var o=this.node;o.stopAllActions(),o.runAction(cc.sequence(cc.scaleTo(.15,1.05*e,1.05*t).easing(cc.easeQuadraticActionInOut()),cc.scaleTo(.1,1*e,1*t).easing(cc.easeOut(2))))}},t.prototype.setActionEnable=function(e){this.isAction=e},t.prototype.onTouchHandler=function(e){if("began"==e.name)this.touchDownRect=n.default.calcNodeBoundingBoxToWorld(this.node),this._doDownAction(1,1),this._bFocused=!0,o.soundPlayHandler instanceof Function&&o.soundPlayHandler();else if("moved"==e.name){var t=this.touchDownRect.contains(e.getLocation());this._bFocused?t||(this._bFocused=!1,this._doCancellAction(1,1)):t&&(this._bFocused=!0,this._doDownAction(1,1))}else this._bFocused&&(this._bFocused=!1,this._doUpAction(1,1));this.triggerOnTouchCallback(e)},t.soundPlayHandler=null,t=o=__decorate([r],t)}(cc.Component));o.default=a,cc._RF.pop()},{"../utils/Tools":"Tools"}],Spine:[function(e,t,o){"use strict";cc._RF.push(t,"70a27a8rPxBe6fHsejteGfY","Spine"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../game/manager/mgrCfg"),i=e("../../game/manager/mgrDirector"),r=e("../utils/Tools"),a=function(e){function t(t){var o=e.call(this)||this;o.bLoaded=!1,o.asyncData=null,o.asyncAttach=[],o.asyncMix=[],o.skinName="normal",o.spineData=n.default.get("spine_db",t);o.addComponent(sp.Skeleton);return o._loadSkeletonData(),o}return __extends(t,e),t.prototype._loadSkeletonData=function(){var e=this,t=this.spineData;i.default.loadRes(t.jsonFileName,sp.SkeletonData,function(o,n){if(o)cc.warn("Spine._loadSkeletonData error:",o);else if(cc.isValid(e)){var i=e.getComponent(sp.Skeleton);i.skeletonData=n,i.defaultSkin=e.skinName,i.premultipliedAlpha=1==t.bPremultipliedAlpha,i._updateSkeletonData(),e.bLoaded=!0,e.asyncData&&e.play(e.asyncData.movNames,e.asyncData.bLoop);for(var r=0;r<e.asyncAttach.length;r++){var a=e.asyncAttach[r];i.setAttachment(a[0],a[1])}for(r=0;r<e.asyncMix.length;r++){a=e.asyncMix[r];i.setMix(a[0],a[1],a[2])}}})},t.prototype.reset=function(){this.active=!0,this.rotation=0,this.setPosition(0,0),this.scaleX=this.spineData.scaleX,this.scaleY=this.spineData.scaleY,this.color=cc.color(255,255,255),this.opacity=255;var e=this.getComponent(sp.Skeleton);e.timeScale=1,e.setToSetupPose()},t.prototype.play=function(e,t){if(e instanceof Array||(e=[e]),null==t&&(t=!0),e.length<=0)cc.warn("Spine.play movName of found!");else if(this.asyncData={movNames:e,bLoop:t},this.bLoaded&&cc.isValid(this)){this.asyncData=null;for(var o=this.spineData,n=this.getComponent(sp.Skeleton),i=0;i<e.length;i++){var r=e[i];o[r]&&(r=o[r]);var a=!!t&&i==e.length-1;0==i?(n.defaultAnimation=r,n.setAnimation(0,r,a)):n.addAnimation(0,r,a)}}},t.prototype.setPause=function(e){this.getComponent(sp.Skeleton).timeScale=e?0:1},t.prototype.setTimeScale=function(e){this.getComponent(sp.Skeleton).timeScale=e},t.prototype.registerEventCallback=function(e){var t=this;if(this.unregisterEventCallback(),e){var o=function(o,n){var i=o.animation,a=i?i.name:"unknown",s="unknown";r.default.forEachMap(t.spineData,function(e,t){if(t==a)return s=e,!0});var c={name:n,movName:a,movKey:s,bLoop:o.loop};e(c)},n=this.getComponent(sp.Skeleton);n.setStartListener(function(e){o(e,"start")}),n.setEndListener(function(e){o(e,"end")}),n.setCompleteListener(function(e){o(e,"cpmplete")}),n.setEventListener(function(e){o(e,"event")})}},t.prototype.unregisterEventCallback=function(){var e=this.getComponent(sp.Skeleton);e.setStartListener(null),e.setEndListener(null),e.setCompleteListener(null),e.setEventListener(null)},t.prototype.isLoaded=function(){return this.bLoaded},t.prototype.trySetAttachment=function(e,t){this.bLoaded?this.getComponent(sp.Skeleton).setAttachment(e,t):this.asyncAttach.push([e,t])},t.prototype.trySetMix=function(e,t,o){var n=this.spineData,i=n[e],r=n[t];i&&r&&(this.bLoaded?this.getComponent(sp.Skeleton).setMix(i,r,o):this.asyncMix.push([i,r,o]))},t.prototype.trySetSkin=function(e){(this.skinName=e,this.bLoaded)&&this.getComponent(sp.Skeleton).setSkin(e)},t}(cc.Node);o.default=a,cc._RF.pop()},{"../../game/manager/mgrCfg":"mgrCfg","../../game/manager/mgrDirector":"mgrDirector","../utils/Tools":"Tools"}],SpriteBasedClippingNode:[function(e,t,o){"use strict";cc._RF.push(t,"3b2ceHkR4BDN5w0zFQ6Kgvv","SpriteBasedClippingNode"),Object.defineProperty(o,"__esModule",{value:!0});var n=1048576,i=function(e){function t(t,o){var i=e.call(this)||this;i.bInverted=!1,i.renderWidth=t,i.renderHeight=o,i.setContentSize(t,o);var r=new cc.RenderTexture(t,o);i._sgNode.addChild(r),i.renderTexture=r;var a=new cc.Node;a.parent=i,a.x=n,a.y=o/2,i.nodeRender=a;var s=new cc.Node;return s.parent=i,s.x=n,s.y=o/2,i.nodeStencil=s,i}return __extends(t,e),t.prototype.setInverted=function(e){},t.prototype.getRenderNode=function(){return this.nodeRender},t.prototype.getStencilNode=function(){return this.nodeStencil},t.prototype.flush=function(){var e=this.nodeRender,t=this.nodeStencil,o=this.renderTexture;o.clear(0,0,0,0),o.begin(),e.x=this.renderWidth/2,e._sgNode.visit(),e.x=n;for(var i=this.bInverted?770:771,r=t.getComponentsInChildren(cc.Sprite),a=0;a<r.length;a++){var s=r[a];s.srcBlendFactor=0,s.dstBlendFactor=i}t.x=this.renderWidth/2,t._sgNode.visit(),t.x=n,o.end()},t}(cc.Node);o.default=i,cc._RF.pop()},{}],SpriteEx:[function(e,t,o){"use strict";cc._RF.push(t,"2ebb8PW5WZNko0gGOLpZht+","SpriteEx"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../game/manager/mgrDirector");cc.Sprite.prototype.loadSpriteFrame=function(e){var t=this;n.default.loadRes(e,cc.SpriteFrame,function(e,o){e?cc.error(e.message):cc.isValid(t)&&(t.spriteFrame=o)})},cc.Sprite.prototype.loadSpriteFrameAndKeepSize=function(e){var t=this,o=this.node;o?n.default.loadRes(e,cc.SpriteFrame,function(e,n){if(e)cc.error(e.message);else if(cc.isValid(t)){t.__origin_width||(t.__origin_width=o.width*o.scaleX,t.__origin_height=o.height*o.scaleY);var i=t.__origin_width,r=t.__origin_height;t.spriteFrame=n,o.scale=Math.min(i/o.width,r/o.height)}}):cc.warn("SpriteEx.loadSpriteFrameAndKeepSize node not found!")},cc.Sprite.prototype.setSpriteFrameAndKeepSize=function(e){var t=this.node;if(t){if(cc.isValid(e)){this.__origin_width||(this.__origin_width=t.width*t.scaleX,this.__origin_height=t.height*t.scaleY);var o=this.__origin_width,n=this.__origin_height;this.spriteFrame=e,t.scale=Math.min(o/t.width,n/t.height)}}else cc.warn("SpriteEx.setSpriteFrameAndKeepSize node not found!")},cc._RF.pop()},{"../../game/manager/mgrDirector":"mgrDirector"}],TaskManager:[function(e,t,o){"use strict";cc._RF.push(t,"29a59H2eEFBFLzr4u37WBFW","TaskManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){this.taskList=[]}return e.prototype.push=function(e){!e||e.length<=0||this.taskList.push(e)},e.prototype.start=function(e){this.executeFinishCallback=e,this.__goNext()},e.prototype.__goNext=function(){var e=this;if(this.taskList.length>0)for(var t=this.taskList.shift(),o=0,n=0;n<t.length;n++){(0,t[n])(function(){++o==t.length&&e.__goNext()})}else this.executeFinishCallback()},e}();o.default=n,cc._RF.pop()},{}],Timer:[function(e,t,o){"use strict";cc._RF.push(t,"f3111ePoeBAwIQ8CGVyY16w","Timer"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(e,t,o){this._repeatCount=-1,this._span=1,this._callback=null,this._intervalId=null,this._count=0,this._span=e,this._repeatCount=t,this._callback=o}return e.callLater=function(t,o,n){var i=new e(t,1,o);n?i.startAndBindToNode(n):i.start()},e.callLoop=function(t,o,n){var i=new e(t,-1,o);if(1==n){var r=n;i.start(r)}else if(n instanceof cc.Node){i.startAndBindToNode(n)}else i.start()},e.prototype._onSpan=function(){if(this._count++,this._callback)try{this._callback(this)}catch(e){cc.warn("\u8b66\u544a] Timer._onSpan callback has error",e)}this._repeatCount>=0&&this._count>=this._repeatCount&&this.stop()},e.prototype.isRunning=function(){return null!=this._intervalId},Object.defineProperty(e.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"span",{get:function(){return this._span},enumerable:!0,configurable:!0}),e.prototype.startAndBindToNode=function(e){var t=this,o=new cc.Node,n=o.addComponent(cc.Component);return 0==n._isOnLoadCalled?n.onLoad=function(){t.start(!0)}:this.start(!0),n.onDestroy=function(){t.stop()},o.parent=e,this._bindingNode=o,this},e.prototype.start=function(e){return void 0===e&&(e=!1),this.stop(),this._callback?(!e&&this._repeatCount<0&&(cc.warn("\u8b66\u544a] Timer.start, this timer will never stop!"),cc.warn("\u8b66\u544a]     please use startAndBindToNode"),cc.warn("\u8b66\u544a]     or your can stop timer in callback. use e:stop()")),this._count=0,this._intervalId=setInterval(this._onSpan.bind(this),1e3*this.span),this):(cc.warn("\u8b66\u544a] Timer.start callback\u672a\u8bbe\u7f6e\uff01"),this)},e.prototype.stop=function(){return null!=this._intervalId&&(clearInterval(this._intervalId),this._intervalId=null),this},e}();o.default=n,cc._RF.pop()},{}],Tools:[function(e,t,o){"use strict";cc._RF.push(t,"ddcc2p3lQhKBYTlLASMxtxW","Tools"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../game/Const"),i=cc._decorator,r=i.ccclass,a=(i.property,function(){function e(){}var t;return t=e,e.time=function(){return null!=this._debugTime?this._debugTime:(new Date).getTime()/1e3},e._setDebugTime=function(e){this._debugTime=e},e.isOneDay=function(e,t){var o=new Date(1e3*e),n=new Date(1e3*t);return o.getFullYear()==n.getFullYear()&&o.getMonth()==n.getMonth()&&o.getDate()==n.getDate()},e.registerTouchHandler=function(e,t,o){void 0===o&&(o=!1);var n=e;if(n&&t){n.on(cc.Node.EventType.TOUCH_START,function(e){var i=e.getID()||0;return!(!o&&null!=n.__touch_id||(e.name="began",e.stopPropagation(),n.__touch_id=i,t(e),0))}),n.on(cc.Node.EventType.TOUCH_MOVE,function(e){var i=e.getID()||0;(o||i==n.__touch_id)&&(e.name="moved",t(e))}),n.on(cc.Node.EventType.TOUCH_END,function(e){var i=e.getID()||0;(o||i==n.__touch_id)&&(e.name="ended",n.__touch_id=null,t(e))}),n.on(cc.Node.EventType.TOUCH_CANCEL,function(e){var i=e.getID()||0;(o||i==n.__touch_id)&&(e.name="cancelled",n.__touch_id=null,t(e))})}},e.unregisterTouchHandler=function(e){e.off(cc.Node.EventType.TOUCH_START,null),e.off(cc.Node.EventType.TOUCH_MOVE,null),e.off(cc.Node.EventType.TOUCH_END,null),e.off(cc.Node.EventType.TOUCH_CANCEL,null)},e.getObjSize=function(e){if(!e)return 0;if(Array.isArray(e))return e.length;var o=0;return t.forEachMap(e,function(e,t){o++}),o},e.random=function(e,t){return null==e&&null==t?Math.random():null==t?Math.floor(Math.random()*e+1):Math.floor(Math.random()*(t-e+1)+e)},e.scaleInRange=function(e,t,o,n,i){return t<o?(e<t&&(e=t),e>o&&(e=o)):(e<o&&(e=o),e>t&&(e=t)),(e-t)/(o-t)*(i-n)+n},e.isWorldInLocalNode=function(e,o,n){var i=t.calcNodeBoundingBoxToWorld(e);return null!=n&&(i.x-=n,i.y-=n,i.width+=2*n,i.height+=2*n),i.contains(o)},e.calcRecursiveScale=function(e){var t=1;do{t*=e.getScale(),e=e.parent}while(null!=e);return t},e.calcWheelTarget=function(e,t){for(var o=0,n=0;n<e.length;n++){var i=e[n],r=parseInt(i[t]);if(isNaN(r))return cc.warn(ul.format("Tools.calcWheelTarget weight field not found! key=[%s]",t)),null;o+=r}var a=this.random(o);for(n=0;n<e.length;n++){i=e[n];if(a<=(r=parseInt(i[t])))return i;a-=r}return null},e.sortArrayByField=function(e,t){t="string"==typeof t?[t]:t;var o=[];for(var n in t){if((s=t[n])&&""!=s)if("-"===s.substring(0,1)){var i=s.substring(1,s.length);i&&""!=i&&o.push([i,!0])}else o.push([s,!1])}for(var r=[],a=0;a<e.length;a++){var s=e[a];r.push(s)}return r.sort(function(e,t){var n=0;for(var i in o){var r=o[i],a=r[0],s=r[1],c=e[a],l=t[a];if(null!=c&&0!=(n=s?l-c:c-l))return n}return n}),r},e.bubbleSort=function(e,t){for(var o=e.length,n=0;n<o;n++)for(var i=0;i<o-1-n;i++){if(t(e[i],e[i+1])>0){var r=e[i+1];e[i+1]=e[i],e[i]=r}}return e},e.forEachMap=function(e,t){if(e)for(var o=Object.keys(e),n=0;n<o.length;n++){var i=o[n],r=e[i];if(null!=r&&t(i,r))break}},e._origin_sortTiles=function(e){for(var t=function(e,t){return t.right>e.x&&t.top>e.y},o=[],n=e.length,i=0;i<n;i++)for(var r=e[i],a=o.indexOf(r),s=0,c=e.length;s<c;s++)if(i!=s){var l=e[s];if(t(r,l)){var u=o.indexOf(l);a<0&&(o.push(r),a=o.length-1),u<0&&(o.push(l),u=o.length-1),u<a&&(o.splice(a,1),o.splice(u,0,r),a=u)}}for(i=0;i<e.length;i++){r=e[i];o.indexOf(r)<0&&o.push(r)}return o},e.sortTiles=function(e){for(var t=function(e,t){return t.right>e.x&&t.top>e.y},o=0;o<e.length;o++){e[o]._id=o}var n=[],i={},r=e.length;for(o=0;o<r;o++)for(var a=i[(d=e[o])._id],s=0;s<r;s++)if(o!=s){var c=e[s];if(t(d,c)){var l=i[c._id];if(null==a&&(n.push(d),a=n.length-1,i[d._id]=a),null==l&&(n.push(c),l=n.length-1,i[c._id]=l),l<a){for(var u=l;u<a;u++){i[n[u]._id]++}n.splice(a,1),n.splice(l,0,d),a=l,i[d._id]=a}}}for(o=0;o<e.length;o++){var d;null==i[(d=e[o])._id]&&n.push(d)}return n},e.convertRectToNodeSpace=function(e,t){if(!t)return null;var o=cc.v2(t.xMin,t.yMin),n=cc.v2(t.xMax,t.yMax);o=e.convertToNodeSpaceAR(o),n=e.convertToNodeSpaceAR(n);var i=Math.min(o.x,n.x),r=Math.min(o.y,n.y),a=Math.max(o.x,n.x)-i,s=Math.max(o.y,n.y)-r;return new cc.Rect(i,r,a,s)},e.convertRectToWorldSpace=function(e,t){if(!t)return null;var o=cc.v2(t.xMin,t.yMin),n=cc.v2(t.xMax,t.yMax);o=e.convertToWorldSpaceAR(o),n=e.convertToWorldSpaceAR(n);var i=Math.min(o.x,n.x),r=Math.min(o.y,n.y),a=Math.max(o.x,n.x)-i,s=Math.max(o.y,n.y)-r;return new cc.Rect(i,r,a,s)},e.calcNodeBoundingBoxToWorld=function(e,o){var n=e.getBoundingBox();return o&&(n.x-=o,n.y-=o,n.width+=2*o,n.height+=2*o),t.convertRectToWorldSpace(e.parent,n)},e.formatTime=function(e,t){var o=Math.floor(e/3600),n=Math.floor(e/60)%60,i=Math.floor(e)%60;return t.match("%h")&&(t=t.replace("%h",o.toString())),t.match("%H")&&(t=t.replace("%H",ul.format("%02d",o))),t.match("%m")&&(t=t.replace("%m",n.toString())),t.match("%M")&&(t=t.replace("%M",ul.format("%02d",n))),t.match("%s")&&(t=t.replace("%s",i.toString())),t.match("%S")&&(t=t.replace("%S",ul.format("%02d",i))),t},e.formatFullTime=function(e,t){var o=new Date(e),n=o.getFullYear(),i=o.getMonth()+1,r=o.getDate(),a=o.getHours(),s=o.getMinutes(),c=o.getSeconds();return t.match("%y")&&(t=t.replace("%y",n.toString())),t.match("%m")&&(t=t.replace("%m",i.toString())),t.match("%M")&&(t=t.replace("%M",ul.format("%02d",i))),t.match("%d")&&(t=t.replace("%d",r.toString())),t.match("%D")&&(t=t.replace("%D",ul.format("%02d",r))),t.match("%h")&&(t=t.replace("%h",a.toString())),t.match("%H")&&(t=t.replace("%H",ul.format("%02d",a))),t.match("%tm")&&(t=t.replace("%tm",s.toString())),t.match("%TM")&&(t=t.replace("%TM",ul.format("%02d",s))),t.match("%s")&&(t=t.replace("%s",c.toString())),t.match("%S")&&(t=t.replace("%S",ul.format("%02d",c))),t},e.setCascadeColor=function(e,t){e.color=t;for(var o=0;o<e.children.length;o++){var n=e.children[o];this.setCascadeColor(n,t)}},e.generateUUID=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var o=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?o:3&o|8).toString(16)})},e.parseLogicExpressionArray=function(e){for(var t=!0,o=!1,n=null,i=0;i<e.length;i++){var r=e[i];switch(Array.isArray(r)&&(r=this.parseLogicExpressionArray(r)),typeof r){case"string":switch(r){case"not":o=!o;break;case"and":n&&cc.warn(ul.format("Tools.parseLogicExpressionArray exp='%s' symbol overload index=[%d], origin_symbol=[%s], new_symbol=[%s]",JSON.stringify(e),i,n,r)),n="and";break;case"or":n&&cc.warn(ul.format("Tools.parseLogicExpressionArray exp='%s' symbol overload index=[%d], origin_symbol=[%s], new_symbol=[%s]",JSON.stringify(e),i,n,r)),n="or";break;default:cc.warn(ul.format("Tools.parseLogicExpressionArray exp='%s' unknown symbol index=[%d], symbol=[%s]",JSON.stringify(e),i,r))}break;case"boolean":o&&(r=!r,o=!1),t=n&&"and"!=n?t||r:t&&r}}return t},e.recursionChildren=function(e,t){if(cc.isValid(e)&&t)for(var o=0;o<e.children.length;o++){var n=e.children[o];cc.isValid(n)&&(t(n),this.recursionChildren(n,t))}},e.formatNumToStr=function(e){var t=e.toString();return e>=1e12?t=Math.floor(e/10/1e3/1e3/1e3)/100+"mm":e>=1e9?t=Math.floor(e/10/1e3/1e3)/100+"km":e>=1e6?t=Math.floor(e/10/1e3)/100+"m":e>=1e3&&(t=Math.floor(e/10)/100+"k"),t},e.getNodeWorldPosAR=function(e){return e.parent.convertToWorldSpaceAR(e.getPosition())},e.getIntersectPointLineWithRect=function(e,t,o){var n=null,i=null;(o.contains(e)||o.contains(t))&&(n=e.clone());var r=cc.v2(o.xMin,o.yMin),a=cc.v2(o.xMin,o.yMax),s=cc.v2(o.xMax,o.yMin),c=cc.v2(o.xMax,o.yMax);return this.isIntersectLineWithLine(e,t,r,a)&&(i=this.getIntersectPointLineWithLine(e,t,r,a)),this.isIntersectLineWithLine(e,t,a,c)&&(i=this.getIntersectPointLineWithLine(e,t,a,c)),this.isIntersectLineWithLine(e,t,c,s)&&(i=this.getIntersectPointLineWithLine(e,t,c,s)),this.isIntersectLineWithLine(e,t,s,r)&&(i=this.getIntersectPointLineWithLine(e,t,s,r)),i&&(n=i),n},e.isIntersectLineWithLine=function(e,t,o,n){return this.quickReject(e,t,o,n)&&this.straddle(e,t,o,n)},e.quickReject=function(e,t,o,n){var i=Math.max(e.x,t.x),r=Math.max(e.y,t.y),a=Math.min(e.x,t.x),s=Math.min(e.y,t.y),c=Math.max(o.x,n.x),l=Math.max(o.y,n.y),u=Math.min(o.x,n.x),d=Math.min(o.y,n.y);return!(i<u||r<d||c<a||l<s)},e.straddle=function(e,t,o,n){var i=e.x,r=t.x,a=e.y,s=t.y,c=o.x,l=n.x,u=o.y,d=n.y;return!(((i-c)*(d-u)-(a-u)*(l-c))*((r-c)*(d-u)-(s-u)*(l-c))>0||((c-i)*(s-a)-(u-a)*(r-i))*((l-i)*(s-a)-(d-a)*(r-i))>0)},e.getIntersectPointLineWithLine=function(e,t,o,n){var i=e.x,r=t.x,a=e.y,s=t.y,c=o.x,l=n.x,u=o.y,d=n.y,p=(s-a)*(l-c)-(i-r)*(u-d);if(0==p)return null;var h=((r-i)*(l-c)*(u-a)+(s-a)*(l-c)*i-(d-u)*(r-i)*c)/p,f=-((s-a)*(d-u)*(c-i)+(r-i)*(d-u)*a-(l-c)*(s-a)*u)/p;return(h-i)*(h-r)<=0&&(f-a)*(f-s)<=0&&(h-c)*(h-l)<=0&&(f-u)*(f-d)<=0?cc.v2(h,f):null},e.getRotateByVector=function(e){var t=0,o=e.x,i=e.y;0!=o?t=-1*Math.atan(i/o)*n.default.RADIAN2EULAR:i>0?t=-90:i<0&&(t=90);return t},e.degreesToVector=function(e){var t=cc.misc.degreesToRadians(e);return cc.v2(1,0).rotate(-t)},e.vectorToDegress=function(e){var t=cc.v2(1,0),o=e.signAngle(t);return cc.misc.radiansToDegrees(o)},e.calcResourcesRawUrl=function(e){return cc.url.raw("resources/")+e.replace("resources/","")},e._debugTime=null,e.calcPointOnArc=function(e,t,o,n){var i=n*Math.PI/180;return[Math.cos(i)*o+e,Math.sin(i)*o+t]},e=t=__decorate([r],e)}());o.default=a,cc._RF.pop()},{"../../game/Const":"Const"}],ULNativeController:[function(e,t,o){"use strict";cc._RF.push(t,"3ed3b2mFs9JvqZRCOlbXot4","ULNativeController"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../ulsdkdemo/ulsdkmiddleware/ulsdkdemomiddleware.js"),i=function(){function e(){}return e.sendMsgToSdk=function(e){n.request(e)},e.setGameCallback=function(e){n.setGameCallback(e)},e.initSdk=function(){n.initSdk()},e}();o.default=i,cc._RF.pop()},{"../ulsdkdemo/ulsdkmiddleware/ulsdkdemomiddleware.js":"ulsdkdemomiddleware"}],UnitTestCase:[function(e,t,o){"use strict";cc._RF.push(t,"1575fu8zohGiKKS7rO7tRc3","UnitTestCase"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,function(){function e(){this.assertCount=0,this.assertFaildCount=0}return e.prototype.prepare=function(){},e.prototype.run=function(){},e.prototype.cleanup=function(){},e.prototype.assertEquals=function(e,t,o){this.assertCount++,o!=t?(cc.error(ul.format("%s: \u65ad\u8a00\u5f02\u5e38\uff1a%s \u671f\u671b==[%s] \u5b9e\u9645\u503c\uff1a[%s]",this.name,e,o,t)),this.assertFaildCount++):this.isLogPassInfo()&&cc.log(ul.format("%s: \u65ad\u8a00\u901a\u8fc7: %s",this.name,e))},e.prototype.assertNotEquals=function(e,t,o){this.assertCount++,o==t?(cc.error(ul.format("%s: \u65ad\u8a00\u5f02\u5e38\uff1a%s \u671f\u671b!=[%s] \u5b9e\u9645\u503c\uff1a[%s]",this.name,e,o,t)),this.assertFaildCount++):this.isLogPassInfo()&&cc.log(ul.format("%s: \u65ad\u8a00\u901a\u8fc7: %s",this.name,e))},e.prototype.isLogPassInfo=function(){return!1},e=__decorate([i],e)}());o.default=r,cc._RF.pop()},{}],ViewBase:[function(e,t,o){"use strict";cc._RF.push(t,"61455sbxEVAr5Ssh4NM0iMG","ViewBase"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../game/manager/mgrDirector"),i=e("../component/LifeCycleMonitor"),r=e("../utils/MsgHandler"),a=e("../utils/Tools"),s=function(e){function t(t){void 0===t&&(t={});var o=e.call(this)||this;return t||(t={}),o.context=t,o._msgHander=new r.default,o._bindLifeCycle(),o}return __extends(t,e),t.prototype._onPreDestroy=function(){this.onDestroy(),e.prototype._onPreDestroy&&e.prototype._onPreDestroy.call(this)},t.prototype.onLoad=function(){this.startProcMsg(),this._loadResource()},t.prototype.onResourceLoaded=function(){},t.prototype.start=function(){},t.prototype.update=function(e){},t.prototype.onDestroy=function(){this.stopProcMsg()},t.prototype.registerListeners=function(e){var t=this;a.default.forEachMap(e,function(o,n){e[o]=n.bind(t)}),this._msgHander.registerListeners(e)},t.prototype.startProcMsg=function(){this._msgHander.startProcMsg()},t.prototype.stopProcMsg=function(){this._msgHander.stopProcMsg()},t.prototype.sendMsg=function(e,t){this._msgHander.sendMsg(e,t)},t.prototype._getResourceName=function(){return""},t.prototype._getResourceBindingConfig=function(){return{}},t.prototype._loadResource=function(){var e=this,t=this._getResourceName();if(!t)return this.nodeResource=this,this.onResourceLoaded(),void(this.nodeResource=this);n.default.loadNode(t,function(o){var n=o;if(cc.isValid(e)){cc.log("@@@resourceName: ",t);var i=new cc.Node;i.parent=e,n.parent=i,0==n.x&&0==n.y||n.setPosition(0,0);var r=e._buildNodeMapping(n);a.default.forEachMap(e._getResourceBindingConfig(),function(t,o){var n=r[t];if(n){var i=null;if(o.vartype==cc.Node)i=n;else if(i=n.getComponent(o.vartype)){var a=o.events;if(a)for(var s=0;s<a.length;s++){var c=a[s],l=c.bindMethod,u=c.method;i[l]instanceof Function?e[u]instanceof Function?i[l](e[u].bind(e)):cc.warn(ul.format("ViewBase._loadResource method not found! varname=[%s] method=[%s]",c.varname,u)):cc.warn(ul.format("ViewBase._loadResource bindMethod not found! varname=[%s] bindMethodName=[%s]",c.varname,l))}}else cc.warn("ViewBase._loadResource obj not found!",t);e[o.varname]=i}else cc.warn("ViewBase._loadResource node not found!",t)}),cc.log("  after loaded, trigger onResourceLoaded"),e.nodeResource=n,e.onResourceLoaded()}else cc.warn("ViewBase._loadResource when nodeResource laod finished, this is unvaliad!")})},t.prototype._buildNodeMapping=function(e,t){t||(t={}),e.name&&(t[e.name]=e);for(var o=e.children,n=0;n<o.length;n++){var i=o[n];this._buildNodeMapping(i,t)}return t},t.prototype._bindLifeCycle=function(){var e=this.addComponent(i.default);e.setOnLoadCallback(this.onLoad.bind(this)),e.setStartCallback(this.start.bind(this)),e.setUpdateCallback(this.update.bind(this))},t.prototype.isResourceLoaded=function(){return cc.isValid(this.nodeResource)},t}(cc.Node);o.default=s,cc._RF.pop()},{"../../game/manager/mgrDirector":"mgrDirector","../component/LifeCycleMonitor":"LifeCycleMonitor","../utils/MsgHandler":"MsgHandler","../utils/Tools":"Tools"}],init:[function(e,t,o){"use strict";cc._RF.push(t,"c811f+28JBJvILU83JHrwdf","init"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./game/manager/mgrCfg"),i=e("./game/manager/mgrDirector"),r=e("./game/manager/mgrRecord"),a=e("./game/manager/mgrPlayer"),s=e("./game/manager/mgrNetwork"),c=e("./game/manager/mgrTip"),l=e("./game/manager/mgrPool"),u=e("./game/manager/mgrCop"),d=e("./game/manager/mgrAlu"),p=e("./game/manager/mgrSound"),h=e("./game/manager/mgrWordFilter"),f=e("./game/manager/mgrGuide"),g=e("./game/manager/mgrAd"),m=e("./game/manager/mgrNative"),_=e("./game/manager/mgrSdk"),v=e("./game/manager/mgrShop");window.ul={},n.default.init(),r.default.init(),i.default.init(),l.default.init(),c.default.init(),h.default.init(),u.default.init(),d.default.init(),m.default.init(),f.default.init(),a.default.init(),s.default.init(),v.default.init(),p.default.init(),_.default.init(),g.default.init(),s.default.init(),cc._RF.pop()},{"./game/manager/mgrAd":"mgrAd","./game/manager/mgrAlu":"mgrAlu","./game/manager/mgrCfg":"mgrCfg","./game/manager/mgrCop":"mgrCop","./game/manager/mgrDirector":"mgrDirector","./game/manager/mgrGuide":"mgrGuide","./game/manager/mgrNative":"mgrNative","./game/manager/mgrNetwork":"mgrNetwork","./game/manager/mgrPlayer":"mgrPlayer","./game/manager/mgrPool":"mgrPool","./game/manager/mgrRecord":"mgrRecord","./game/manager/mgrSdk":"mgrSdk","./game/manager/mgrShop":"mgrShop","./game/manager/mgrSound":"mgrSound","./game/manager/mgrTip":"mgrTip","./game/manager/mgrWordFilter":"mgrWordFilter"}],main:[function(e,t,o){"use strict";cc._RF.push(t,"99ca5HYPuhJE6hdQAgv4xEb","main"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sceneRoot=null,t}return __extends(t,e),t.prototype.start=function(){null.parent=this.sceneRoot},__decorate([r({type:cc.Node})],t.prototype,"sceneRoot",void 0),t=__decorate([i],t)}(cc.Component);o.default=a,cc._RF.pop()},{}],mgrAd:[function(e,t,o){"use strict";cc._RF.push(t,"20276rxf1BCtI/uXv/IKIg9","mgrAd"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../ulframework/manager/Manager"),i=e("./mgrRecord"),r=e("../../ulframework/utils/Tools"),a=e("./mgrCfg"),s=e("./mgrAlu"),c=e("./mgrSdk"),l=e("./mgrPlayer"),u=e("./mgrSound"),d=e("./mgrTip"),p=e("../../ulframework/utils/Timer"),h=e("./mgrDirector"),f=e("../Const"),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.onLoad=function(){e.onLoad.call(this),this.loadRecord(),this.registerListeners({MSG_ADV_SHOW_RESULT:this.onMsgAdvShowResult,MSG_ADV_CLOSE_RESULT:this.onMsgAdvCloseResult,MSG_ADV_INFO_RESULT:this.onMsgAdvInfoResult,MSG_LIFE_CYCLE:this.onMsgLifeCycle,MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd,MSG_ITEM_AMOUNT_CHANGED:this.onMsgItemAmountChanged})},t.loadRecord=function(){e.loadRecord.call(this);var t=i.default.getData("ad")||{};this.lastFinishedTimes=t.lastFinishedTimes||{}},t.saveRecord=function(){e.saveRecord.call(this);var t={lastFinishedTimes:this.lastFinishedTimes||{}};i.default.setData("ad",t)},t.isAdEventHasChanceTrigger=function(e){var t=a.default.get("ad_event_db",e);if(!t)return!1;if(!s.default.check(t.aluId))return!1;var o=t.ratio;return t.ratioFromCopKey&&(o=c.default.getCopNumberValueByKey(t.ratioFromCopKey)),!(o<=0)&&(!(t.wipeItemId>0&&l.default.getItemAmount(t.wipeItemId)>0)||(cc.log("  \u53bb\u5e7f\u544a\uff0c\u4e0d\u901a\u8fc7"),!1))},t.preCheckCanTriggerAdEvent=function(e){return this.getAdEventRemainCd(e)>0?(cc.log("  \u51b7\u5374\u65f6\u95f4\u672a\u5230\uff0c\u4e0d\u901a\u8fc7"),!1):this.preCheckCanTriggerAdEventWithoutCd(e)},t.preCheckCanTriggerAdEventWithoutCd=function(e){if(c.default.getCopAdMode()==f.AdMode.none)return!1;var t=a.default.get("ad_event_db",e);if(!t)return!1;if(cc.log("mgrAd.preCheckCanTriggerAdEvent",e,t),!this.isAdTypeValid(e))return cc.log("  \u5e7f\u544a\u6ca1\u6709\u6b21\u6570\u4e86 "),!1;if(!s.default.check(t.aluId))return cc.log("  alu\u4e0d\u901a\u8fc7\uff0c\u4e0d\u901a\u8fc7"),!1;var o=t.ratio;if(t.ratioFromCopKey&&(o=c.default.getCopNumberValueByKey(t.ratioFromCopKey),cc.log("  use cop ratio:",o)),cc.log("  \u89e6\u53d1\u51e0\u7387\uff1a",o),!(r.default.random(100)>o))return!(t.wipeItemId>0&&l.default.getItemAmount(t.wipeItemId)>0)||(cc.log("  \u53bb\u5e7f\u544a\uff0c\u4e0d\u901a\u8fc7"),!1);cc.log("  \u6982\u7387\u4e0d\u901a\u8fc7\uff0c\u4e0d\u901a\u8fc7")},t.triggerAdEvent=function(e,o,n){var i=a.default.get("ad_event_db",e);if(i)if(cc.log("mgrAd.\u89e6\u53d1\u5e7f\u544a\u4e8b\u4ef6",e,o,n),n||this.preCheckCanTriggerAdEvent(e))if(this.getAdEventRemainCd(e)>0)cc.log("  \u51b7\u5374\u65f6\u95f4\u672a\u5230\uff0c\u4e0d\u901a\u8fc7");else{var s={};if(r.default.forEachMap(i.param,function(e,t){s[e]=t}),o&&r.default.forEachMap(o,function(e,t){s[e]=t}),s.adEventId=e,s.advInfo=i.advInfo,s.serialNumber=this.AD_EVENT_SERIAL_NUMBER,this.AD_EVENT_SERIAL_NUMBER++,i.bPauseSound&&u.default.pauseSound(),this.lastTriggerAdEventId=e,this.lastTriggerAdEventParam=o,i.timeout>0&&(this.showWaiting(),this.startTimeoutTimer(i.timeout)),!(i.bCanReplaceToNativeInstitial&&this.preCheckCanTriggerAdEvent(t.NATIVE_INTERSITIAL_AD_EVENT_ID)&&this.tryShowNativeInstitial(e,s))){if(this.markFinished(e),cc.log("  \u5f00\u59cb\u5e7f\u544a",i.cmd,i.type),this.isIgnoreAd())this.sendMsg("MSG_ADV_SHOW_RESULT",{advData:{type:i.type,displayTime:i.displayTime>0&&i.displayTime||null,gravity:""!=i.gravity&&i.gravity||null,userData:JSON.stringify(s)},code:1}),this.sendMsg("MSG_ADV_CLOSE_RESULT",{type:i.type,displayTime:i.displayTime>0&&i.displayTime||null,gravity:""!=i.gravity&&i.gravity||null,userData:JSON.stringify(s),code:1});else{var l={cmd:i.cmd,data:{type:i.type,displayTime:i.displayTime>0&&i.displayTime||null,gravity:""!=i.gravity&&i.gravity||null,userData:JSON.stringify(s),advId:i.advId||"",nativeType:i.nativeType||null,code:i.code||null}};ul.dump(l),c.default.sendMsgToSdk(l)}i.statisticsSdkEvent&&i.statisticsSdkEvent.length>0&&c.default.statisCommonEvent(i.statisticsSdkEvent)}}else cc.log("    preCheckCanTriggerAdEvent \u4e0d\u901a\u8fc7")},t.retryLastTriggerAdEvent=function(){this.lastTriggerAdEventId?this.triggerAdEvent(this.lastTriggerAdEventId,this.lastTriggerAdEventParam,!0):cc.warn("mgrAd.retryLastTriggerAdEvent lastTriggerAdEventId not found!")},t.startTimeoutTimer=function(e){var t=this;this.stopTimeoutTimer(),this.timeoutTimer=new p.default(e,1,function(){t.stopTimeoutTimer(),t.showFaild()}),this.timeoutTimer.start()},t.stopTimeoutTimer=function(){this.timeoutTimer&&(this.timeoutTimer.stop(),this.timeoutTimer=null)},t.showWaiting=function(){},t.hideWaiting=function(){this.sendMsg("MSG_AD_CLOSE_WAITING")},t.showFaild=function(){},t.hideFaild=function(){this.sendMsg("MSG_AD_CLOSE_FAILD")},t.getNativeDataByAdEventId=function(e){var t=a.default.get("ad_event_db",e);return t?this.getNativeDataByNativeType(t.nativeType):null},t.getNativeDataByNativeType=function(e){return this.cacheNativeDatas[e]},t.tryRequestAllNativeData=function(e){var t=this,o={};a.default.forDb("ad_event_db",function(n,i){i.nativeType&&(!e&&o[i.nativeType]||(o[i.nativeType]=!0,t.tryRequestNativeData(i.id,e)))})},t.tryRequestNativeData=function(e,t){var o=this,n=a.default.get("ad_event_db",e);if(n&&this.isAdEventHasChanceTrigger(e)){var i=n.nativeType;if(!t)if(this.cacheNativeDatas[i])return;var s=this.lastRequestNativeDataTimes[i]||0,l=c.default.getCopNumberValueByKey("ad_native_close_request_cd");if(r.default.time()-s<=l)cc.warn("mgrAd:tryRequestNativeData \u8bf7\u6c42cd\u4e2d\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5");else{this.lastRequestNativeDataTimes[i]=r.default.time();var u={nativeType:i};if(this.cacheNativeDatas[i]=null,this.sendMsg("MSG_AD_NATIVE_DATA_REFRESH",{nativeType:i}),cc.sys.isNative){var d={cmd:"/adv/getAdvInfo",data:{type:n.type,userData:JSON.stringify(u),advId:n.advId||"",nativeType:i}};c.default.sendMsgToSdk(d)}else p.default.callLater(.1,function(){var e=r.default.random(10)-1,t={url:["http://www.ultralisk.cn/d/file/HotGames/2018-07-24/69328da45b23639618d79c124f8c0c3a.png","http://www.ultralisk.cn/d/file/HotGames/2018-05-09/7757d65d1a7103f00418059774993bf3.png","http://www.ultralisk.cn/d/file/HotGames/2018-04-18/765538bd4f97e0b100d026350746de59.png","http://www.ultralisk.cn/d/file/HotGames/2018-01-23/8fa7b4928924aaed8615ae7ded47d28e.png","http://www.ultralisk.cn/d/file/HotGames/2018-01-23/ad353a84a90d4d0139f42adefafe4b1e.png","http://www.ultralisk.cn/d/file/HotGames/2017-09-14/17ef0556ffd313cf58abb5f212945edd.png","http://www.ultralisk.cn/d/file/HotGames/2017-09-07/44b3c9d560729bd57c1f2f4f9c886745.png","http://www.ultralisk.cn/d/file/yeluoli/2017-05-08/9ba813e1d318382891ce4dbe7303c2fd.jpg","http://www.ultralisk.cn/d/file/FriendLink/2016-11-16/ce089ef6334447830d22d61d610bbdeb.png","http://www.ultralisk.cn/d/file/FriendLink/2016-09-19/269d373c9a2e89a73f17985431df3b19.png"][e],title:["\u6d4b\u8bd5","\u6d4b\u8bd5\u6807\u9898","\u6d4b\u8bd5\u6807\u9898\u6807\u9898","\u6d4b\u8bd5\u6807\u9898\u6807\u9898\u6807\u9898","\u6d4b\u8bd5\u6807\u9898\u6807\u9898\u6807\u9898\u6807\u9898","\u6d4b\u8bd5\u6807\u9898\u6807\u9898\u6807\u9898\u6807\u9898\u6807\u9898","\u6d4b\u8bd5\u6807\u9898\u6807\u9898\u6807\u9898\u6807\u9898\u6807\u9898\u6807\u9898","\u6d4b\u8bd5\u6807\u9898\u6807\u9898\u6807\u9898\u6807\u9898\u6807\u9898\u6807\u9898\u6807\u9898","\u6d4b\u8bd5\u6807\u989812412412412","\u6d4b\u8bd5\u6807\u9898\u6d4b\u8bd5\u6807\u9898\u6d4b\u8bd5\u6807\u9898\u6d4b\u8bd5\u6807\u9898"][e],desc:"\u6d4b\u8bd5\u5185\u5bb9\u6d4b\u8bd5\u5185\u5bb9\u6d4b\u8bd5\u5185\u5bb9\u6d4b\u8bd5\u5185\u5bb9\u6d4b\u8bd5\u5185\u5bb9"+e,targetTitle:"\u67e5\u770b\u8be6\u60c5"+e};o.sendMsg("MSG_ADV_INFO_RESULT",{cmd:"/adv/advInfoResult",code:"1",type:n.type,userData:JSON.stringify(u),nativeData:JSON.stringify(t)})})}}},t.tryShowNativeInstitial=function(e,o){return cc.log("mgrAd:tryShowNativeInstitial",e),this.getNativeDataByAdEventId(t.NATIVE_INTERSITIAL_AD_EVENT_ID)?(h.default.openDialog("vAdNativeDialog",{adEventId:t.NATIVE_INTERSITIAL_AD_EVENT_ID,originAdEventId:e,originUserData:o}),!0):(t.tryRequestNativeData(t.NATIVE_INTERSITIAL_AD_EVENT_ID),!1)},t.onNativeAdDisplayed=function(e){var t=a.default.get("ad_event_db",e);if(t&&0!=t.nativeType){cc.log("\u539f\u751f\u5e7f\u544a\u5c55\u793a\u6210\u529f",e);var o={cmd:t.cmd,data:{type:t.type,userData:{},nativeType:t.nativeType||1,code:1}};c.default.sendMsgToSdk(o)}},t.onReceiveSdkAvailableNativeTypes=function(e){this.availableNativeTypes=e;for(var t={},o=0;o<e.length;o++){var n=e[o];t[n]=!0}a.default.forDb("ad_event_db",function(e,o){o.nativeType&&!t[o.nativeType]&&(cc.log(ul.format("mgrAd overwrite nativeType. adEventId: %s, nativeType: %d->%d",o.id,o.nativeType,1)),o.nativeType=1)})},t.onMsgAdvShowResult=function(e){var t=e;console.info("mgrAd.onMsgAdvShowResult"),ul.dump(t,"data");var o=t.advData,n=JSON.parse(o.userData||"")||{},i=n.adEventId||0,r=a.default.get("ad_event_db",i);if(r){r.timeout>0&&(this.hideWaiting(),this.hideFaild(),this.stopTimeoutTimer());var s=parseInt(t.code);0==s?r.bPauseSound&&u.default.resumeSound():1==s?(r.bPauseSound&&u.default.resumeSound(),this.markFinished(i)):2==s&&r.bPauseSound&&u.default.resumeSound(),s==r.successCode&&this._doAdEventSuccessdLogic(i,n)}else cc.log("[warn] ul.mgrAd.onMsgAdvShowResult adEventId not found!")},t._doAdEventSuccessdLogic=function(e,t){var o=parseInt(t.serialNumber)||0;if(this.successedAdEventSerialNumbers[o])cc.warn(ul.format("mgrAd.onMsgAdvShowResult ad already do successd! adEventId=%s, serialNumber=%d",e,o));else{this.successedAdEventSerialNumbers[o]=!0;var n=a.default.get("ad_event_db",e),i=[],r=t.rewards||n.param.rewards;r&&r.forEach(function(e){var t=e[0],o=e[1],r=e[2],a=e[3],s=0;s=o?r?Math.random()*(r-o)+o:o:r,s=Math.floor(s),l.default.addItemAmount(t,s,n.statisticsSdkEvent),a||i.push({itemId:t,amount:s,amountSteps:[[s,0]],customerContext:{bBanAdReward:!0}})});var s=null!=t.rewardBoxId?t.rewardBoxId:n.param.rewardBoxId;if(s)l.default.openItemBox(s).forEach(function(e){var t=e[0],o=e[1];l.default.addItemAmount(t,o,n.statisticsSdkEvent),i.push({itemId:t,amount:o,amountSteps:[[o,0]],customerContext:{bBanAdReward:!0}})});i.length>0&&d.default.addGotItemTipGroup(i),this.sendMsg("MSG_AD_EVENT_SUCCESSD",{adEventId:e,userData:t})}},t.onMsgAdvCloseResult=function(e){var t=e;console.info("mgrAd.onMsgAdvCloseResult"),ul.dump(t,"data");var o=JSON.parse(t.userData||"")||{},n=o.adEventId||0;a.default.get("ad_event_db",n)?1==t.code&&this.sendMsg("MSG_AD_EVENT_CLOSED",{adEventId:n,userData:o}):cc.log("[warn] ul.mgrAd.onMsgAdvShowResult adEventId not found!")},t.onMsgAdvInfoResult=function(e){var o=this,n=e,i=JSON.parse(n.userData||"")||{},r=parseInt(i.nativeType);if(r){var a=JSON.parse(n.nativeData||"")||{};if(a.title||(a.title="\u5e7f\u544a\u6807\u9898"),a.desc||(a.desc="\u5e7f\u544a\u5185\u5bb9"),a.targetTitle||(a.targetTitle="\u67e5\u770b\u8be6\u60c5"),a.url)return this.downloadedImgFrame[a.url]?(cc.log("\u56fe\u7247\u8d44\u6e90\u5df2\u7f13\u5b58\uff0c\u76f4\u63a5\u4f7f\u7528"),a.frame=this.downloadedImgFrame[a.url],t.NATIVE_ID++,a.id=t.NATIVE_ID,this.cacheNativeDatas[r]=a,void this.sendMsg("MSG_AD_NATIVE_DATA_REFRESH",{nativeType:r})):void cc.loader.load({url:a.url,type:"png"},function(e,n){if(e)cc.error(" onMsgAdvInfoResult load err: ",e.message);else{var i=new cc.SpriteFrame(n);a.frame=i,o.downloadedImgFrame[a.url]=i,t.NATIVE_ID++,a.id=t.NATIVE_ID,o.cacheNativeDatas[r]=a,o.sendMsg("MSG_AD_NATIVE_DATA_REFRESH",{nativeType:r})}});cc.warn(" onMsgAdvInfoResult nativeData.url is null, url : ",a.url)}else cc.warn("mgrAd.onMsgAdvInfoResult nativeType not found!")},t.onMsgLifeCycle=function(e){},t.onMsgAdEventSuccessd=function(e){var t=e.adEventId,o=a.default.get("ad_event_db",t);o&&(o.remainCountItemId>0&&l.default.addItemAmount(o.remainCountItemId,-1,"\u5e7f\u544a\u64ad\u653e\u6b21\u6570"),0!=o.nativeType&&(this.lastRequestNativeDataTimes[o.nativeType]=null,this.tryRequestNativeData(t,!0)))},t.onMsgItemAmountChanged=function(e){var t=e.itemId;t==f.default.ITEM_ID_WIPE_AD&&l.default.getItemAmount(t)>0&&c.default.closeAdv("banner")},t.getRandomRewardId=function(){var e=this,t=[];if(a.default.forDb("ad_reward_db",function(o,n){e.getRewardRemainCount(n.id)>0&&t.push(n)}),t.length<=0)return null;var o=r.default.calcWheelTarget(t,"weight");return o?o.id:null},t.getRewardRemainCount=function(e){var t=a.default.get("ad_reward_db",e);return this.getAdEventRemainCount(t.adEventId)},t.getAdEventRemainCount=function(e){var t=a.default.get("ad_event_db",e);if(!t)return 0;if(t.aluId&&!s.default.check(t.aluId))return 0;var o=t.ratio;return t.ratioFromCopKey&&t.ratioFromCopKey.length>0&&(o=c.default.getCopNumberValueByKey(t.ratioFromCopKey)),o<=0?0:t.remainCountItemId>0?l.default.getItemAmount(t.remainCountItemId):1},t.getAdEventRemainCd=function(e){var t=a.default.get("ad_event_db",e);if(!t)return 0;if(this.isIgnoreAd()){if(t.cdIgnoreAd>0){var o=this.getLastFinishedTime(e)+t.cdIgnoreAd;return Math.max(0,o-r.default.time())}return 0}if(t.cd>0){o=this.getLastFinishedTime(e)+t.cd;return Math.max(0,o-r.default.time())}return 0},t.getLastFinishedTime=function(e){var t=a.default.get("ad_event_db",e);if(!t)return 0;var o=t.id;return t.cdGroup&&(o=t.cdGroup),this.lastFinishedTimes[o]||1},t.markFinished=function(e){var t=a.default.get("ad_event_db",e);if(t){var o=t.id;t.cdGroup&&(o=t.cdGroup),this.lastFinishedTimes[o]=r.default.time(),this.saveRecord()}},t.closeAdv=function(e){var t=a.default.get_from_ad_event_db(e);t&&c.default.closeAdv(t.type)},t.isAdTypeValid=function(e){var t=a.default.get_from_ad_event_db(e);if(!t)return!0;switch(t.type){case"video":return f.default.AD_VIDEO_VALID_COUNT>0}return!0},t.isIgnoreAd=function(){return l.default.getItemAmount(f.default.ITEM_ID_WIPE_AD)>0},t.lastFinishedTimes={},t.lastTriggerAdEventId=null,t.lastTriggerAdEventParam=null,t.lastRequestNativeDataTimes={},t.cacheNativeDatas={},t.NATIVE_ID=0,t.NATIVE_INTERSITIAL_AD_EVENT_ID="native_intersitial",t.AD_EVENT_SERIAL_NUMBER=0,t.availableNativeTypes=[],t.downloadedImgFrame={},t.successedAdEventSerialNumbers={},t}(n.default);o.default=g,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Timer":"Timer","../../ulframework/utils/Tools":"Tools","../Const":"Const","./mgrAlu":"mgrAlu","./mgrCfg":"mgrCfg","./mgrDirector":"mgrDirector","./mgrPlayer":"mgrPlayer","./mgrRecord":"mgrRecord","./mgrSdk":"mgrSdk","./mgrSound":"mgrSound","./mgrTip":"mgrTip"}],mgrAlu:[function(e,t,o){"use strict";cc._RF.push(t,"c63f19cgZJPEYIwxif9JNGD","mgrAlu"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../ulframework/manager/Manager"),i=e("../../ulframework/utils/Tools"),r=e("./mgrCop"),a=e("./mgrCfg"),s={"==":function(e,t){return e==t},"!=":function(e,t){return e!=t},">":function(e,t){return e>t},">=":function(e,t){return e>=t},"<":function(e,t){return e<t},"<=":function(e,t){return e<=t}},c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.onLoad=function(){e.onLoad.call(this)},t.loadRecord=function(){e.loadRecord.call(this)},t.saveRecord=function(){e.saveRecord.call(this)},t.calcCheckData=function(){var e={payChannel:this.getCheckPayChannel(),platform:this.getCheckPlatform(),stageProgress:0};return i.default.forEachMap(r.default.getCops(),function(t,o){var n=parseFloat(o);e[t]=isNaN(n)?o:n}),e},t.getCheckPayChannel=function(){return"unknown"},t.getCheckPlatform=function(){return"unknown"},t.check=function(e){if(!e)return!0;var t=a.default.get("alu_db",e);if(!t)return!1;for(var o=!0,n=this.calcCheckData(),i=0;i<t.conditions.length;i++){var r=t.conditions[i],c=s[r.operator];if(c){var l=c(n[r.key],r.value);o=r.bLogicOr?o||l:o&&l}else cc.warn("mgrAlu.check unknown operator",r.operator)}return o},t.checkIds=function(e){for(var t=0;t<e.length;t++){var o=e[t];if(!this.check(o))return!1}return!0},t.OPERATOR_HANDLERS=s,t}(n.default);o.default=c,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Tools":"Tools","./mgrCfg":"mgrCfg","./mgrCop":"mgrCop"}],mgrCfg:[function(e,t,o){"use strict";cc._RF.push(t,"4efa6oODZxF+Ji7gcSaoIFq","mgrCfg"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../ulframework/utils/CfgParser"),i=e("../../ulframework/manager/Manager"),r=e("../../ulframework/utils/Tools"),a=e("./mgrAlu"),s=[],c=function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return __extends(o,t),o.onLoad=function(){t.onLoad.call(this),cc.log("mgrCfg.onLoad")},o.getLoadUrls=function(){for(var e=[],t=0;t<s.length;t++){var o=s[t][0];e.push("cfg/"+o)}return e},o.processDb=function(){for(var e=0;e<s.length;e++){var t=s[e],o=t[0],i=t[1],r="cfg/"+o,a=cc.loader.getRes(r);if(a){var c=n.default.parseCfgByJsonObj(o,a.json,i);c?this.allDbs[o]=c:cc.warn("\u8b66\u544a] \u914d\u7f6e\u8868\u52a0\u8f7d\u5931\u8d25\uff01",o)}else cc.error("mgrCfg processDb error, data is null, url:"+r)}this._combineItemTemplatedb(),this._processTextDb(),this._processAchievementDb(),this._processAluDb(),this._processStageDb()},o.getDb=function(e){var t=this.allDbs[e||""];return t||cc.warn("[\u8b66\u544a] mgrCfg.getDb db not found! dbName=["+e+"]"),t},o.getDbAndSortByField=function(e,t){var o=this.getDb(e);if(!o)return[];var n=[];return r.default.forEachMap(o,function(e,t){n.push(t)}),t="string"==typeof t?[t]:t,r.default.sortArrayByField(n,t)},o.get=function(e,t,o,n,i){void 0===o&&(o=null),void 0===n&&(n=null),void 0===i&&(i=!1);var r=this.getDb(e);if(!r)return null;var a=r[t];return null==a?(i||cc.warn("[\u8b66\u544a] mgrCfg.get ["+e+".csv]\u4e2d\u6570\u636e\u672a\u627e\u5230, key1=["+t+"]"),a):null!=o&&null==(a=a[o])?(i||cc.warn("[\u8b66\u544a] mgrCfg.get ["+e+".csv]\u4e2d\u6570\u636e\u672a\u627e\u5230, key1=["+t+"], key2=["+o+"]"),a):null!=n&&null==(a=a[n])?(i||cc.warn("[\u8b66\u544a] mgrCfg.get ["+e+".csv]\u4e2d\u6570\u636e\u672a\u627e\u5230, key1=["+t+"], key2=["+o+"], key3=["+n+"]"),a):a},o.quietGet=function(e,t,o,n){return void 0===o&&(o=null),void 0===n&&(n=null),this.get(e,t,o,n,!0)},o.forDb=function(e,t){var o=this.getDb(e);o&&r.default.forEachMap(o,t)},o._processStageDb=function(){this.forDb_from_stage_db(function(t,o){var n=null;if(o.scriptName&&""!=o.scriptName&&(n=e(o.scriptName)),n){var i=new(0,n.default)({stageId:o.id});o.script=i}else cc.warn("\u52a0\u8f7d\u5173\u5361\u811a\u672c\u51fa\u9519: ",o.scriptName)})},o._combineItemTemplatedb=function(){},o._processTextDb=function(){this.allDbs.badword_db=[]},o._processAchievementDb=function(){r.default.forEachMap(this.getDb("achievement_target_db"),function(e,t){for(var o={},n=0;n<t.cmds.length;n++){o[t.cmds[n]]=!0}t.cmdHash=o})},o._processAluDb=function(){for(var e=[],t=[],o=[],n=[],i=1;i<=5;i++)e.push("logic_or_"+i),t.push("key_"+i),o.push("operator_"+i),n.push("value_"+i);a.default.calcCheckData();var r=a.default.OPERATOR_HANDLERS,s={};this.forDb("alu_db",function(i,a){var c=[],l={id:a.id,name:a.name,conditions:c};s[a.id]=l;for(var u=0;u<5;u++){var d=1==a[e[u]],p=a[t[u]],h=a[o[u]],f=a[n[u]];if(p)if(null==r[h])cc.warn(ul.format("\u903b\u8f91\u8fd0\u7b97\u7b26\u914d\u7f6e\u3010alu_db\u3011\u4e2d sysmbol\u672a\u627e\u5230\uff1a%s",h));else{var g=parseFloat(f),m={bLogicOr:d,key:p,operator:h,value:f=isNaN(g)?f:g};c.push(m)}}}),this.allDbs.alu_db=s},o.get_from_alu_db=function(e,t,o){return this.get("alu_db",e,t,o)},o.forDb_from_alu_db=function(e){this.forDb("alu_db",e)},o.get_from_cop_db=function(e,t,o){return this.get("cop_db",e,t,o)},o.forDb_from_cop_db=function(e){this.forDb("cop_db",e)},o.get_from_cop_process_db=function(e,t,o){return this.get("cop_process_db",e,t,o)},o.forDb_from_cop_process_db=function(e){this.forDb("cop_process_db",e)},o.get_from_achievement_db=function(e,t,o){return this.get("achievement_db",e,t,o)},o.forDb_from_achievement_db=function(e){this.forDb("achievement_db",e)},o.get_from_achievement_target_db=function(e,t,o){return this.get("achievement_target_db",e,t,o)},o.forDb_from_achievement_target_db=function(e){this.forDb("achievement_target_db",e)},o.get_from_spine_db=function(e,t,o){return this.get("spine_db",e,t,o)},o.forDb_from_spine_db=function(e){this.forDb("spine_db",e)},o.get_from_anim_node_db=function(e,t,o){return this.get("anim_node_db",e,t,o)},o.forDb_from_anim_node_db=function(e){this.forDb("anim_node_db",e)},o.get_from_particle_db=function(e,t,o){return this.get("particle_db",e,t,o)},o.forDb_from_particle_db=function(e){this.forDb("particle_db",e)},o.get_from_stage_db=function(e,t,o){return this.get("stage_db",e,t,o)},o.forDb_from_stage_db=function(e){this.forDb("stage_db",e)},o.get_from_ad_event_db=function(e,t,o){return this.get("ad_event_db",e,t,o)},o.forDb_from_ad_event_db=function(e){this.forDb("ad_event_db",e)},o.get_from_sign_db=function(e,t,o){return this.get("sign_db",e,t,o)},o.forDb_from_sign_db=function(e){this.forDb("sign_db",e)},o.get_from_item_template_db=function(e,t,o){return this.get("item_template_db",e,t,o)},o.forDb_from_item_template_db=function(e){this.forDb("item_template_db",e)},o.get_from_item_recover_db=function(e,t,o){return this.get("item_recover_db",e,t,o)},o.forDb_from_item_recover_db=function(e){this.forDb("item_recover_db",e)},o.get_from_guide_db=function(e,t,o){return this.get("guide_db",e,t,o)},o.forDb_from_guide_db=function(e){this.forDb("guide_db",e)},o.get_from_sound_db=function(e,t,o){return this.get("sound_db",e,t,o)},o.forDb_from_sound_db=function(e){this.forDb("sound_db",e)},o.get_from_armor_db=function(e,t,o){return this.get("armor_db",e,t,o)},o.forDb_from_armor_db=function(e){this.forDb("armor_db",e)},o.get_from_gun_db=function(e,t,o){return this.get("gun_db",e,t,o)},o.forDb_from_gun_db=function(e){this.forDb("gun_db",e)},o.get_from_gun_detail_db=function(e,t,o){return this.get("gun_detail_db",e,t,o)},o.forDb_from_gun_detail_db=function(e){this.forDb("gun_detail_db",e)},o.get_from_bullet_db=function(e,t,o){return this.get("bullet_db",e,t,o)},o.forDb_from_bullet_db=function(e){this.forDb("bullet_db",e)},o.get_from_enemy_db=function(e,t,o){return this.get("enemy_db",e,t,o)},o.forDb_from_enemy_db=function(e){this.forDb("enemy_db",e)},o.get_from_jump_other_game_db=function(e,t,o){return this.get("jump_other_game_db",e,t,o)},o.forDb_from_jump_other_game_db=function(e){this.forDb("jump_other_game_db",e)},o.get_from_stage_chapter_db=function(e,t,o){return this.get("stage_chapter_db",e,t,o)},o.forDb_from_stage_chapter_db=function(e){this.forDb("stage_chapter_db",e)},o.get_from_shop_template_db=function(e,t,o){return this.get("shop_template_db",e,t,o)},o.forDb_from_shop_template_db=function(e){this.forDb("shop_template_db",e)},o.get_from_cake_part_db=function(e,t,o){return this.get("cake_part_db",e,t,o)},o.forDb_from_cake_part_db=function(e){this.forDb("cake_part_db",e)},o.get_from_cake_materail_db=function(e,t,o){return this.get("cake_materail_db",e,t,o)},o.forDb_from_cake_materail_db=function(e){this.forDb("cake_materail_db",e)},o.get_from_cake_type_db=function(e,t,o){return this.get("cake_type_db",e,t,o)},o.forDb_from_cake_type_db=function(e){this.forDb("cake_type_db",e)},o.get_from_customer_db=function(e,t,o){return this.get("customer_db",e,t,o)},o.forDb_from_customer_db=function(e){this.forDb("customer_db",e)},o.allDbs={},o.dbRules={},o}(i.default);o.default=c,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/CfgParser":"CfgParser","../../ulframework/utils/Tools":"Tools","./mgrAlu":"mgrAlu"}],mgrCop:[function(e,t,o){"use strict";cc._RF.push(t,"b7f11LUJONC1ZkDAiQLLAgk","mgrCop"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../ulframework/manager/Manager"),i=e("./mgrCfg"),r=e("../../ulframework/utils/Tools"),a=cc._decorator.ccclass,s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.onLoad=function(){e.onLoad.call(this),this.loadLocalCop(),cc.log("mgrCop.onLoad")},t.loadRecord=function(){e.loadRecord.call(this)},t.saveRecord=function(){e.saveRecord.call(this)},t.loadLocalCop=function(){var e={};i.default.forDb("cop_db",function(t,o){e[t]=o.defaultValue}),this.processCop(e),this.localCop=e,cc.log("localCop:",e)},t.processCop=function(e){cc.log("mgrCop.processCop"),i.default.forDb("cop_process_db",function(t,o){var n=e[t];if(null!=n){var i=n.split(o.splitChar)||[];cc.log("  process",t,i);for(var r=0;r<o.outputFieldNames.length;r++){var a=o.outputFieldNames[r],s=i[r];null==s?cc.warn(ul.format("mgrCop.processCop fieldValue not found! index = %d, fieldName = %s",r,a)):(cc.log("  set",a,s),e[a]=s)}}})},t.get=function(e){var t=this.remoteCop[e];return null!=t?t:this.localCop[e]},t.getNumberValue=function(e){var t=this.get(e);if(null==t)return 0;var o=parseFloat(t);return isNaN(o)?0:o},t.getBooleanValue=function(e){var t=this.get(e);return null!=t&&("1"==(t=t.toLowerCase())||"true"==t)},t.getCops=function(){var e={};return r.default.forEachMap(this.localCop,function(t,o){e[t]=o}),r.default.forEachMap(this.remoteCop,function(t,o){e[t]=o}),e},t.setRemoteValue=function(e,t){null!=e?(this.remoteCop[e]=t,this.processCop(this.remoteCop)):cc.warn("mgrCop.setRemoteValue key not found!")},t.onReceiveSdkCop=function(e){cc.log("mgrCop.onReceiveSdkCop"),this.remoteCop=JSON.parse(e||"")||{},this.processCop(this.remoteCop)},t.localCop={},t.remoteCop={},t.sdkCop={},t=__decorate([a],t)}(n.default);o.default=s,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Tools":"Tools","./mgrCfg":"mgrCfg"}],mgrDirector:[function(e,t,o){"use strict";cc._RF.push(t,"0aa037Qgl5NHKS0i0g0xTPb","mgrDirector"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../ulframework/manager/Manager"),i=e("../../ulframework/view/DialogBase"),r=e("../Const"),a=e("../../ulframework/utils/Tools"),s=e("../view/node/vWarpSceneNode"),c=cc._decorator.ccclass,l=function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return __extends(o,t),o.onLoad=function(){t.onLoad.call(this),cc.view.setResizeCallback(this.onViewResize.bind(this)),cc.log("mgrDirector.onLoad")},o.loadNode=function(e,t){var o="view/"+e;this.loadRes(o,cc.Prefab,function(e,o){if(e)return cc.warn("\u8b66\u544a] mgrDirector.loadNode load prefab:",e),void t(null);var n=cc.instantiate(o);t(n)})},o.createView=function(t,o){var n=e(t);if(n){var i=n.default;(o=o||{}).__viewName=t;var r=new i(o);return r.name=t,r}cc.warn("mgrDirector.createView module not found!",t)},o.enterScene=function(e,t){var o=this.getSceneRoot();t&&t.resolutionRange&&(o._resolution_range=t.resolutionRange),this.refreshSceneSize();for(var n=0;n<o.children.length;n++){o.children[n].destroy()}var r=this.getUIRoot();for(n=0;n<r.children.length;n++){r.children[n].destroy()}i.default.clearViews(),this.createView(e,t).parent=o},o.warpSceneWithEffect=function(e,t,o){var n=this;this.getMask().active=!0;var i=this.getWarpSceneNode();i.context={fOnFadeInCompleted:function(){n.enterScene(e,t),i.playEffectOut()},fOnFadeOutCompleted:function(){n.getMask().active=!1,o instanceof Function&&o()}},i.playEffectIn()},o.refreshSceneSize=function(){var e=this.getSceneRoot()._resolution_range||r.default.RESOLUTION_RANGE,t=this.getCanvas(),o=cc.view.getFrameSize(),n=o.width/o.height,i=e.maxWidth,a=e.minWidth,s=e.maxHeight,c=e.minHeight,l=a,u=c,d=t.getComponent(cc.Canvas);n<=a/c?n<a/s?(l=a,u=s,t.setContentSize(l,u),d.designResolution=cc.size(l,u),d.fitHeight=!0,d.fitWidth=!0):(d.designResolution=cc.size(l,u),d.fitHeight=!1,d.fitWidth=!0):n>i/c?(l=i,u=c,t.setContentSize(l,u),d.designResolution=cc.size(l,u),d.fitHeight=!0,d.fitWidth=!0):(d.fitHeight=!0,d.fitWidth=!1,d.designResolution=cc.size(l,u))},o.onViewResize=function(){this.refreshSceneSize(),this.sendMsg("MSG_VIEW_RESIZE")},o.openDialog=function(e,t,o){if(cc.log("openDialog begin ",i.default.CUR_VIEWS),!i.default.CUR_VIEWS[e]){var n=this.createView(e,t);return n instanceof i.default?(n.openDialog(o),n):(cc.warn("mgrDirecotr.openDialog view not a dialog!",e),cc.isValid(n)&&n.destroy(),null)}cc.warn("dialog "+e+" have already create")},Object.defineProperty(o,"size",{get:function(){return cc.director.getScene().getChildByName("Canvas").getContentSize()},enumerable:!0,configurable:!0}),Object.defineProperty(o,"width",{get:function(){return this.size.width},enumerable:!0,configurable:!0}),Object.defineProperty(o,"height",{get:function(){return this.size.height},enumerable:!0,configurable:!0}),Object.defineProperty(o,"center",{get:function(){var e=this.size;return cc.v2(e.width/2,e.height/2)},enumerable:!0,configurable:!0}),o.getCanvas=function(){return cc.director.getScene().getChildByName("Canvas")},o.getRoot=function(){return this.getCanvas().getChildByName("root")},o.getSceneRoot=function(){return this.getRoot().getChildByName("sceneRoot")},o.getUIRoot=function(){return this.getRoot().getChildByName("UIRoot")},o.getAudioRoot=function(){return this.getRoot().getChildByName("AudioRoot")},o.getSharingMusicAudioResource=function(){return this.getAudioRoot().getChildByName("music").getComponent(cc.AudioSource)},o.getSharingEffectAudioResource=function(){return this.getAudioRoot().getChildByName("effect").getComponent(cc.AudioSource)},o.getWarpSceneNode=function(){var e=this.getRoot(),t=e.getChildByName("__warpSceneNode");return t||((t=new s.default).parent=e,t.name="__warpSceneNode",t.zIndex=r.default.GLOBAL_ORDER_WARP_SCENE_NODE),t},o.getMask=function(){var e=this.getRoot(),t=e.getChildByName("__mask");return t||((t=new cc.Node).parent=e,t.zIndex=r.default.GLOBAL_ORDER_MASK,t.name="__mask",t.setContentSize(this.size),a.default.registerTouchHandler(t,function(){cc.log("-- touch mask --")}),t.active=!1),t},o.isDeviceOverHeight=function(){var e=cc.view.getFrameSize();return e.width/e.height<.5},o.createSpriteNode=function(e){var t=new cc.Node;return t.addComponent(cc.Sprite).loadSpriteFrame(e),t},o.tryGetRes=function(e,t){return cc.loader.getRes(e,t)},o.loadRes=function(e,t,o){var n=cc.loader.getRes(e,t);if(null==n){var i=t;cc.loader.loadRes(e,i,o)}else o(null,n)},o.loadResourceNode=function(e,t){var o,n;e instanceof Array?(o=e[0],n=e[1]):(o=e,n=t);var i=new cc.Node;if(null==o||!n)return cc.warn("mgrDirector.loadResourceNode faild! resType=[%s], resId=[%s].",o,n),i;if(o==r.ResourceType.sprite){var a=this.createSpriteNode(n);a.parent=i,i.nodeSprite=a}return i.__resType=o,i},o.destoryResourceNode=function(){},o=__decorate([c],o)}(n.default);o.default=l,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Tools":"Tools","../../ulframework/view/DialogBase":"DialogBase","../Const":"Const","../view/node/vWarpSceneNode":"vWarpSceneNode"}],mgrGuide:[function(e,t,o){"use strict";cc._RF.push(t,"34ba4z71MpL9rGp2+Hmp1Rj","mgrGuide"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../ulframework/manager/Manager"),i=e("./mgrRecord"),r=e("../../ulframework/utils/Tools"),a=e("./mgrCfg"),s=e("../view/node/vGuideView"),c=e("./mgrDirector"),l=e("./mgrTip"),u=e("../Const"),d=e("./mgrSound"),p=cc._decorator,h=p.ccclass,f=(p.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.onLoad=function(){e.onLoad.call(this),this.loadRecord(),this.registerListeners({MSG_GUIDE_POINT:this.onMsgGuidePoint.bind(this),MSG_PLAY_SOUND603:this.onMsgPlaySound603.bind(this),MSG_PLAY_SOUND604:this.onMsgPlaySound604.bind(this),MSG_PLAY_SOUND605:this.onMsgPlaySound605.bind(this)})},t.loadRecord=function(){e.loadRecord.call(this);for(var t=(i.default.getData("guide")||{}).completedGuideIds||[],o={},n=0;n<t.length;n++)o[t[n]]=!0;this.completedGuideIds=o,this.refreshAvailableGuideIds()},t.saveRecord=function(){e.saveRecord.call(this);var t=[];r.default.forEachMap(this.completedGuideIds,function(e,o){1==o&&t.push(parseInt(e))});var o={completedGuideIds:t};i.default.setData("guide",o)},t.refreshAvailableGuideIds=function(){var e=this,t=[];a.default.forDb("guide_db",function(o,n){var i=parseInt(o);e.completedGuideIds[i]||t.push(i)}),t.sort(),this.availableGuideIds=t,cc.log("refreshAvailableGuideIds",t)},t.registerGuideNode=function(e,t){if(!this.registeredNodes[e]||this.registeredNodes[e]!=t)if(cc.isValid(t)){if(this.registeredNodes[e]&&this.unregisterGuideNode(e),this.registeredNodes[e]=t,this.sendMsg("MSG_GUIDE_POINT",{id:ul.format("%s.register",e)}),null!=this.reactiveGuideId&&null!=this.reactiveGuideStep&&0==this.bStart){var o=a.default.get("guide_db",this.reactiveGuideId,this.reactiveGuideStep);if(this.getGuideNodes(o.nodeNames).length<=0&&o.nodeNames.length>0)return;this.startGuide(this.reactiveGuideId,this.reactiveGuideStep),this.reactiveGuideId=null,this.reactiveGuideStep=null}}else cc.warn(ul.format("mgrGuide.registerGuideNode node is invalid! name = %s.",e))},t.unregisterGuideNode=function(e){var t=this.registeredNodes[e];if(t){var o=t.__guide_trigger_node;cc.isValid(o)&&(o.removeComponent(cc.Component),o.destroy(),t.__guide_trigger_node=null),this.onGuideNodeUnregister(e),this.sendMsg("MSG_GUIDE_POINT",{id:ul.format("%s.unregister",e)}),this.registeredNodes[e]=null}},t.getGuideNode=function(e){var t=this.registeredNodes[e];return cc.isValid(t)?t:null},t.getGuideNodes=function(e){var t=[];if(!e)return t;for(var o=0;o<e.length;o++){var n=e[o],i=this.getGuideNode(n);i&&t.push(i)}return t},t.isGuiding=function(){return cc.isValid(this.guideView)||null!=this.activeGuideId},t.cancelGuide=function(){cc.log(" \u53d6\u6d88\u5f15\u5bfc",this.activeGuideId,this.activeGuideStep);var e=this.activeGuideId,t=this.activeGuideStep;this.activeGuideId=null,this.activeGuideStep=null,this.bStart=!1,cc.isValid(this.guideView)&&(this.guideView.hideAndRemove(),this.guideView=null);var o=a.default.quietGet("guide_db",e,t);if(o&&o.endMsg.length>=1){var n=o.endMsg,i=n[0],r=n[1];cc.log("-----sendmg",i,r),this.sendMsg(i,r)}},t.startGuide=function(e,t){cc.log("\u5f00\u59cb\u5f15\u5bfc",e,t),this.activeGuideId=e,this.activeGuideStep=t,this.bStart=!0;var o=a.default.get("guide_db",e,t);if(o){var n=this.getGuideNodes(o.nodeNames),i=null,r=u.default.GLOBAL_ORDER_DIALOG;if(!(i=this._searchParentFromCanvas(n[0])))i=cc.director.getScene().getChildByName("Canvas");i.convertToNodeSpace(cc.v2(c.default.width/2,c.default.height/2));0;var l=new s.default({guideId:e,step:t});if(l.parent=i,l.zIndex=r,l.show(),this.guideView=l,o.startMsg.length>=1){var d=o.startMsg,p=d[0],h=d[1];this.sendMsg(p,h)}}},t._searchParentFromCanvas=function(e){if(!cc.isValid(e))return null;for(var t=cc.director.getScene().getChildByName("Canvas"),o=e.parent;o;){if(o==t)return e;o=(e=o).parent}return null},t.completeGuide=function(e,t){var o=a.default.get("guide_db",e);if(o)if(t>=o.length-1)o[0].bRepeat||(this.completedGuideIds[e]=!0,this.saveRecord(),this.refreshAvailableGuideIds()),this.cancelGuide();else{this.cancelGuide(),this.activeGuideId=e,this.activeGuideStep=t+1,this.bStart=!1;var n=a.default.get("guide_db",this.activeGuideId,this.activeGuideStep);if(n.startTrigger.length<=0){if(this.getGuideNodes(n.nodeNames).length<=0&&n.nodeNames.length>0){0;var i=this.activeGuideId,r=this.activeGuideStep;return this.cancelGuide(),this.reactiveGuideId=i,void(this.reactiveGuideStep=r)}this.startGuide(this.activeGuideId,this.activeGuideStep)}}else this.cancelGuide()},t.onGuidePoint=function(e,t){this.bDebugCloseGuide||(null!=this.activeGuideId&&null!=this.activeGuideStep&&this._tryStopGuide(e,t),null!=this.activeGuideId&&null!=this.activeGuideStep||this._tryStartGuide(e,t))},t._tryStartGuide=function(e,t){for(var o=0;o<this.availableGuideIds.length;o++)for(var n=this.availableGuideIds[o],i=a.default.get("guide_db",n),r=0;r<i.length;r++){var s=i[r];if(s.bStartStep&&this._checkGuideCanStart(s,e,t))return void this.startGuide(s.id,s.step);s.startTrigger&&""!=s.startTrigger&&e==s.startTrigger[0][0]&&(this.reactiveGuideId=s.id,this.reactiveGuideStep=s.step)}},t._tryStopGuide=function(e,t){var o=a.default.get("guide_db",this.activeGuideId,this.activeGuideStep);if(this.bStart){if(this._checkTrigger(o.cancelTrigger,e,t))return void this.cancelGuide();if(this._checkTrigger(o.completeTrigger,e,t)){if(this.completeGuide(this.activeGuideId,this.activeGuideStep),this.activeGuideId&&this.activeGuideStep&&!this.bStart){0;var n=a.default.get("guide_db",this.activeGuideId,this.activeGuideStep);if(this._checkGuideCanStart(n,e,t))return void this.startGuide(n.id,n.step)}return}}else if(this._checkGuideCanStart(o,e,t))return void this.startGuide(o.id,o.step)},t._checkTrigger=function(e,t,o){for(var n=function(n){var i=e[n],a=i[0],s=i[1];if(a==t){var c=!0;if(s&&Object.keys(s).length>0&&r.default.forEachMap(s,function(e,t){if(o[e]!=t)return c=!1,!0}),c)return{value:!0}}},i=0;i<e.length;i++){var a=n(i);if("object"==typeof a)return a.value}return!1},t._checkGuideCanStart=function(e,t,o){if(!this._checkTrigger(e.startTrigger,t,o))return!1;if(e.nodeNames.length>0&&this.getGuideNodes(e.nodeNames).length<=0)return!1;return!0},t._debugCancelDebug=function(){this.bDebugCloseGuide=!0,this.cancelGuide(),l.default.showMsgTip("\u53d6\u6d88\u65b0\u624b\u5f15\u5bfc")},t.onGuideNodeUnregister=function(e){var t=this.activeGuideId,o=this.activeGuideStep;if(null!=t&&null!=o)for(var n=a.default.get("guide_db",t,o),i=0;i<n.nodeNames.length;i++){if(n.nodeNames[i]==e)return cc.warn("mgrGuide.onGuideNodeUnregister active guild's node unregister! cancel it!",t,o,e),void this.cancelGuide()}},t.onMsgGuidePoint=function(e){var t=e,o=t.id;this.onGuidePoint(o,t)},t.getbDebugCloseGuide=function(){return this.bDebugCloseGuide},t.onMsgPlaySound603=function(){d.default.play(603)},t.onMsgPlaySound604=function(){d.default.play(604)},t.onMsgPlaySound605=function(){d.default.play(605)},t.registeredNodes={},t.bStart=!1,t.bDebugCloseGuide=!1,t.completedGuideIds={},t.availableGuideIds=[],t=__decorate([h],t)}(n.default));o.default=f,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Tools":"Tools","../Const":"Const","../view/node/vGuideView":"vGuideView","./mgrCfg":"mgrCfg","./mgrDirector":"mgrDirector","./mgrRecord":"mgrRecord","./mgrSound":"mgrSound","./mgrTip":"mgrTip"}],mgrNative:[function(e,t,o){"use strict";cc._RF.push(t,"7b44bW+OKBEzaO/DYUMTOrS","mgrNative"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../ulframework/manager/Manager"),i=e("../../ulframework/utils/Timer"),r=e("../../ulframework/utils/Base64"),a=e("../../Lib/ULNativeController");function s(e){console.info("on JAVACALLBACK",e);try{var t=r.default.decode(e);u._onNativeCallbackJava(t)}catch(t){cc.warn("JAVACALLBACK decode base64 faild! direct use base64JsonStr"),u._onNativeCallbackJava(e)}}function c(e){console.info("on OCCALLBACK",e);try{var t=r.default.decode(e);u._onNativeCallbackObjc(t)}catch(t){cc.warn("OCCALLBACK decode base64 faild! direct use base64JsonStr"),u._onNativeCallbackObjc(e)}}var l=cc._decorator.ccclass,u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.onLoad=function(){e.onLoad.call(this),console.info("mgrNative.onLoad"),window.JAVACALLBACK=s,window.OCCALLBACK=c,this.nativeCallbackPending=[],this.bRegisterNativeCallback||(this.bRegisterNativeCallback=!0,this.registerNativeCallback()),i.default.callLoop(1/60,this.onTimer.bind(this),!0)},t.onTimer=function(){var e=this.nativeCallbackPending;for(e.length>0&&console.info("mgrNative.onTimer",e.length);e.length>0;){var t=e.shift();console.info("ready send MSG_NATIVE_CALLBACK"),this.sendMsg("MSG_NATIVE_CALLBACK",{responseData:t})}},t.registerNativeCallback=function(){this._registerNativeCallbackJs()},t.onNativeCallback=function(e){console.info("onNativeCallback",e),ul.dump(e,"data"),e&&this.nativeCallbackPending.push(e)},t._registerNativeCallbackJs=function(){try{a.default.initSdk();a.default&&"function"==typeof a.default.setGameCallback&&a.default.setGameCallback(this._onNativeCallbackJs.bind(this))}catch(e){cc.error("\u6ce8\u518c\u5931\u8d25",e)}},t._onNativeCallbackJs=function(e){console.log("---callback from ulsdk=",e);var t=null;try{t=JSON.parse(e)}catch(e){console.log("\u56de\u8c03\u540eJSON\u89e3\u6790\u5931\u8d25",e)}console.log("--\u89e3\u6790\u540e\u7684\u5bf9\u8c61=",t),this.onNativeCallback(t)},t._registerNativeCallbackJava=function(){jsb.reflection.callStaticMethod("org/cocos2dx/javascript/ULNativeController","setCallFuncName","(Ljava/lang/String;)Ljava/lang/String;","JAVACALLBACK")},t._registerNativeCallbackObjc=function(){},t._onNativeCallbackJava=function(e){var t={};try{t=JSON.parse(e||"")}catch(o){cc.warn("mgrNative._onNativeCallbackJava jsonStr error!"),t.text=e}this.onNativeCallback(t)},t._onNativeCallbackObjc=function(e){var t={};try{t=JSON.parse(e||"")}catch(o){cc.warn("mgrNative._onNativeCallbackObjc jsonStr error!"),t.text=e}this.onNativeCallback(t)},t.callNative=function(e,t){t=t||{},this._callNativeJs(e,t)},t._callNativeJs=function(e,t){try{var o=JSON.stringify(t),n=e;if(a.default&&"function"==typeof a.default[n])return a.default[n](o);console.log("-----\u6ca1\u6709\u627e\u5230ULNativeController")}catch(e){console.log("\u6ce8\u518c\u5931\u8d25",e)}return null},t._callNativeJava=function(e,t){try{var o=JSON.stringify(t),n=jsb.reflection.callStaticMethod("org/cocos2dx/javascript/ULNativeController",e,"(Ljava/lang/String;)Ljava/lang/String;",o);return JSON.parse(n)}catch(e){return cc.warn("mgrNative._onNativeCallbackJava jsonStr error!"),{error:e}}},t._callNativeObjc=function(e,t){try{var o=JSON.stringify(t),n=jsb.reflection.callStaticMethod("ULNativeController",e+":",o);return JSON.parse(n)}catch(e){return cc.warn("mgrNative._callNativeObjc jsonStr error!"),{error:e}}},t.nativeCallbackPending=null,t.bRegisterNativeCallback=!1,t=__decorate([l],t)}(n.default);o.default=u,cc._RF.pop()},{"../../Lib/ULNativeController":"ULNativeController","../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Base64":"Base64","../../ulframework/utils/Timer":"Timer"}],mgrNetwork:[function(e,t,o){"use strict";cc._RF.push(t,"9b767SvZMFC+4wHhZmfMvXC","mgrNetwork"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../ulframework/manager/Manager"),i=e("../../ulframework/network/NetworkManager"),r=e("../../ulframework/network/NetworkAdapterHttpUlServer"),a=e("../../ulframework/network/NetworkAdapterHttp"),s=e("../../ulframework/utils/Timer"),c=e("../Const"),l=e("../../ulframework/utils/Tools"),u=cc._decorator.ccclass,d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.onLoad=function(){e.onLoad.call(this);var t=new r.NetworkAdapterHttpUlServer;t.setHost(c.default.SERVER_HOST),t.setUrlFormat(c.default.SERVER_URL_FORMAT),t.setUlServerArg("ultralisk","pc",c.default.SERVER_APP_ID.toString(),"ultralisk"),t.setTimeout(5),this.networkManager=new i.NetworkManager(t),s.default.callLoop(1/60,this.onTimerSpan.bind(this),!0)},t.loadRecord=function(){e.loadRecord.call(this)},t.saveRecord=function(){e.saveRecord.call(this)},t.onTimerSpan=function(e){var t=e.span;this.networkManager.update(t)},t.send=function(e,t,o){null==t&&(t={});var n={};n.cmd=e,null!=t&&l.default.forEachMap(t,function(e,t){n[e]=t}),this.networkManager.addTask(n,this.onResponse.bind(this),this.onFaild.bind(this),this.onRequest.bind(this),o)},t.onRequest=function(e){e.isBackgroundEnabled()||this.showWaiting()},t.onResponse=function(e){this.networkManager.getTasks().length<=1&&this.hideWaiting(),this.sendMsg("MSG_NETWORK_RESPONSE",{requestData:e.getRequestData(),responseData:e.getResponseData()})},t.onFaild=function(e){e.isBackgroundEnabled()?this.stopAllTasks():this.showFaild(),this.sendMsg("MSG_NETWORK_FAILD",{requestData:e.getRequestData(),faildMsg:e.getFaildMsg()})},t.stopAllTasks=function(){for(var e=[],t=this.networkManager.getTasks(),o=0;o<t.length;o++){var n=t[o];e.push({requestData:n.getRequestData()})}this.networkManager.stopAllTasks(),this.hideWaiting(),this.hideFaild();for(o=0;o<e.length;o++){var i=e[o];this.sendMsg("MSG_NETWORK_STOP_TASK",i)}},t.retryCurrentTask=function(){this.networkManager.retryCurrentTask(),this.networkManager.getTasks().length>0&&this.showWaiting()},t.showWaiting=function(){this.hideWaiting(),this.hideFaild()},t.hideWaiting=function(){this.sendMsg("MSG_NETWORK_CLOSE_WAITING")},t.showFaild=function(){this.hideWaiting(),this.hideFaild()},t.hideFaild=function(){this.sendMsg("MSG_NETWORK_CLOSE_FAILD")},t.tryCheckNetwork=function(e,t){if(cc.sys.isBrowser)e();else{var o,n=ul.format("http://%s/cc_patch/fake_version.txt","h005up.ultralisk.cn"),i=new a.NetworkAdapterHttp;i.setReceiveCallback(function(t){cc.log("ReceiveCallback"),o&&o.stop(),e&&e()}),i.setFaildCallback(function(e){cc.log("FaildCallback"),o&&o.stop(),t&&t()}),i.send({url:n}),(o=new s.default(.1,50,function(e){cc.log("mgrNetwork.tryCheckNetwork onTimerLoop",e.count),e.count>=50&&t&&t()})).start()}},t=__decorate([u],t)}(n.default);o.default=d,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/network/NetworkAdapterHttp":"NetworkAdapterHttp","../../ulframework/network/NetworkAdapterHttpUlServer":"NetworkAdapterHttpUlServer","../../ulframework/network/NetworkManager":"NetworkManager","../../ulframework/utils/Timer":"Timer","../../ulframework/utils/Tools":"Tools","../Const":"Const"}],mgrPlayer:[function(e,t,o){"use strict";cc._RF.push(t,"2d698uw/VFAtrVpD4XImhCp","mgrPlayer"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../ulframework/manager/Manager"),i=e("./mgrRecord"),r=e("./mgrCfg"),a=e("../../ulframework/utils/Timer"),s=e("../../ulframework/utils/Tools"),c=e("../Const"),l=e("./mgrTip"),u=e("./mgrWordFilter"),d=e("./mgrSdk"),p=e("./mgrGuide"),h=cc._decorator.ccclass,f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return __extends(t,e),o=t,t.onLoad=function(){e.onLoad.call(this),cc.log("mgrPlayer.onLoad",this._playerName),this.loadRecord(),a.default.callLoop(1,this.onTimerLoop.bind(this),!0),this.registerListeners({MSG_ITEM_AMOUNT_CHANGED:this.onMsgItemAmountChanged,MSG_SHARE_RESULT:this.onMsgShareResult,MSG_WX_GZH_ENTER_INIT:this.onMsgWxgzhEnterInit,MSG_WX_GZH_ENTER_GAME:this.onMsgWxgzhEnterGame,MSG_SDK_SHARE_VIDEO_RESULT:this.onMsgSdkShareVideoResult})},t.loadRecord=function(){var t=this;e.loadRecord.call(this);var o=i.default.getData("player")||{};this._playerName=o.playerName||"",this._items=o.items||{},this._historyGotItems=o.historyGotItems||{},this._historyUsedItems=o.historyUsedItems||{},this._dailyGotItems=o.dailyGotItems||{},this._dailyUsedItems=o.dailyUsedItems||{},this._historyDailyMaxGotItems=o.historyDailyMaxGotItems||{},this._historyDailyMaxUsedItems=o.historyDailyMaxUsedItems||{},this._recoverCostTimes=o.recoverCostTimes||{},this._lastDailyRefreshTime=o.lastDailyRefreshTime||0,this.lastReceiveVipRewardTime=o.lastReceiveVipRewardTime||0,this.isGetWxgzhReward=o.isGetWxgzhReward||!1,this.deviceCode?this.uid=this.deviceCode:this.uid=o.uid;var n=this._items;r.default.forDb("item_template_db",function(e,t){var o=t.id;null==n[o]&&(n[o]=t.defaultAmount)}),s.default.forEachMap(n,function(e,o){t._historyDisplayedGotItems[e]=o>0}),this.refreshDailyData(),this.refreshRecoverItem(),this._curSkinWall=o.curSkinWall||0,0==this._curSkinWall&&r.default.forDb_from_item_template_db(function(e,o){if(7==o.flag&&t.getItemAmount(parseInt(e))>0)return t._curSkinWall=parseInt(e),!0})},t.saveRecord=function(){e.saveRecord.call(this);var t={playerName:this._playerName,items:this._items,historyGotItems:this._historyGotItems,historyUsedItems:this._historyUsedItems,dailyGotItems:this._dailyGotItems,dailyUsedItems:this._dailyUsedItems,historyDailyMaxGotItems:this._historyDailyMaxGotItems,historyDailyMaxUsedItems:this._historyDailyMaxUsedItems,lastDailyRefreshTime:this._lastDailyRefreshTime,recoverCostTimes:this._recoverCostTimes,uid:this.uid,lastReceiveVipRewardTime:this.lastReceiveVipRewardTime,curSkinWall:this._curSkinWall,isGetWxgzhReward:this.isGetWxgzhReward};i.default.setData("player",t)},t.onTimerLoop=function(e){this.refreshDailyData(),this.refreshRecoverItem()},t.getName=function(){return this._playerName},t.setName=function(e){this._playerName=e,this.saveRecord(),this.sendMsg("MSG_PLAYER_NAME_CHANGED")},t.getItemChangedAge=function(){return this._itemChangedAge},t.getUid=function(){return this.uid||(this.uid=ul.format("%s%03d",ul.formatDate(new Date,"yyyyMMddhhmmssS"),s.default.random(999)),this.saveRecord()),this.uid},t._setDeviceCode=function(e){this.deviceCode=e,this.uid&&this.uid!=e&&(this.uid=e,this.saveRecord())},t.getItemAmount=function(e){return this._items[e]||0},t._setItemAmount=function(e,t){if(null!=e&&null!=t){var o=this.getItemAmount(e);if(o!=t){this._items[e]=Math.max(t,0);var n={itemId:e,amountDelta:t-o};this.sendMsg("MSG_ITEM_AMOUNT_CHANGED",n),this.saveRecord(),this._itemChangedAge++}}else cc.warn("\u8b66\u544a] mgrPlayer.setItemAmount arg is wrong!",e,t)},t.addItemAmount=function(e,t,o){if(null!=e&&null!=t){if(t>0){var n=r.default.get("item_template_db",e);if(!n)return void cc.warn("\u8b66\u544a] mgrPlayer.addItemAmount itemId \u4e0d\u5b58\u5728! itemId: ",e);0!=n.sellItemId&&this.getItemAmount(e)>=1&&(e=n.sellItemId,t=n.sellItemAmount*t)}var i=this.getItemAmount(e);this._setItemAmount(e,i+t),d.default.statisOnAddItemAmount(e,t,o)}else cc.warn("\u8b66\u544a] mgrPlayer.addItemAmount arg is wrong!",e,t)},t.getItemDailyGotAmount=function(e){return this._historyGotItems[e]||0},t.getItemHistoryGotAmount=function(e){return this._dailyGotItems[e]||0},t.getItemHistoryDailyMaxGotAmount=function(e){return this._historyDailyMaxGotItems[e]||0},t.getItemDailyUsedAmount=function(e){return this._dailyUsedItems[e]||0},t.getItemHistoryUsedAmount=function(e){return this._historyUsedItems[e]||0},t.getItemHistoryDailyMaxUsedAmount=function(e){return this._historyDailyMaxUsedItems[e]||0},t.isDisplayedGotItem=function(e){return 1==this._historyDisplayedGotItems[e]},t.markDisplayedGotItem=function(e){this._historyDisplayedGotItems[e]=!0},t.onMsgItemAmountChanged=function(e){var t=e,o=t.itemId,n=t.amountDelta;n>0?(this._historyGotItems[o]=(this._historyGotItems[o]||0)+n,this._dailyGotItems[o]=(this._dailyGotItems[o]||0)+n,this._historyDailyMaxGotItems[o]=Math.max(this._historyDailyMaxGotItems[o]||0,this._dailyGotItems[o])):(this._historyUsedItems[o]=(this._historyUsedItems[o]||0)+-n,this._dailyUsedItems[o]=(this._dailyUsedItems[o]||0)+-n,this._historyDailyMaxUsedItems[o]=Math.max(this._historyDailyMaxUsedItems[o]||0,this._dailyUsedItems[o]))},t.refreshDailyData=function(){s.default.isOneDay(s.default.time(),this._lastDailyRefreshTime)||(this._dailyGotItems={},this._dailyUsedItems={},this._lastDailyRefreshTime=s.default.time(),this.saveRecord())},t.refreshRecoverItem=function(){var e=this,t=s.default.time();r.default.forDb("item_recover_db",function(o,n){var i=n.id,r=e.getItemAmount(i),a=e.getRecoverMaxAmount(i),c=e._getRecoverCostTime(i),l=0;if(1==n.mode){if(a<=r)return void(0!=c&&e._setRecoverCostTime(i,0));if(t<c&&(c=t,e._setRecoverCostTime(i,c)),c<=0){if(a<=r)return;c=t,e._setRecoverCostTime(i,c)}var u=t-c,d=e._getRecoverTime(i);if((l=Math.floor(u/d))<=0)return;c+=d*l}else{if(2!=n.mode)return void cc.warn("\u8b66\u544a] mgrPlayer.refreshRecoverItem \u672a\u77e5mode",n.mode);if(c<=0)return void e._setRecoverCostTime(i,t);if(s.default.isOneDay(t,c))return;l=1,c=t}a<=(r+=e._getRecoverAmount(i)*l)&&(r=Math.min(r,a),c=0),e._setItemAmount(i,r),e._setRecoverCostTime(i,c)})},t.getRecoverMaxAmount=function(e){var t=r.default.get("item_recover_db",e);return 0!=t.maxAmountRefItemId?this.getItemAmount(t.maxAmountRefItemId):t.maxAmount},t._getRecoverTime=function(e){return r.default.get("item_recover_db",e,"recoverTime")},t._getRecoverAmount=function(e){var t=r.default.get_from_item_recover_db(e);return t.recoverCopValue?d.default.getCopNumberValueByKey(t.recoverCopValue):t.recoverAmount},t._getRecoverCostTime=function(e){return this._recoverCostTimes[e]||0},t._setRecoverCostTime=function(e,t){this._recoverCostTimes[e]=t,this.saveRecord()},t.getRecoverRemainTime=function(e){var t=r.default.get("item_recover_db",e);if(1==t.mode){var o=this._getRecoverCostTime(e);if(o<=0)return null;var n=s.default.time()-o,i=this._getRecoverTime(e);return i<n?0:i-n}if(2==t.mode){if(this.getItemAmount(e)>=this.getRecoverMaxAmount(e))return null;var a=new Date;return a.setDate(a.getDate()+1),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.getTime()/1e3-s.default.time()}return cc.warn("\u8b66\u544a] mgrPlayer.refreshRecoverItem \u672a\u77e5mode",t.mode),null},t.openItemBox=function(e){var t=r.default.get("item_box_db",e);return this.openItemBoxByBoxData(t)},t.openItemBoxByBoxData=function(e){var t=[];if(e.triggerRatio<1e4&&s.default.random(1e4)>e.triggerRatio)return t;var o=e.ratioType;if(1==o)for(var n=0;n<e.items.length;n++){if((r=e.items[n]).ratio>=1e4||s.default.random(1e4)<=r.ratio){var i=s.default.random(r.minAmount,r.maxAmount);t.push([r.itemId,i])}}else if(2==o){if(r=s.default.calcWheelTarget(e.items,"ratio")){i=s.default.random(r.minAmount,r.maxAmount);t.push([r.itemId,i])}}else if(3==o)for(n=0;n<e.items.length;n++){var r=e.items[n];i=s.default.random(r.minAmount,r.maxAmount);t.push([r.itemId,i])}return t},t.autoIntitle=function(){o.getName()||o.setName(o.calcRandomName())},t.calcRandomName=function(){for(var e=r.default.getDb("random_name_part1_db"),t=r.default.getDb("random_name_part2_db"),o="",n=0;n<1e3;n++){var i=e[s.default.random(e.length)-1].word+t[s.default.random(t.length)-1].word;if(!u.default.hasSymbol(i)&&u.default.checkStr(i)){o=i;break}}return o},t.calcRandomHeadIcon=function(){var e=s.default.random(1,6);return ul.format("2d/npc/npc_q_0%d",e)},t.setCurSkinWallId=function(e){this._curSkinWall!=e&&(this._curSkinWall=e,this.saveRecord())},t.getCurSkinWallId=function(){return this._curSkinWall},t.getCurSkinWallColor=function(){return this.getSkinWallColorByItemId(this._curSkinWall)},t.getSkinWallColorByItemId=function(e){var t=r.default.get_from_item_template_db(e);if(!t)return cc.color(0,0,0);var o=t.data;return cc.color(o.r,o.g,o.b)},t.canShare=function(){var e=o.getItemAmount(c.default.ITEM_ID_SHARE_COUNT)>0,t=1==d.default.getCopNumberValueByKey("b_share");return e&&!p.default.isGuiding()&&t},t.tryShowShare=function(e,t){if(void 0===t&&(t=null),!(o.getItemAmount(c.default.ITEM_ID_SHARE_COUNT)<=0)){var n="";n=e?e+"\u5206\u4eab\u53ef\u83b7\u5f97 100 \u91d1\u5e01":"\u5206\u4eab\u53ef\u83b7\u5f97 100 \u91d1\u5e01",l.default.alertPrompt2("\u6bcf\u65e5\u5206\u4eab",n,"\u53d6\u6d88","\u5206\u4eab",null,function(){d.default.shareImage("","","",""),t&&t()})}},t.onMsgShareResult=function(e){if(e.bSuccess){if(l.default.showMsgTip("\u5206\u4eab\u6210\u529f"),this.getItemAmount(c.default.ITEM_ID_SHARE_COUNT)<=0)return;o.addItemAmount(c.default.ITEM_ID_GOLD,100,"\u5206\u4eab\u6210\u529f"),l.default.addGotItemTip(c.default.ITEM_ID_GOLD,100,null),o.addItemAmount(c.default.ITEM_ID_SHARE_COUNT,-1,"\u5206\u4eab")}else l.default.showMsgTip("\u5206\u4eab\u5931\u8d25")},t.takeWxgzhReward=function(){this.isNeedAlertWxgzhReward=!1,this.isGetWxgzhReward=!0;return o.addItemAmount(c.default.ITEM_ID_GOLD,300,"\u5fae\u4fe1\u516c\u4f17\u53f7\u5956\u52b1"),this.saveRecord(),300},t.onMsgWxgzhEnterInit=function(e){this.isGetWxgzhReward||(this.isNeedAlertWxgzhReward=!0)},t.onMsgWxgzhEnterGame=function(e){if(!this.isGetWxgzhReward){var t=this.takeWxgzhReward();a.default.callLater(.5,function(){l.default.showMsgTip("\u5fae\u4fe1\u516c\u4f17\u53f7\u5956\u52b1 \u91d1\u5e01x"+t)})}},t.onMsgSdkShareVideoResult=function(e){e.isSuccess?(l.default.showMsgTip("\u5206\u4eab\u6210\u529f"),o.getItemAmount(c.default.ITEM_ID_VIDEO_SHARE_COUNT)>0&&(o.addItemAmount(c.default.ITEM_ID_VIDEO_SHARE_COUNT,-1,"\u5206\u4eab\u6210\u529f"),o.addItemAmount(c.default.ITEM_ID_GOLD,150,"\u5206\u4eab\u6210\u529f"),l.default.addGotItemTip(c.default.ITEM_ID_GOLD,150,null))):l.default.showMsgTip("\u5206\u4eab\u5931\u8d25")},t._items={},t._playerName="",t._itemChangedAge=0,t._historyDisplayedGotItems={},t._historyGotItems={},t._historyUsedItems={},t._dailyGotItems={},t._dailyUsedItems={},t._historyDailyMaxGotItems={},t._historyDailyMaxUsedItems={},t._lastDailyRefreshTime=null,t._recoverCostTimes={},t.lastReceiveVipRewardTime=null,t.uid="",t.deviceCode="",t._curSkinWall=0,t.isGetWxgzhReward=!1,t.isNeedAlertWxgzhReward=!1,t=o=__decorate([h],t)}(n.default);o.default=f,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Timer":"Timer","../../ulframework/utils/Tools":"Tools","../Const":"Const","./mgrCfg":"mgrCfg","./mgrGuide":"mgrGuide","./mgrRecord":"mgrRecord","./mgrSdk":"mgrSdk","./mgrTip":"mgrTip","./mgrWordFilter":"mgrWordFilter"}],mgrPool:[function(e,t,o){"use strict";cc._RF.push(t,"97f69CulKBN3pqAzZZQdVGA","mgrPool"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../ulframework/manager/Manager"),i=e("../../ulframework/utils/PoolManager"),r=e("./mgrCfg"),a=e("../../ulframework/view/Spine"),s=e("../../ulframework/view/Particle"),c=e("./mgrDirector"),l=e("../../ulframework/view/AnimNode"),u=cc._decorator,d=u.ccclass,p=(u.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.onLoad=function(){e.onLoad.call(this),this.poolManager=new i.default,this._regsiterPoolConfig()},t.loadRecord=function(){e.loadRecord.call(this)},t.saveRecord=function(){e.saveRecord.call(this)},t._regsiterPoolConfig=function(){this.poolManager.register("spine",function(e){return r.default.get("spine_db",e)?new a.default(e):null},function(e){e instanceof a.default&&e.reset()},function(e){e instanceof a.default&&(e.stopAllActions(),e.unregisterEventCallback())},function(e){var t=e.getComponent(sp.Skeleton).skeletonData,o=cc.loader.getDependsRecursively(t);cc.loader.release(o),cc.loader.release(t)},1e3),this.poolManager.register("animNode",function(e){return r.default.get("anim_node_db",e)?new l.default(e):null},function(e){e instanceof l.default&&e.reset()},function(e){e instanceof l.default&&(e.stopAllActions(),e.unregisterEventCallback())},function(e){},1e3),this.poolManager.register("particle",function(e){return r.default.get("particle_db",e)?new s.default(e):null},function(e){e instanceof s.default&&e.reset()},function(e){},function(e){},1e3),this.poolManager.register("view",function(e){return c.default.createView(e)},function(e){},function(e){},function(e){},1e3),this.poolManager.register("sprite",function(e){return c.default.createSpriteNode(e)},function(e){},function(e){},function(e){var t=e.getComponent(cc.Sprite).spriteFrame,o=cc.loader.getDependsRecursively(t);cc.loader.release(o),cc.loader.release(t)},1e3)},t.get=function(e,t){return this.poolManager.get(e,t)},t.put=function(e){this.poolManager.put(e)},t.clean=function(e,t){cc.log(" public static clean(poolId?: string, poolKey?: string) "),this.poolManager&&this.poolManager.clean(e,t)},t=__decorate([d],t)}(n.default));o.default=p,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/PoolManager":"PoolManager","../../ulframework/view/AnimNode":"AnimNode","../../ulframework/view/Particle":"Particle","../../ulframework/view/Spine":"Spine","./mgrCfg":"mgrCfg","./mgrDirector":"mgrDirector"}],mgrRecord:[function(e,t,o){"use strict";cc._RF.push(t,"b01ccp08MRNpa9et5mKMFwU","mgrRecord"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../ulframework/manager/Manager"),i=e("../../ulframework/utils/Timer"),r=e("./mgrSdk"),a=cc._decorator.ccclass,s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.onLoad=function(){e.onLoad.call(this),this.__generate_key_map(),this._readRecord(),i.default.callLoop(.1,this.onTimerSpan.bind(this),!0)},t.onTimerSpan=function(e){this.bNeedFlush&&(this.bNeedFlush=!1,this._writeRecord())},t.setUserId=function(e){e?(this.record.userId=e,r.default.getServerRecord()):console.log("---\x3e> userId is invaild!",e)},t.onReceivedServerStorage=function(e){if(e)try{var t=JSON.parse(e);if(!t)return void console.log("---\x3e> cloud storage is damaged!");t.userId=this.record.userId,this.record=t,this.sendMsg("MSG_RECORD_RESET")}catch(e){console.log(e)}else console.log("---\x3e> cloud storage is invaild!")},t._readRecord=function(e){if(e||(e=cc.sys.localStorage.getItem("record_game62")),!e)return cc.warn("\u8b66\u544a] mgrRecord._readRecord \u5b58\u6863\u672a\u627e\u5230\uff01\u91cd\u7f6e\u5b58\u6863\uff01"),void this.resetRecord();var t=JSON.parse(e);return t?1!=t.__version__?(cc.warn("\u8b66\u544a] mgrRecord._readRecord \u5b58\u6863\u7248\u672c\u6539\u53d8\uff01\u91cd\u7f6e\u5b58\u6863\uff01"),void this.resetRecord()):void(this.record=t):(cc.warn("\u8b66\u544a] mgrRecord._readRecord \u5b58\u6863\u6570\u636e\u635f\u574f\uff01\u91cd\u7f6e\u5b58\u6863\uff01"),void this.resetRecord())},t._writeRecord=function(){var e=JSON.stringify(this.record);if(cc.sys.localStorage.setItem("record_game62",e),this.record.userId){var t=ul.clone(this.record);t.player.historyGotItems=null,t.player.historyDailyMaxGotItems=null,t.player.historyDailyMaxUsedItems=null;var o=JSON.stringify(t);r.default.saveServerRecord(o)}},t._requestFlush=function(){this._bDebugBanWrite||(this.bNeedFlush=!0)},t._setDebugBanWrite=function(e){this._bDebugBanWrite=e},t.getData=function(e){return this.record[e]},t.setData=function(e,t){this.record[e]=t,this._requestFlush()},t.resetRecord=function(){this.record={},this.record.__version__=1,this._requestFlush(),this.sendMsg("MSG_RECORD_RESET")},t.__generate_key_map=function(){var e=this;cc.loader.loadRes("cfg/_record.json",function(t,o){if(t)console.log(t);else{var n=o.json;e.__generate_key_map_real(n)}})},t.__generate_key_map_real=function(e){if("object"==ul.getType(e)||"array"==ul.getType(e))for(var t in e)this._record_compress_key_map[t]=this._gobal_key_index.toString(),this._record_uncompress_key_map[this._gobal_key_index.toString()]=t,this._gobal_key_index++,this.__generate_key_map_real(e[t])},t.__compress=function(e){if("object"!=ul.getType(e)&&"array"!=ul.getType(e))return e;var t={};for(var o in e)t[this._record_compress_key_map[o]||o]=this.__compress(e[o]);return t},t.__uncompress=function(e){if("object"!=ul.getType(e)&&"array"!=ul.getType(e))return e;var t={};for(var o in e)t[this._record_uncompress_key_map[o]||o]=this.__uncompress(e[o]);return t},t.record={},t.bNeedFlush=!1,t._bDebugBanWrite=!1,t._record_compress_key_map={},t._record_uncompress_key_map={},t._gobal_key_index=0,t=__decorate([a],t)}(n.default);o.default=s,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Timer":"Timer","./mgrSdk":"mgrSdk"}],mgrSdk:[function(e,t,o){"use strict";cc._RF.push(t,"467e7ztU4NEF4z8bAbZNEzP","mgrSdk"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../ulframework/manager/Manager"),i=e("../Const"),r=e("./mgrNative"),a=e("./mgrTip"),s=e("./mgrCop"),c=e("./mgrRecord"),l=e("./mgrPlayer"),u=cc._decorator.ccclass,d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return __extends(t,e),o=t,t.onLoad=function(){e.onLoad.call(this),this.registerListeners({MSG_NATIVE_CALLBACK:this.onMsgNativeCallback}),this.startProcMsg()},t.onLoadingComplete=function(){this.setVersion(2)},t.getCopNumberValueByKey=function(e){return s.default.getNumberValue(e)},t.getCopByKey=function(e){return s.default.get(e)},t.isOpenVideoRecord=function(){return this.isCopOpenVideoRecord()&&i.default.IS_OPEN_VIDEO_RECORD},t.isCopOpenVideoRecord=function(){return"1"==o.getCopByKey("b_record_video")&&"1"==o.getCopByKey("sdk_is_open_videorecord")},t.getCopAdMode=function(){return o.getCopNumberValueByKey("ad_mode")},t.isOpenPay=function(){return i.default.IS_COP_OPEN_PAY},t.sendMsgToSdk=function(e){r.default.callNative("sendMsgToSdk",e)},t.onMsgNativeCallback=function(e){var t=e.responseData,o=t.cmd;switch(console.log("mgrSdk.onMsgNativeCallback",o),o){case"/c/channelInfoResult":console.info("channelInfoResult");var n=t.data||{};console.info("  copInfo",n.copInfo),s.default.onReceiveSdkCop(n.copInfo),this.sendMsg("MSG_CHANNEL_INFO_RESULT");break;case"/c/getLoginUserMessage":console.log("/c/getLoginUserMessage");var r=t.data||{};i.default.IS_SHOW_URL_AD_ICON=r.isShowUrlAdIcon,i.default.IS_COP_OPEN_PAY=0==r.isClosePay,c.default.setUserId(r.userId);break;case"/c/userLoginResult":console.log("/c/userLoginResult");var u=t.data||{};1==parseInt(u.code)?(console.info("\u767b\u5f55 \u6210\u529f"),a.default.showMsgTip("\u767b\u5f55\u6210\u529f"),this.sendMsg("MSG_SDK_USER_LOGIN_SUCCESS")):(console.info("\u767b\u5f55 \u5931\u8d25 "),a.default.showMsgTip("\u767b\u5f55\u5931\u8d25"));break;case"/c/advValidCount":console.log("/c/advValidCount");var d=t.data;i.default.AD_VIDEO_VALID_COUNT=d.video,this.sendMsg("MSG_ADV_VALID_COUNT",t.data);break;case"/c/advShowResult":console.log("/c/advShowResult"),this.sendMsg("MSG_ADV_SHOW_RESULT",t.data);break;case"/c/closeAdvResult":console.log("/c/closeAdvResult"),this.sendMsg("MSG_ADV_CLOSE_RESULT",t.data);break;case"/c/shareResult":console.log("/c/shareResult");var p=t.data||{},h=p.userData||"",f=!1;1==parseInt(p.code)?(console.info("---/c/shareResult successed"),f=!0):console.info("---/c/shareResult faild"),this.sendMsg("MSG_SHARE_RESULT",{bSuccess:f,userData:h});break;case"/c/saveRankResult":console.log("/c/saveRankResult");var g=t.data||{};1==parseInt(g.code)?console.info("\u4e0a\u4f20\u6392\u884c\u699c\u6210\u529f"):console.info("\u4e0a\u4f20\u6392\u884c\u699c\u5931\u8d25");break;case"/c/getRankResult":console.log("/c/getRankResult");var m=t.data||{};1==parseInt(m.code)?(console.info("\u83b7\u53d6\u6392\u884c\u699c\u6210\u529f"),this.sendMsg("MSG_GET_RANK_RESULT",{msg:m.msg})):console.info("\u83b7\u53d6\u6392\u884c\u699c\u5931\u8d25");break;case"/c/recorderVideoResult":console.log("/c/recorderVideoResult");var _=t.data||{};1==parseInt(_.code)?(console.info("\u5f55\u5c4f\u884c\u4e3a \u6210\u529f action: ",_.action),this.sendMsg("MSG_SDK_RECORD_VIDEO_RESULT",{action:_.action,msg:_.msg})):(console.info("\u5f55\u5c4f\u884c\u4e3a \u5931\u8d25 action: ",_.action),console.info("\u5f55\u5c4f\u884c\u4e3a \u5931\u8d25 msg: ",_.msg));break;case"/c/shareVideoResult":console.log("/c/shareVideoResult");var v=t.data||{};1==parseInt(v.code)?(console.info("\u5f55\u5c4f\u5206\u4eab \u6210\u529f msg: ",v.msg),this.sendMsg("MSG_SDK_SHARE_VIDEO_RESULT",{isSuccess:!0})):(console.info("\u5f55\u5c4f\u5206\u4eab \u5931\u8d25 msg: ",v.msg),this.sendMsg("MSG_SDK_SHARE_VIDEO_RESULT",{isSuccess:!1}));break;case"/c/megadataServer":console.log("/c/megadataServer");break;case"/c/jumpGameResult":console.log("/c/jumpGameResult");break;case"/c/extraBonus":console.log("/c/extraBonus");var y=t.data||{};1==parseInt(y.isInitGame)?(console.info("\u5fae\u4fe1\u516c\u4f17\u53f7\u8fdb\u5165 \u521d\u59cb\u5316"),this.sendMsg("MSG_WX_GZH_ENTER_INIT")):(console.info("\u5fae\u4fe1\u516c\u4f17\u53f7\u8fdb\u5165 \u6e38\u620f\u4e2d"),this.sendMsg("MSG_WX_GZH_ENTER_GAME"));break;case"/c/openRecommendationResult":console.log("/c/openRecommendationResult");break;case"/c/closeRecommendationResult":console.log("/c/closeRecommendationResult");break;case"/c/payResult":console.log("/c/payResult"),a.default.closeWaitingDialog();var S=t.data||{},C=(S.payData||{}).payInfo||{};1==parseInt(S.code)?(console.info("\u652f\u4ed8 \u6210\u529f msg: ",S.msg),this.sendMsg("MSG_SDK_PAY_SUC",{payId:C.payId})):(console.info("\u652f\u4ed8 \u5931\u8d25 msg: ",S.msg),a.default.showMsgTip(S.msg));break;case"/c/getUserDataResult":console.log("/c/getUserDataResult");var T=t.data||{};c.default.onReceivedServerStorage(T.userData);break;case"/c/saveUserDataResult":console.log("/c/saveUserDataResult");break;case"/c/useCdkey":console.log("/c/useCdkey"),a.default.closeWaitingDialog();var b=t.data||{};if(1==parseInt(b.code)){console.info("\u9886\u53d6 \u6210\u529f ");var R=b.data||{};for(var k in R){var I=R[k];l.default.addItemAmount(I.goodsid,I.count,"CDK\u9886\u53d6"),a.default.addGotItemTip(I.goodsid,I.count)}}else console.info("\u9886\u53d6 \u5931\u8d25 msg: ",b.data),a.default.showMsgTip(b.data||"\u5151\u6362\u7801\u9886\u53d6\u5931\u8d25")}},t.staticSdk=function(e){this.sendMsgToSdk({cmd:"/c/megadataServer",data:e})},t.statisOnStageStart=function(e){this.DEBUG&&console.info("mgrSdk:statisOnStageStart(stageId)",e);var t=["level",e.toString()];this.staticSdk(t)},t.statisOnSign=function(e,t){this.DEBUG&&console.info("mgrSdk:statisOnSign(day)",e," times: ",t);var o=["sign",e.toString(),t.toString()];this.staticSdk(o)},t.statisOnAddItemAmount=function(e,t,o){},t.statisOnItemBought=function(e,t,o){},t.statisCommonEvent=function(e){},t.setVersion=function(e){this.sendMsgToSdk({cmd:"/c/setVersion",data:e})},t.shareImage=function(e,t,o,n){this.DEBUG&&console.info("mgrSdk:shareImage",e,t,o,n),this.sendMsgToSdk({cmd:"/c/openShare",data:{title:e,content:t,url:o,imagePath:n,userData:"clientSend"}})},t.closeAdv=function(e,t){this.sendMsgToSdk({cmd:"/c/closeAdv",data:{type:e,userData:t}})},t.uploadRankSdk=function(e){console.log("uploadRankSdk");var t=(new Date).getTime();o.sendMsgToSdk({cmd:"/c/saveRankData",data:{startTime:(t-1e4).toString(),endTime:t.toString(),rankName:"\u6392\u884c\u699c",score:e,order:1}})},t.getRankListSdk=function(e,t){void 0===e&&(e=0),void 0===t&&(t=100),console.log("getRankListSdk"),o.sendMsgToSdk({cmd:"/c/getRankData",data:{dataNum:t,rankName:"\u6392\u884c\u699c",order:1,rankType:e}})},t.openAdH5=function(){console.log("mgrSdk openAdH5"),this.sendMsgToSdk({cmd:"/c/openAdv",data:{type:"url",gravity:null,userData:null}})},t.recordGameVideo=function(e,t){void 0===e&&(e="start"),void 0===t&&(t=120),console.log("mgrsdk recordGameVideo"),o.sendMsgToSdk({cmd:"/c/recorderGameVideo",data:{action:e,durationTime:t}})},t.shareGameVideo=function(){console.log("mgrsdk shareGameVideo"),o.sendMsgToSdk({cmd:"/c/shareGameVideo"})},t.userLogin=function(){console.log("mgrsdk userLogin"),o.sendMsgToSdk({cmd:"/c/userLogin"})},t.jumpOtherGame=function(e){console.log("mgrSdk jumpOtherGame"),this.sendMsgToSdk({cmd:"/c/jumpOtherGame",data:{gameIndex:e,userData:null}})},t.openCrossRecommend=function(e,t,o){void 0===o&&(o="carousel"),console.log("mgrSdk openCrossRecommend"),this.sendMsgToSdk({cmd:"/c/openRecommendation",data:{type:o,style:{left:e,top:t}}})},t.closeCrossRecommend=function(){console.log("mgrSdk closeCrossRecommend"),this.sendMsgToSdk({cmd:"/c/closeRecommendation",data:null})},t.openPay=function(e){console.log("mgrSdk openPay"),a.default.isWaitingDialogOpened()?a.default.showMsgTip("\u6709\u5546\u54c1\u6b63\u5728\u652f\u4ed8\u4e2d\uff0c\u8bf7\u7a0d\u540e\u518d\u8d2d\u4e70"):(a.default.openWaitingDialog("\u63d0\u793a","\u652f\u4ed8\u4e2d..."),this.sendMsgToSdk({cmd:"/c/openPay",data:{payInfo:{payId:e}}}))},t.getServerRecord=function(){console.log("mgrSdk getServerRecord"),this.sendMsgToSdk({cmd:"/c/getUserData",data:null})},t.saveServerRecord=function(e){console.log("mgrSdk saveServerRecord"),this.sendMsgToSdk({cmd:"/c/saveUserData",data:{userData:e}})},t.useCdk=function(e){console.log("mgrSdk useCdk cdk: ",e),a.default.isWaitingDialogOpened()?a.default.showMsgTip("\u9886\u53d6\u4e2d\uff0c\u8bf7\u7a0d\u540e\u518d\u9886\u53d6"):(a.default.openWaitingDialog("\u63d0\u793a","\u9886\u53d6\u4e2d..."),this.sendMsgToSdk({cmd:"/c/useCdkey",data:{userId:l.default.getUid(),cdkStr:e,channelId:0}}))},t.DEBUG=!0,t=o=__decorate([u],t)}(n.default);o.default=d,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../Const":"Const","./mgrCop":"mgrCop","./mgrNative":"mgrNative","./mgrPlayer":"mgrPlayer","./mgrRecord":"mgrRecord","./mgrTip":"mgrTip"}],mgrShop:[function(e,t,o){"use strict";cc._RF.push(t,"5912dgiR6xC2LqgHfLrNM7b","mgrShop"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../ulframework/manager/Manager"),i=e("./mgrCfg"),r=e("./mgrPlayer"),a=e("./mgrTip"),s=e("./mgrDirector"),c=e("./mgrSdk"),l=e("../Const"),u=e("./mgrAd"),d=e("./mgrAlu"),p=e("../../ulframework/utils/Tools"),h=cc._decorator.ccclass,f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.onLoad=function(){e.onLoad.call(this),this.registerListeners({MSG_SDK_PAY_SUC:this.onMsgSdkPaySuc})},t.loadRecord=function(){e.loadRecord.call(this)},t.saveRecord=function(){e.saveRecord.call(this)},t.getAllShopItemListByCategory=function(e){if(!e)return[];for(var t={},o=0;o<e.length;o++){var n=e[o];t[n]=!0}var r=[];return i.default.forDb_from_shop_template_db(function(e,o){t[o.category]&&d.default.check(o.aluId)&&r.push(o)}),r=p.default.sortArrayByField(r,["-order","id"])},t.requestBuy=function(e){var t=i.default.get_from_shop_template_db(e);if(t){var o=t.price,n=t.priceUnit;if(0!=n){if(!i.default.get_from_item_template_db(n))return!1;r.default.getItemAmount(n)<o?(this.tipItemNotEnough(n),this.tryOpenShop(n)):(r.default.addItemAmount(n,-o,"\u8d2d\u4e70\u6d88\u8017"),this.responseBuy(e))}else c.default.openPay(t.payId)}},t.responseBuy=function(e){var t=i.default.get_from_shop_template_db(e);if(t){for(var o=0;o<t.items.length;o++){var n=t.items[o],s=n[0],l=n[1],u=n[2];r.default.addItemAmount(s,l,"\u8d2d\u4e70"),u||a.default.addGotItemTip(s,l,null)}this.sendMsg("MSG_SHOP_BUY_SUCCESSED",{shopId:e}),c.default.statisOnItemBought(e,1,"\u8d2d\u4e70")}},t.getShopIdByPayId=function(e){var t;return i.default.forDb_from_shop_template_db(function(o,n){if(n.payId==e)return t=n.id,!0}),t},t.tipItemNotEnough=function(e){void 0===e&&(e=l.default.ITEM_ID_GOLD);var t=i.default.get_from_item_template_db(e);t&&a.default.showMsgTip(ul.format("[%s]\u4e0d\u8db3",t.name))},t.tryOpenShop=function(e){void 0===e&&(e=l.default.ITEM_ID_GOLD);var t="";switch(e){case l.default.ITEM_ID_GOLD:t="free_gold";break;case l.default.ITEM_ID_ENERGY:t="free_energy"}var o=u.default.preCheckCanTriggerAdEventWithoutCd(t),n=c.default.isOpenPay();(o||n)&&s.default.openDialog("vShopDialog")},t.canSupplyItem=function(e){return void 0===e&&(e=l.default.ITEM_ID_GOLD),!(e!=l.default.ITEM_ID_GOLD&&e!=l.default.ITEM_ID_ENERGY||!c.default.isOpenPay())||(!(e!=l.default.ITEM_ID_GOLD||!u.default.preCheckCanTriggerAdEventWithoutCd("free_gold"))||!(e!=l.default.ITEM_ID_ENERGY||!u.default.preCheckCanTriggerAdEventWithoutCd("free_energy")))},t.onMsgSdkPaySuc=function(e){var t=e,o=this.getShopIdByPayId(t.payId);this.responseBuy(o)},t=__decorate([h],t)}(n.default);o.default=f,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Tools":"Tools","../Const":"Const","./mgrAd":"mgrAd","./mgrAlu":"mgrAlu","./mgrCfg":"mgrCfg","./mgrDirector":"mgrDirector","./mgrPlayer":"mgrPlayer","./mgrSdk":"mgrSdk","./mgrTip":"mgrTip"}],mgrSound:[function(e,t,o){"use strict";cc._RF.push(t,"d62efGiv1FBWZE+W4nbmQMF","mgrSound"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../ulframework/manager/Manager"),i=e("./mgrRecord"),r=e("./mgrCfg"),a=e("./mgrDirector"),s=cc._decorator.ccclass,c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return __extends(t,e),o=t,t.onLoad=function(){e.onLoad.call(this),this.loadRecord(),cc.game.on(cc.game.EVENT_HIDE,function(){cc.log("cc.game.EVENT_HIDE"),o.pauseSound()}),cc.game.on(cc.game.EVENT_SHOW,function(){cc.log("cc.game.EVENT_SHOW"),o.resumeSound()})},t.loadRecord=function(){e.loadRecord.call(this);var t=i.default.getData("sound")||{};this.musicVolume=null!=t.musicVolume?t.musicVolume:1,this.effectVolume=null!=t.effectVolume?t.effectVolume:1,this.setMusicVomue(this.musicVolume,!0),this.setEffectVolume(this.effectVolume,!0)},t.saveRecord=function(){e.saveRecord.call(this);var t={musicVolume:this.musicVolume,effectVolume:this.effectVolume};i.default.setData("sound",t)},t.play=function(e){var t=this,o=this.allAudioClips[e],n=r.default.get("sound_db",e);if(n)if(1==n.type){if(e==this.playingMusicSoundId)return;if(this.playingMusicSoundId=e,o){(i=a.default.getSharingMusicAudioResource()).clip=o,i.volume=this.musicVolume,i.play()}else{if(!(s=this.getUrl(e)))return;a.default.loadRes(s,cc.AudioClip,function(o,n){if(t.allAudioClips[e]=n,e==t.playingMusicSoundId){var i=a.default.getSharingMusicAudioResource();i.clip=n,i.volume=t.musicVolume,i.play()}})}}else if(o){var i;(i=a.default.getSharingEffectAudioResource()).clip=o,i.volume=this.effectVolume,i.play()}else{var s;if(!(s=this.getUrl(e)))return;a.default.loadRes(s,cc.AudioClip,function(o,n){t.allAudioClips[e]=n;var i=a.default.getSharingEffectAudioResource();i.clip=n,i.volume=t.effectVolume,i.play()})}},t.getUrl=function(e){var t=r.default.get_from_sound_db(e);if(!t)return"";var o=t.fileName.split(".");return 2!=o.length?t.fileName:o[0]},t.stopAll=function(){cc.audioEngine.stopAll(),this.playingMusicSoundId=null,a.default.getSharingMusicAudioResource().stop(),a.default.getSharingEffectAudioResource().stop()},t.stopBgm=function(){a.default.getSharingMusicAudioResource().stop()},t.pauseSound=function(){a.default.getSharingMusicAudioResource().pause(),a.default.getSharingEffectAudioResource().pause(),console.info("\u6682\u505c\u58f0\u97f3")},t.resumeSound=function(){console.info("\u6062\u590d\u58f0\u97f3"),a.default.getSharingMusicAudioResource().resume(),a.default.getSharingEffectAudioResource().resume()},t.getMusicVolmue=function(){return this.musicVolume},t.setMusicVomue=function(e,t){this.musicVolume=e,a.default.getSharingMusicAudioResource().volume=this.musicVolume>=0?this.musicVolume:0,t||this.saveRecord()},t.getEffectVolume=function(){return this.effectVolume},t.setEffectVolume=function(e,t){this.effectVolume=e,a.default.getSharingEffectAudioResource().volume=this.effectVolume>=0?this.effectVolume:0,t||this.saveRecord()},t.playingMusicSoundId=null,t.musicVolume=1,t.effectVolume=1,t.allAudioClips={},t=o=__decorate([s],t)}(n.default);o.default=c,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","./mgrCfg":"mgrCfg","./mgrDirector":"mgrDirector","./mgrRecord":"mgrRecord"}],mgrText:[function(e,t,o){"use strict";cc._RF.push(t,"ef6686BEbZOV7JvEBZVSsF+","mgrText"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../ulframework/manager/Manager"),i=e("./mgrCfg"),r=cc._decorator.ccclass,a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.onLoad=function(){e.onLoad.call(this),this.textMapping={},this.processTextDb()},t.loadRecord=function(){e.loadRecord.call(this)},t.saveRecord=function(){e.saveRecord.call(this)},t.processTextDb=function(){var e=this;i.default.forDb("text_db",function(t,o){e.textMapping[t]=o.text})},t.get=function(e){var t=this.textMapping[e];return t||(t=e),t},t.format=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];var n=this.textMapping[e];return n?ul.format.apply(ul,[n].concat(t)):ul.format("%%s%",e)},t=__decorate([r],t)}(n.default);o.default=a,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","./mgrCfg":"mgrCfg"}],mgrTip:[function(e,t,o){"use strict";cc._RF.push(t,"5653cyPaHRLGYVjQSV6Sg4n","mgrTip"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../ulframework/manager/Manager"),i=e("./mgrDirector"),r=e("../../ulframework/utils/Timer"),a=e("../view/dialog/vPromptDialog"),s=e("../view/node/vMsgTip"),c=e("../Const"),l=e("./mgrCfg"),u=e("../../ulframework/utils/Tools"),d=e("./mgrPool"),p=e("./mgrAd"),h=e("./mgrPlayer"),f=e("../view/node/vMark"),g=e("../view/dialog/vDebugPickerDialog"),m=cc._decorator.ccclass,_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return __extends(t,e),o=t,t.onLoad=function(){e.onLoad.call(this),this.msgTipQueue=[],this.iconTipQueue={}},t.loadRecord=function(){e.loadRecord.call(this)},t.saveRecord=function(){e.saveRecord.call(this)},t.showPicker=function(e,t,o){new g.default({title:e,conf:t,callback:o}).openDialog(!0)},t.alertPrompt0=function(e,t){return this._alertPrompt(e,t,[],[])},t.alertPrompt=function(e,t,o,n){return this._alertPrompt(e,t,[o],[n])},t.alertPrompt2=function(e,t,o,n,i,r){return this._alertPrompt(e,t,[o,n],[i,r])},t.alertPrompt3=function(e,t,o,n,i,r,a,s){return this._alertPrompt(e,t,[o,n,i],[r,a,s])},t._alertPrompt=function(e,t,o,n){var i=new a.default({title:e,content:t,btnTexts:o,callbacks:n});return i.openDialog(),i},t.showMsgTip=function(e,t,o,n,a){if(t=t||cc.v2(.5*i.default.width,.75*i.default.height),this.msgTipQueue.push({text:e,startPosition:t,color:o,outlineColor:n,deltaY:a}),!this.msgTipTimer){var s=new r.default(1,-1,this._onMsgTipTimerLoop.bind(this));s.start(!0),this.msgTipTimer=s,this._onMsgTipTimerLoop(s)}},t._onMsgTipTimerLoop=function(e){if(this.msgTipQueue.length<=0)return e.stop(),void(this.msgTipTimer=null);var t=this.msgTipQueue.shift(),o=new s.default;o.setText(t.text),t.color&&o.setColorEx(t.color,t.outlineColor),o.play(t.startPosition,t.deltaY)},t.getTipRootNode=function(){var e=i.default.getUIRoot(),t=e.getChildByName("__tip_root__");return cc.isValid(t)||((t=new cc.Node).parent=e,t.name="__tip_root__",t.zIndex=c.default.GLOBAL_ORDER_TIP),t},t.getTipIconRootNode=function(){var e=i.default.getUIRoot(),t=e.getChildByName("__tip_icon_root__");return cc.isValid(t)||((t=new cc.Node).parent=e,t.name="__tip_icon_root__",t.zIndex=c.default.GLOBAL_ORDER_TIP_ICON),t},t.getTipIceNode=function(){var e=i.default.getUIRoot(),t=e.getChildByName("__tip_ice__");return cc.isValid(t)||((t=new cc.Node).parent=e,t.name="__tip_ice__",t.position=cc.v2(-i.default.width/2,-i.default.height/2),t.zIndex=c.default.GLOBAL_ORDER_TIP),t},t.addGotItemTip=function(e,t,o,n){this.defaultGotItemQueue.push({itemId:e,amount:t,amountSteps:o,customerContext:n}),this._tryShowGotItemDialog()},t.insertGotItemTip=function(e,t,o,n){this.defaultGotItemQueue.unshift({itemId:e,amount:t,amountSteps:o,customerContext:n}),this._tryShowGotItemDialog()},t.addGotItemTipGroup=function(e){var t=this,o=null;u.default.forEachMap(this.gotItemQueues,function(e,n){if(n!=t.defaultGotItemQueue&&n.length<=0)return o=n,!0}),o||(o=[],this.gotItemQueues.push(o));for(var n=0;n<e.length;n++){var i=e[n];o.push(i)}this._tryShowGotItemDialog()},t._tryShowGotItemDialog=function(){for(var e=this,t=function(t){var n=o.gotItemQueues[t];if(!o.gotItemDialogShowingFlags[t]&&n.length>0){o.gotItemDialogShowingFlags[t]=!0;var r=n.shift(),a={};r.customerContext&&u.default.forEachMap(r.customerContext,function(e,t){a[e]=t}),a.itemId=r.itemId,a.amount=r.amount,a.amountSteps=r.amountSteps,a.fOnDialogClose=function(){e.gotItemDialogShowingFlags[t]=!1,r.customerContext&&r.customerContext.fOnDialogClose instanceof Function&&r.customerContext.fOnDialogClose(),e._tryShowGotItemDialog()},i.default.openDialog("vGotItemDialog",a)}},o=this,n=0;n<this.gotItemQueues.length;n++)t(n)},t.isAllGotItemTipDisplayed=function(){var e=!1;if(u.default.forEachMap(this.gotItemDialogShowingFlags,function(t,o){if(o)return e=!0,!0}),e)return!1;for(var t=0;t<this.gotItemQueues.length;t++){if(this.gotItemQueues[t].length>0)return!1}return!0},t.showItemDetailDialog=function(e,t,o){o=o||{},null==t&&(t=1),o.itemId=e,o.amount=t;i.default.openDialog("vItemDetailDialog",o)},t.isWaitingDialogOpened=function(){return null!=this.waitingDialog},t.openWaitingDialog=function(e,t,o){var n=this;if(!this.isWaitingDialogOpened()){var i=new a.default({title:e||"\u63d0\u793a",content:t||"\u8bf7\u7a0d\u5019...",btnTexts:[o||"\u53d6\u6d88"],fOnDialogClose:function(){n.waitingDialog=null}});i.openDialog(),this.waitingDialog=i}},t.closeWaitingDialog=function(){this.waitingDialog&&(this.waitingDialog.closeDialog(),this.waitingDialog=null)},t.playParticleOnce=function(e,t,o,n,i){var r=d.default.get("particle",e);r&&(r.parent=i||this.getTipRootNode(),r.position=r.parent.convertToNodeSpace(cc.v2(t,o)),null!=n&&(r.scale=n),r.setAutoRemoveOnFinish(!0))},t.playSpineOnce=function(e,t,o,n,i){var r=d.default.get("spine",e);r&&(r.parent=i||this.getTipRootNode(),r.position=r.parent.convertToNodeSpace(cc.v2(t,o)),null!=n&&(r.scale=n),r.play("mov_1",!1),r.registerEventCallback(function(e){"cpmplete"==e.name&&(r.removeFromParent(),d.default.put(r),r=null)}))},t.playAnimNodeOnce=function(e,t,o,n,i,r,a){var s=new cc.Node,c=d.default.get("animNode",e);c&&(s.parent=r||this.getTipRootNode(),c.parent=s,s.position=r?cc.v2(t,o):s.parent.convertToNodeSpace(cc.v2(t,o)),n&&(s.scaleX=n),i&&(s.scaleY=i),a&&(s.rotation=a),c.play(),c.registerEventCallback(function(e){"finished"==e.name&&(c.removeFromParent(),d.default.put(c),c=null,s.destroy())}))},t.showIconTips=function(e,t,o,n,a){var s=l.default.get("item_template_db",e,"icon"),c=ul.format("*%d",t);if(o=o||new cc.Vec2(0,0),n=n||new cc.Vec2(60,60),o=cc.v2(o.x-i.default.width/2,o.y-i.default.height/2),n=cc.v2(n.x-i.default.width/2,n.y-i.default.height/2),a){var u=.5;this.iconTipQueue[a]||(this.iconTipQueue[a]=[]),0==this.iconTipQueue[a].length&&(u=0),this.iconTipQueue[a].push({icon:s,startPos:o,endPos:n,text:c,interval:u}),this.iconTipTimer||(this.iconTipTimer=new r.default(.1,-1,this._onShowIconTimerCallback.bind(this)),this.iconTipTimer.start(!0))}else this._playShowIcon({icon:s,startPos:o,endPos:n,text:c})},t.showIconTipsWithAdRewardCheck=function(e,t,o,n,i){var r="got_item_addition_reward";if(p.default.preCheckCanTriggerAdEvent(r)){cc.log("vGotItemDialog.initAdRewad trigger a ad reward.",r);var a=l.default.get("ad_event_db",r),s=h.default.openItemBox(a.param.rewardBoxId);this.addGotItemTip(e,t,null,{adEventId:r,adRewards:s})}else this.showIconTips(e,t,o,n,i)},t._onShowIconTimerCallback=function(){var e=this,t=!0;if(u.default.forEachMap(this.iconTipQueue,function(e,o){o&&o.length>0&&(t=!1)}),t)return this.iconTipTimer.stop(),void(this.iconTipTimer=null);u.default.forEachMap(this.iconTipQueue,function(t,o){if(o&&o.length>0){var n=o[0];n.interval-=.1,n.interval<=0&&(n=o.shift(),e._playShowIcon(n))}else e.iconTipQueue[t]=[]})},t._playShowIcon=function(e){},t.showCommonRouter=function(e,t){var n=this,i=l.default.get("item_template_db",e),r=i.buySource||1,a=l.default.get("common_router_db",r),s=this["__checkCommonRouter"+a.router.toString()];if(s instanceof Function){var c=s({itemId:e});if(1!=c){if(0==c){var u=this["__commonRouter"+a.router.toString()],d={};return d.param=a.param||{},d.itemId=e,d.reason=t,u(d)}return o.showMsgTip(ul.format("%s\u4e0d\u8db3",i.name)),void cc.warn("error: this router is checked, and not pass"+e)}}else cc.warn("error: this router is not exist!!!"+e);o.showItemDetailDialog(e,null,{callback:function(){var o=n["__commonRouter"+a.router.toString()],i={};return i.param=a.param||{},i.itemId=e,i.reason=t,o(i)},bCanBuy:1==a.router,bCanGet:1!=a.router,routerDes:a.name})},t.__commonRouter1=function(e){return!0},t.__commonRouter2=function(e){return!0},t.__commonRouter3=function(e){return!0},t.__checkCommonRouter1=function(e){return l.default.get("shop_template_db",e.itemId)?1:l.default.get("shop_router_db",e.itemId)?0:-1},t.__checkCommonRouter2=function(e){return 1},t.__checkCommonRouter3=function(e){return 1},t.__checkCommonRouter4=function(e){return 1},t.__checkCommonRouter5=function(e){return 1},t.setCountBadgeValue=function(e,t,o,n,i){var r=e.__mark;if(t>0){r||(r=new f.default,e.addChild(r,99),e.__mark=r),o=o||0,n=n||0,i=i||1;var a=e.getContentSize();r.setPosition(a.width/2*.8+o,a.height/2*.8+n),r.scale=i,r.setCount(t)}else r&&(e.removeChild(r),e.__mark=null)},t.addChildToCanvas=function(e,t){e.parent=this.getTipRootNode(),e.setPosition(e.parent.convertToNodeSpace(t))},t.playIconTip=function(e,t,o,n){void 0===n&&(n=!1)},t.playBlood=function(e,t){var o=this;i.default.loadRes("2d/anim_node/blood_boom/blood_boom",cc.Prefab,function(n,i){if(!n){var r=cc.instantiate(i);r.parent=o.getTipRootNode(),r.position=r.parent.convertToNodeSpace(cc.v2(e,t))}})},t.defaultGotItemQueue=[],t.gotItemQueues=[o.defaultGotItemQueue],t.gotItemDialogShowingFlags={},t.waitingDialog=null,t=o=__decorate([m],t)}(n.default);o.default=_,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Timer":"Timer","../../ulframework/utils/Tools":"Tools","../Const":"Const","../view/dialog/vDebugPickerDialog":"vDebugPickerDialog","../view/dialog/vPromptDialog":"vPromptDialog","../view/node/vMark":"vMark","../view/node/vMsgTip":"vMsgTip","./mgrAd":"mgrAd","./mgrCfg":"mgrCfg","./mgrDirector":"mgrDirector","./mgrPlayer":"mgrPlayer","./mgrPool":"mgrPool"}],mgrUnitTest:[function(e,t,o){"use strict";cc._RF.push(t,"d38b3oLvxpNuaKnX1HT6A6J","mgrUnitTest"),cc._RF.pop()},{}],mgrWordFilter:[function(e,t,o){"use strict";cc._RF.push(t,"a1118JdzxdJhYgV0aWBnGCX","mgrWordFilter"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../ulframework/manager/Manager"),i=e("./mgrCfg"),r=cc._decorator.ccclass,a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.onLoad=function(){e.onLoad.call(this),this._loadWords()},t.loadRecord=function(){e.loadRecord.call(this)},t.saveRecord=function(){e.saveRecord.call(this)},t._loadWords=function(){if(!this.badwords){var e=i.default.getDb("badword_db");this._processBadwords(e)}},t._processBadwords=function(e){this.badwords=e},t.checkStr=function(e){if(!e)return!0;for(var t=this.badwords,o=0;o<t.length;o++)if(e.match(t[o]))return!1;return!0},t.filterStr=function(e,t){t=t||this.REP_STR;for(var o=this.badwords,n=0;n<o.length;n++)e=e.replace(o[n],t);return e},t.hasSymbol=function(e){return!!e.match(this.REP_NO_SYMBOL)},t.filterSymbol=function(e){return e?e=e.replace(this.REP_NO_SYMBOL,""):""},t.REP_STR="**",t.REP_NO_SYMBOL=/[\!\@\#\$\%\^\&\*\(\)\`\~\<\>\,\.\/\?\;\:\'\"\[\]\{\}\\\|\-\=\_\+\n\r\t\b ]/g,t=__decorate([r],t)}(n.default);o.default=a,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","./mgrCfg":"mgrCfg"}],sdkDemoModule:[function(e,t,o){"use strict";cc._RF.push(t,"2a787huAmRE6Kdg/RlBzXD7","sdkDemoModule");var n=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),i=a(e("../../ulsdkmanager/ulsdkdemomanager.js")),r=a(e("../../net/sdkdemoULCop.js"));function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}var s="",c=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e)}return n(e,[{key:"initModule",value:function(e){var t=i.getConfigByKey("gameId"),o=i.getConfigByKey("copUrl"),n=i.getConfigByKey("gameVersion"),a=this.getChannelConfigByKey("cop_channelId");s=t+"_"+e+"_000",r.initCopInfo(o,a,t,n)}},{key:"setVersion",value:function(){var e=i.getConfigByKey("setVersionDelay");if(r.IsGetCopData)console.log("ULSDK_TEST.........setVersion...\u6570\u636e\u521d\u59cb\u5316\u5b8c\u6210==========console===========",r.IsGetCopData),this.doSetVerSion();else{console.log("ULSDK_TEST........setVersion...\u6570\u636e\u672a\u521d\u59cb\u5316\u5b8c\u6210--------console-----\u5ef6\u65f6------------",e,r.IsGetCopData);this.doSetVerSion()}}},{key:"doSetVerSion",value:function(){console.log("ULSDK_TEST.........doSetVerSion...doSetVerSion--------console-----\u5ef6\u65f6-----",r.IsGetCopData);var e={},t={userId:s,isClosePay:0,isUseSdkRank:!0};e.cmd="/c/getLoginUserMessage",e.data=t;var o=JSON.stringify(e);i.manageSdkResponse(o);var n={cmd:"/c/channelInfoResult"},a={},c=i.getConfigByKey("commonCopConfig"),l=this.getChannelConfigByKey("copDefaultConfig");a.copInfo=r.getCopData(c,l),n.data=a;var u=JSON.stringify(n);i.manageSdkResponse(u)}},{key:"getUserId",value:function(){return s}},{key:"openShare",value:function(e){e.content,e.imagePath;var t=new Object;t.cmd="/c/shareResult";var o=new Object;confirm("\u5206\u4eab\u6a21\u62df \u786e\u5b9a(\u6210\u529f) \u53d6\u6d88(\u5931\u8d25)")?(o.code=1,o.msg="\u5206\u4eab\u6210\u529f\uff01",t.data=o,i.manageSdkResponse(JSON.stringify(t)),console.log("ULSDK_TEST.........\u5206\u4eab\u6210\u529f........console.....errCode..")):(o.code=0,o.msg="\u5206\u4eab\u5931\u8d25\uff01",t.data=o,i.manageSdkResponse(JSON.stringify(t)),console.log("ULSDK_TEST.........\u5206\u4eab\u5931\u8d25........console.....errCode.."))}},{key:"openPay",value:function(e){i.getConfigByKey("gameOrientation");var t=e.payInfo.payId,o=i.getConfigByKey("pay_code");try{o[t].price}catch(t){var n={cmd:"/c/payResult"},r={code:"0",msg:"payId \u4e0d\u5b58\u5728"};r.payData=e,n.data=r;var a=JSON.stringify(n);return void i.manageSdkResponse(a)}if(confirm("\u652f\u4ed8\u6a21\u62df \u786e\u5b9a(\u6210\u529f) \u53d6\u6d88(\u5931\u8d25)")){var s={cmd:"/c/payResult"},c={code:"1",msg:"\u652f\u4ed8\u56de\u8c03\u6210\u529f"};c.payData=e,s.data=c;var l=JSON.stringify(s);i.manageSdkResponse(l)}else{var u={cmd:"/c/payResult"},d={code:"0",msg:"\u8d2d\u4e70\u5931\u8d25\uff01"};d.payData=e,u.data=d;var p=JSON.stringify(u);i.manageSdkResponse(p)}}},{key:"openAdv",value:function(e){var t=new Object;t.code=1,t.msg="\u8fbe\u5230\u770b\u5e7f\u544a\u65f6\u957f\u8981\u6c42\uff0c\u53ef\u4ee5\u4e0b\u53d1\u5956\u52b1",t.advData=e;var o=new Object;o.cmd="/c/advShowResult",o.data=t;var n=JSON.stringify(o);i.manageSdkResponse(n),console.log("ULSDK_TEST.....................\u8fbe\u5230\u770b\u5e7f\u544a\u65f6\u957f\u8981\u6c42\uff0c\u53ef\u4ee5\u4e0b\u53d1\u5956\u52b1.....++++++++++++++++++++...")}},{key:"getChannelConfigByKey",value:function(e){return i.getConfigByKey("limi")[e]}},{key:"saveRankData",value:function(e){var t=new Object;t.cmd="/c/saveRankResult";new Array;var o=new Object;if(confirm("\u6392\u884c\u699c\u6570\u636e\u4e0a\u4f20\u6a21\u62df \u786e\u5b9a(\u6210\u529f) \u53d6\u6d88(\u5931\u8d25)")){o.code="0",o.msg="\u4e0a\u4f20\u6392\u884c\u699c\u6570\u636e\u5931\u8d25!",t.data=o;var n=JSON.stringify(t);i.manageSdkResponse(n),console.log("ULSDK_TEST.....................\u4e0a\u4f20\u6392\u884c\u699c\u6570\u636e\u5931\u8d25.....++++++++++++++++++++...")}else{o.code="1",o.msg="\u4e0a\u4f20\u6392\u884c\u699c\u6570\u636e\u6210\u529f!",t.data=o;var r=JSON.stringify(t);i.manageSdkResponse(r),console.log("ULSDK_TEST.....................\u4e0a\u4f20\u6392\u884c\u699c\u6570\u636e\u6210\u529f.....++++++++++++++++++++...")}}},{key:"getRankData",value:function(e){var t=new Object;t.cmd="/c/getRankResult";new Array;var o=new Object;if(confirm("\u6392\u884c\u699c\u6570\u636e\u83b7\u53d6\u6a21\u62df \u786e\u5b9a(\u6210\u529f) \u53d6\u6d88(\u5931\u8d25)")){o.code="-1",o.msg="\u83b7\u53d6\u6392\u884c\u699c\u6570\u636e\u5931\u8d25!",o.rankList=[],t.data=o;var n=JSON.stringify(t);console.log("ULSDK_TEST.....................\u83b7\u53d6\u6392\u884c\u699c\u6570\u636e\u5931\u8d25.....++++++++++++++++++++..."),i.manageSdkResponse(n)}else{o.code="1",o.msg="\u83b7\u53d6\u6392\u884c\u699c\u6570\u636e\u6210\u529f",o.rankList=[{headUrl:"\u7528\u6237\u5934\u50cf\u5730\u57401",nickName:"\u7528\u6237\u6635\u79f01",score:991,selfFlag:!0},{headUrl:"\u7528\u6237\u5934\u50cf\u5730\u57402",nickName:"\u7528\u6237\u6635\u79f02",score:993,selfFlag:!1}],t.data=o;var r=JSON.stringify(t);console.log("ULSDK_TEST.....................\u83b7\u53d6\u6392\u884c\u699c\u6570\u636e\u6210\u529f.....++++++++++++++++++++..."),i.manageSdkResponse(r)}}}]),e}();t.exports=new c,cc._RF.pop()},{"../../net/sdkdemoULCop.js":"sdkdemoULCop","../../ulsdkmanager/ulsdkdemomanager.js":"ulsdkdemomanager"}],sdkdemoULCop:[function(e,t,o){"use strict";cc._RF.push(t,"b08f6fX4ttO47FYuUvIKSil","sdkdemoULCop"),Object.defineProperty(o,"__esModule",{value:!0}),o.getRequestUrl=i,o.initCopInfo=function(e,t,r,a){var s=i(e,t,r,a);console.log("initCopInfo.......channelId....",t);var c="";c=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");c.open("get",s),c.send(),c.onreadystatechange=function(){4==c.readyState&&200==c.status&&(n=c.responseText,console.log("initCopInfo.......copJsonData....",n)),o.IsGetCopData=!0}},o.getCopData=function(e,t){for(var o in t)e[o]=t[o];return JSON.stringify(function(e){if(null==n)return console.log("copObj.....copDataReplace........1111111.",n),e;var t=JSON.parse(n);if(console.log("copObj.....copDataReplace........222222.",n),t.hasOwnProperty("code")&&-1==t.code)return e;for(var o in t)e[o]=t[o];return e}(e))};var n=null;o.IsGetCopData=!1;function i(e,t,o,n){return e=e+"?gameid="+o+"&qudao="+t+"&version="+n}cc._RF.pop()},{}],sdkdemocConfig:[function(e,t,o){"use strict";cc._RF.push(t,"a6fedEOqUlANKU8xsF445Mv","sdkdemocConfig"),Object.defineProperty(o,"__esModule",{value:!0});o.cConfig='{\n\t"gameId": "4",\n\t"gameName":"\u5df4\u5566\u5566\u9b54\u6cd5\u53d8\u8eab2",\n\t"gameVersion": "1.0",\n\t"cdk_app_id": "37",\n\t"megadataServerTypeId": "3",\n\t"openPaySwitch": true,\n\t"setVersionDelay":3000,\n\t"popUpWindowSwitch": false,\n\t"gameOrientation":1,\n\t"popUpWindowMess": "",\n\t"payTimeout": 70000,\n\t"netTimeout":5000,\n\t"timerLoopTime": 5000,\n\t"timerStopTime": 240000,\n\t"copUrl": "http://copv6.ultralisk.cn/getdata/",\n\t"megadataUrl": "http://megadata.ultralisk.cn/appstatusrequest",\n\t"loginUrl": "https://sdkservertest.ultralisk.cn/userlogin",\n\t"useCDKEYUrl": "https://cdkey.ultralisk.cn/commoncdk/usecdk",\n\t"commonCopConfig": {\n\t},\n\t"m4399": {\n\t\t"cop_channelId": "10",\n\t\t"copDefaultConfig": {}\n\t},\n\t"m7724": {\n\t\t"cop_channelId": "11",\n\t\t"m7724_signKey": "1905a4358456744d1905a4358456748b",\n\t\t"m7724_cpPlatFormId": "190",\n\t\t"m7724_cpguid": "1905a43584567406",\n\t\t"m7724_cpgameid": "117",\n\t\t"copDefaultConfig": {}\n\t},\n\t"m7k7k": {\n\t\t"cop_channelId": "12",\n\t\t"m7k7k_gameAppKey": "5bffe621851fe14b9f4f808255909161",\n\t\t"m7k7k_gameAppSecret": "bdaefdb73e0ae5e710298c9254b3e0f3",\n\t\t"copDefaultConfig": {}\n\t},\n\t"m248": {\n\t\t"cop_channelId": "13",\n\t\t"m248_gameId": "245",\n\t\t"m248_channel": "248game",\n\t\t"m248_gameKey": "e8f975016bba81ffa986b87fc06685da",\n\t\t"copDefaultConfig": {}\n\t},\n\t"lehaihai": {\n\t\t"cop_channelId": "14",\n\t\t"lehaihai_key": "WdWKhN4JpcircYC6rc6E4jXXA27JGjhYRdpA8S4x6FJZeMMTRhZy8ceYQdTJPc3AkcGWjSwji5cXbyxQTxdKWtcS3SyTbBTAfdw3mSAYn5fxceC7fa6XYeYwfZ2SEFfN3w528xpxd8b8HsPm2ksrKSfmp22k36fYtsedGPwMtxsnbSFRhE5DFJmXN5Z6KcGdyKt8WpbmQ3zGPpmKKFsSB3dyYwZw7PrWWc6bsiEQHB7Ch4Gr762ZazMcBzAcBzE",\n\t\t"lehaihai_aeskey": "peGzkTTAJDk8SSxM",\n\t\t"lehaihai_aesiv": "ZQrPGtcwQskMJsTr",\n\t\t"copDefaultConfig": {}\n\t},\n\t"lbwan": {\n\t\t"cop_channelId": "15",\n\t\t"lbwan_gameSecret": "gLznWoUHY4",\n\t\t"lbwan_gameId": "10019",\n\t\t"copDefaultConfig": {}\n\t},\n\t"qunhei": {\n\t\t"cop_channelId": "16",\n\t\t"qunhei_key": "0138fbc55c4956e40309e2d84b9abe63",\n\t\t"qunhei_gameId": "3960",\n\t\t"copDefaultConfig": {}\n\t},\n\n\t"suyi": {\n\t\t"suyi_seceret_key": "47d5e9ce0b419a0eae08b6ee7a30e656",\n\t\t"cop_channelId": "17",\n\t\t"copDefaultConfig": {}\n\t},\n\n\t"meitu": {\n\t\t"appid": "",\n\t\t"meitu_seceret_key": "",\n\t\t"game_callback_uri": "https://sdkservertest.ultralisk.cn/paymeitucallback",\n\t\t"init_title": "xxx",\n\t\t"init_pic": "xxx",\n\t\t"init_summary": "xxx",\n\t\t"cop_channelId": "18",\n\t\t"copDefaultConfig": {}\n\t},\n\t"weixin": {\n\t\t"appid": "wx9b51c6c5b567696e",\n\t\t"loginUrl": "https://sdkservertest.ultralisk.cn/wxuserlogin",\n\t\t"appsecret": "7fc4e7bde7d8e52f33ffafd824387595",\n\t\t"offerId":"1450016792",\n\t\t"banner_adunit":"adunit-3cbe241e24786cfa",\n\t\t"video_adunit":"adunit-b0d82ec8ae469446",\n\t\t"env":1,\n\t\t"cop_channelId": "19",\n\t\t"mch_id":"1511216771",\n\t\t"copDefaultConfig": {}\n\t},\n\t"limi":{\n\t\t"gameId": "3047",\n\t\t"appId": "101496230",\n\t\t"cop_channelId": "0",\n\t\t"bannerViewId":1001,\n\t\t"rankNameList":{\n\t\t\t"score":"\u5e78\u8fd0\u5927\u5956\u8d5b",\n\t\t\t"scoreOrder":1,\n\t\t\t"\u5e78\u8fd0\u5927\u5956\u8d5b":"score",\n\t\t\t"\u8d85\u7ea7\u6392\u4f4d\u8d5b":"a1",\n\t\t\t"\u8fb9\u5883\u8d5b":"a3"\n\t\t},\n\t\t"copDefaultConfig": {}\n\t},\n\t"pay_code": {\n        "1": {\n\t\t\t"payCode": "11001",\n\t\t\t"price": "6",\n\t\t\t"limi_payId":1,\n\t\t\t"proName": "\u4f11\u95f2\u793c\u5305"\n\t\t},\n\t\t"2": {\n\t\t\t"payCode": "11002",\n\t\t\t"price": "18",\n\t\t\t"limi_payId":1,\n\t\t\t"proName": "\u7545\u73a9\u793c\u5305"\n\t\t},\n\t\t"3": {\n\t\t\t"payCode": "11003",\n\t\t\t"price": "30",\n\t\t\t"limi_payId":2,\n\t\t\t"proName": "\u8d85\u503c\u91d1\u5e01\u5305"\n\t\t},\n\t\t"4": {\n\t\t\t"payCode": "11004",\n\t\t\t"price": "6",\n\t\t\t"limi_payId":3,\n\t\t\t"proName": "\u523b\u82e6\u4f53\u529b\u5305"\n\t\t},\n\t\t"5": {\n\t\t\t"payCode": "11005",\n\t\t\t"price": "6",\n\t\t\t"limi_payId":4,\n\t\t\t"proName": "\u5c11\u91cf\u94bb\u77f3"\n\t\t},\n\t\t"6": {\n\t\t\t"payCode": "11006",\n\t\t\t"price": "12",\n\t\t\t"limi_payId":5,\n\t\t\t"proName": "\u4e2d\u91cf\u94bb\u77f3"\n\t\t},\n\t\t"9": {\n\t\t\t"payCode": "11009",\n\t\t\t"price": "6",\n\t\t\t"limi_payId":6,\n\t\t\t"proName": "\u5c11\u91cf\u91d1\u5e01"\n\t\t},\n\t\t"10": {\n\t\t\t"payCode": "11010",\n\t\t\t"price": "12",\n\t\t\t"limi_payId":7,\n\t\t\t"proName": "\u5927\u91cf\u91d1\u5e01"\n\t\t},\n\t\t"11": {\n\t\t\t"payCode": "11011",\n\t\t\t"price": "25",\n\t\t\t"limi_payId":8,\n\t\t\t"proName": "\u5ba0\u7269\u5168\u5bb6\u6b22"\n\t\t},\n\t\t"12": {\n\t\t\t"payCode": "11012",\n\t\t\t"price": "1",\n\t\t\t"limi_payId":9,\n\t\t\t"proName": "\u9996\u51b2\u793c\u5305"\n\t\t},\n\t\t"13": {\n\t\t\t"payCode": "11013",\n\t\t\t"price": "12",\n\t\t\t"limi_payId":10,\n\t\t\t"proName": "\u534e\u4e3d\u65f6\u88c5\u5305"\n\t\t},\n\t\t"14": {\n\t\t\t"payCode": "11014",\n\t\t\t"price": "18",\n\t\t\t"limi_payId":11,\n\t\t\t"proName": "\u68a6\u5e7b\u65f6\u88c5\u5305"\n\t\t},\n\t\t"15": {\n\t\t\t"payCode": "11015",\n\t\t\t"price": "25",\n\t\t\t"limi_payId":12,\n\t\t\t"proName": "\u5962\u534e\u65f6\u88c5\u5305"\n\t\t},\n\t\t"16": {\n\t\t\t"payCode": "11016",\n\t\t\t"price": "68",\n\t\t\t"limi_payId":13,\n\t\t\t"proName": "\u53cc\u500d\u94bb\u77f3\u5305"\n\t\t},\n\t\t"23": {\n\t\t\t"payCode": "11023",\n\t\t\t"price": "68",\n\t\t\t"limi_payId":15,\n\t\t\t"proName": "\u53cc\u500d\u91d1\u5e01\u5305"\n\t\t}\n\t}\n}';cc._RF.pop()},{}],sdkdemohttprequest:[function(e,t,o){"use strict";cc._RF.push(t,"4482d71zTNK+L8cYTyEZ65F","sdkdemohttprequest"),Object.defineProperty(o,"__esModule",{value:!0}),o.useCdkey=function(e){var t=e.userId,o=e.cdkStr,i=e.channelId,r=n.getConfigByKey("cdk_app_id"),a=n.getConfigByKey("netTimeout"),s=n.getConfigByKey("useCDKEYUrl")+"?userId="+t+"&cdkStr="+o+"&appId="+r+"&channelId="+i;console.log(s);var c="";c=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");c.open("get",s),c.send();var l=!1,u=setTimeout(function(){l=!0,c.abort()},a);c.onreadystatechange=function(){if(l){var e={cmd:"/c/useCdkey"},t={code:"-1",message:"\u8bf7\u6c42\u8d85\u65f6"};e.data=t;var o=JSON.stringify(e);n.manageSdkResponse(o)}if(clearTimeout(u),4==c.readyState&&200==c.status){var i=c.responseText;i=(i=(i=(i=i.replace('"[',"[")).replace(']"',"]")).replace('"0"','"1"')).replace("message","data");var r=JSON.parse(i);console.log("success.....loginRequest.....",r);var a={cmd:"/c/useCdkey"};a.data=r;var o=JSON.stringify(a);n.manageSdkResponse(o)}}},o.postMegaData=function(e,t){var o=n.getCurrentChannel(),i=n.getConfigByKey("gameId"),r=n.getConfigByKey("megadataServerTypeId"),a=n.getConfigByKey("netTimeout"),s=n.getConfigByKey("megadataUrl");console.log("postMegaData....",i,n),e.unshift(i,t,o);var c={};c.typeid=r,c.updata=e;var l="updata="+JSON.stringify(c),u="";u=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");u.open("post",s,!0),u.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),u.send(l);var d=!1,p=setTimeout(function(){d=!0,u.abort()},a);u.onreadystatechange=function(){if(d){console.log("\u5927\u6570\u636e\u8bf7\u6c42--------------\u8d85\u65f6\uff01");var e={cmd:"/c/megadataServer"},t={code:"-1",message:"\u8bf7\u6c42\u8d85\u65f6"};e.data=t;var o=JSON.stringify(e);return n.manageSdkResponse(o),void clearTimeout(p)}if(clearTimeout(p),4==u.readyState&&200==u.status){var i=u.responseText,r={};console.log("success.....postMegaData..resultData...",i);var a={cmd:"/c/megadataServer"};"Successful"==i?(r.code="1",r.message="Successful",console.log("\u5927\u6570\u636e\u8bf7\u6c42--------------Successful\uff01")):(r.code="0",r.message=i),a.data=r;var s=JSON.stringify(a);n.manageSdkResponse(s)}}},o.channelLogin=function(e,t){var o=n.getConfigByKey("netTimeout"),r="userId="+e,a=n.getConfigByKey("loginUrl"),s=n.getCurrentModule();console.log("channelLogin---loginData:",e);try{var c="";(c=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).open("post",a,!0),c.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),c.send(r);var l=!1,u=setTimeout(function(){l=!0,c.abort()},o);c.onreadystatechange=function(){if(l)return console.log("\u767b\u5f55\u8bf7\u6c42-\u652f\u4ed8\u6570\u636e---------------\u8d85\u65f6\uff01"),void clearTimeout(u);if(clearTimeout(u),4==c.readyState&&200==c.status){var e=c.responseText;""==e||null==e||void 0==e?console.log("channelLogin--\u670d\u52a1\u7aef\u6570\u636e\u83b7\u53d6\u5f02\u5e38"):"empty"==e?console.log("channelLogin---\u65e0\u652f\u4ed8\u672a\u53d1\u8d27\u8ba2\u5355"):(s.LoginCallback(JSON.parse(e)),"1"==t&&(console.log("ChannelLogin---:\u5b9a\u65f6\u5668\u83b7\u53d6\u5230\u6570\u636e,\u5173\u95ed\u5b9a\u65f6\u5668\u907f\u514d\u591a\u4f59\u8bf7\u6c42\u6d6a\u8d39\u8d44\u6e90-----"),clearTimeout(i.timer))),console.log("initCopInfo.......copJsonData....",e)}}}catch(e){console.log("channelLogin---\u5f02\u5e38\u4fe1\u606f:",e)}};var n=r(e("../ulsdkmanager/ulsdkdemomanager.js")),i=r(e("../sdktools/sdkdemotools.js"));function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}console.log("httpRequest......",n),cc._RF.pop()},{"../sdktools/sdkdemotools.js":"sdkdemotools","../ulsdkmanager/ulsdkdemomanager.js":"ulsdkdemomanager"}],sdkdemotools:[function(e,t,o){"use strict";cc._RF.push(t,"23cb9IIcvFFeJezHJLk2gcH","sdkdemotools"),Object.defineProperty(o,"__esModule",{value:!0}),o.timer=void 0,o.getQueryString=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),o=window.location.search.substr(1).match(t);if(null!=o)return decodeURI(o[2]);return null},o.setTimer=function(e,t,o){e,0,!0,i=t,r=o,clearTimeout(n),console.log("setTimer:---userId--:",e),console.log("setTimer:---TimerLoopTime--:",i),console.log("setTimer:---TimerStopTime--:",r),NewTimer()};(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);t.default=e})(e("../net/sdkdemohttprequest.js"));var n=o.timer=null,i=5e3,r=24e4;cc._RF.pop()},{"../net/sdkdemohttprequest.js":"sdkdemohttprequest"}],singlePageReuseList:[function(e,t,o){"use strict";cc._RF.push(t,"1336eaYdjJLlb1bHngS59ci","singlePageReuseList"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../Const"),i=e("../../../ulframework/utils/Tools"),r=cc._decorator,a=r.ccclass,s=(r.property,function(e){function t(){var t=e.call(this)||this;return t.layoutType=null,t.creator=null,t.settor=null,t.destoryer=null,t.root=null,t.child1=null,t.child2=null,t.defaultActionInterval=.2,t.bIsLoop=!0,t.space=null,t.datas=[],t.moveCallFn=null,t.buildUi(),t}return __extends(t,e),t.prototype.destroy=function(){if(e.prototype.destroy.call(this),this.destoryer)for(var t=1;t<=2;t++)this.destoryer(this["child"+t.toString()],this.datas[t-1]);return!0},t.prototype.setDatas=function(e,t){this.datas=e,t||this.skipToPage(this.curIndex)},t.prototype.getDatas=function(){return this.datas},t.prototype.setMoveCallFn=function(e){this.moveCallFn=e},t.prototype.setSettor=function(e){return this.settor=e,this},t.prototype.setCreator=function(e){return this.creator=e,this},t.prototype.setDestroyer=function(e){return this.destoryer=e,this},t.prototype.setLayoutType=function(e){return this.layoutType=e,this},t.prototype.setSpace=function(e){return this.space=e,this},t.prototype.getCurIndex=function(){return this.curIndex},t.prototype.getMaxIndex=function(){return this.datas.length-1},t.prototype.buildUi=function(){var e,t=this;this.root=new cc.Node,this.root.setContentSize(576,1024),this.root.parent=this,i.default.registerTouchHandler(this.root,function(o){if("began"==o.name)e=o.getLocation();else if("ended"==o.name){var n=o.getLocation().x-e.x;n>60?t.moveToLastPage():n<-60&&t.moveToNextPage()}}),this.curIndex=0,this.lastIndex=0,this.focusChildIndex=1,this.unfocusChildIndex=2},t.prototype.moveToNextPage=function(){this.lastIndex=this.curIndex,this.curIndex++,this.curIndex>this.datas.length-1&&0==this.bIsLoop&&(this.curIndex=this.datas.length-1),this.moveToCurPage()},t.prototype.setCurPage=function(e){this.curIndex=e},t.prototype.moveToLastPage=function(){this.lastIndex=this.curIndex,this.curIndex--,this.curIndex<0&&0==this.bIsLoop&&(this.curIndex=0),this.moveToCurPage()},t.prototype.moveToPage=function(e){this.lastIndex=this.curIndex,this.setCurPage(e),this.moveToCurPage()},t.prototype.skipToPage=function(e){this.setCurPage(e),this.lastIndex=this.curIndex,this.moveToCurPage()},t.prototype.setLoop=function(e){this.bIsLoop=e},t.prototype.moveToCurPage=function(){this.space||(this.layoutType==cc.Layout.Type.HORIZONTAL?this.space=n.default.RESOLUTION_RANGE.maxWidth:this.space=n.default.RESOLUTION_RANGE.maxHeight),null==this.child1&&(this.child1=new cc.Node,this.child1.parent=this.root,this.creator(this.child1)),null==this.child2&&(this.child2=new cc.Node,this.child2.parent=this.root,this.creator(this.child2));var e=new cc.Vec2,t=new cc.Vec2,o=new cc.Vec2,i=new cc.Vec2,r=this["child"+this.focusChildIndex.toString()],a=this["child"+this.unfocusChildIndex.toString()];if(this.lastIndex==this.curIndex)e.y=0,t.y=0,o.y=0,i.y=0,e.x=0,t.x=this.space,o.x=0,i.x=this.space;else{var s=this.focusChildIndex;this.focusChildIndex=this.unfocusChildIndex,this.unfocusChildIndex=s,this.lastIndex<this.curIndex?this.layoutType==cc.Layout.Type.HORIZONTAL?(e.y=0,t.y=0,o.y=0,i.y=0,e.x=this.space,t.x=0,o.x=0,i.x=-1*this.space):(e.x=0,t.x=0,o.x=0,i.x=0,e.y=this.space,t.y=0,o.y=0,i.y=-1*this.space):this.layoutType==cc.Layout.Type.HORIZONTAL?(e.y=0,t.y=0,o.y=0,i.y=0,e.x=-1*this.space,t.x=0,o.x=0,i.x=this.space):(e.x=0,t.x=0,o.x=0,i.x=0,e.y=-1*this.space,t.y=0,o.y=0,i.y=this.space)}r.setPosition(e),a.setPosition(t);var c=this.curIndex%this.datas.length;c<0&&(c+=this.datas.length);var l=this.lastIndex%this.datas.length;l<0&&(l+=this.datas.length),this.settor(r,this.datas[c]),c!=l&&this.settor(a,this.datas[l]),r.stopAllActions(),r.runAction(cc.moveTo(this.defaultActionInterval,o)),a.stopAllActions(),a.runAction(cc.moveTo(this.defaultActionInterval,i)),this.moveCallFn&&"function"==typeof this.moveCallFn&&this.moveCallFn(this)},t=__decorate([a],t)}(cc.Node));o.default=s,cc._RF.pop()},{"../../../ulframework/utils/Tools":"Tools","../../Const":"Const"}],ulsdkdemomanager:[function(e,t,o){"use strict";cc._RF.push(t,"9de53Wv17pOWomVGxUEGcJ7","ulsdkdemomanager"),Object.defineProperty(o,"__esModule",{value:!0}),o.initManager=function(t){try{c=JSON.parse(i.cConfig)}catch(e){return void console.log("initManager.....json\u89e3\u6790\u5931\u8d25\uff01")}l=t,(s=e("../ulsdkmodules/sdkDemoModule/sdkDemoModule.js")).initModule(t),console.log("ULSDK_TEST...............InitManager......",s)},o.getCurrentChannel=function(){return l},o.getCurrentModule=function(){return s},o.getConfigByKey=function(e){return c[e]},o.manageSdkRequest=function(e,t){if(null==s)return void console.log("ULSDK_TEST......\u6e38\u620f\u4e0d\u5728\u4efb\u4f55\u4e00\u4e2a\u6e20\u9053\uff01");switch(e){case"/c/setVersion":console.log("setVersion...ManageSdkRequest.",t),s.setVersion();break;case"/c/openPay":s.openPay(t);break;case"/c/openShare":s.openShare(t);break;case"/c/loginRole":s.loginRoleInfo(t);break;case"/c/loginOut":s.loginOut(t);break;case"/c/openAdv":s.openAdv(t);break;case"/c/closeAdv":s.closeAdv(t);break;case"/c/saveRankData":console.log("ULSDK_TEST.....saveRankData>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>==========manageSdkRequest===="),s.saveRankData(t);break;case"/c/getRankData":s.getRankData(t);break;case"/c/useCdkey":r.useCdkey(t);break;case"/c/megadataServer":r.postMegaData(t,s.getUserId());break;case"/c/createRole":r.postMegaData(new Array("/d/createNewRole",t.roleName),s.getUserId());break;default:console.log("ULSDK_TEST.........\u6ca1\u6709\u8be5\u6307\u4ee4",e)}},o.manageSdkResponse=function(e){console.log("setVersion...manageSdkResponse.",e),n.response(e)};var n=a(e("../ulsdkmiddleware/ulsdkdemomiddleware.js")),i=e("../assets/sdkdemocConfig.js"),r=a(e("../net/sdkdemohttprequest.js"));function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}var s=null,c=null,l=null;cc._RF.pop()},{"../assets/sdkdemocConfig.js":"sdkdemocConfig","../net/sdkdemohttprequest.js":"sdkdemohttprequest","../ulsdkmiddleware/ulsdkdemomiddleware.js":"ulsdkdemomiddleware","../ulsdkmodules/sdkDemoModule/sdkDemoModule.js":"sdkDemoModule"}],ulsdkdemomiddleware:[function(e,t,o){"use strict";cc._RF.push(t,"54875J3LlNJQr9p708ntLTh","ulsdkdemomiddleware"),Object.defineProperty(o,"__esModule",{value:!0}),o.initSdk=function(){n.initManager("ulsdkdemo"),console.log("ULSDK_TEST.........\u521d\u59cb\u5316sdk......currentChannel..","ulsdkdemo")},o.setGameCallback=function(e){r=e,console.log("ULSDK_TEST........setGameCallback....success.....")},o.request=function(e){try{var t=JSON.parse(e),o=t.cmd,i=t.data;n.manageSdkRequest(o,i),console.log("ULSDK_TEST........request func is .... !",e),console.log(e)}catch(e){return console.log("ULSDK_TEST....request.....json\u89e3\u6790\u5931\u8d25\uff01"),void console.log(e)}},o.response=function(e){null!=r?r(e):console.log("ULSDK_TEST.........callbackHalder func is null !")};var n=i(e("../ulsdkmanager/ulsdkdemomanager.js"));i(e("../sdktools/sdkdemotools.js"));function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}var r=null;cc._RF.pop()},{"../sdktools/sdkdemotools.js":"sdkdemotools","../ulsdkmanager/ulsdkdemomanager.js":"ulsdkdemomanager"}],ul:[function(e,t,o){"use strict";function n(e,t){e.sign=t?"":e.negative?"-":e.sign;var o=e.min-e.argument.length+1-e.sign.length,n=new Array(o<0?0:o).join(e.pad);return e.left?"0"==e.pad||t?e.sign+e.argument+n.replace(/0/g," "):e.sign+e.argument+n:"0"==e.pad||t?e.sign+n+e.argument:n+e.sign+e.argument}function i(e){return{"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regExp","[object Undefined]":"undefined","[object Null]":"null","[object Object]":"object"}[Object.prototype.toString.call(e)]}cc._RF.push(t,"2f20f/O6ERNBZxpEn6hffbG","ul"),ul.format=function(){if(void 0===arguments)return null;if(arguments.length<1)return null;if("string"!=typeof arguments[0])return null;if("undefined"==typeof RegExp)return null;for(var e=arguments[0],t=new RegExp(/(%([%]|(\-)?(\+|\x20)?(0)?(\d+)?(\.(\d)?)?([bcdfosxX])))/g),o=new Array,i=new Array,r=0,a=0,s=0,c=0,l="",u=null;u=t.exec(e);)u[9]&&(r+=1),a=c,s=t.lastIndex-u[0].length,i[i.length]=e.substring(a,s),c=t.lastIndex,o[o.length]={match:u[0],left:!!u[3],sign:u[4]||"",pad:u[5]||" ",min:u[6]||0,precision:u[8],code:u[9]||"%",negative:parseInt(arguments[r])<0,argument:String(arguments[r])};if(i[i.length]=e.substring(c),0==o.length)return e;if(arguments.length-1<r)return null;u=null;var d=null,p=null;for(p=0;p<o.length;p++)"%"==o[p].code?d="%":"b"==o[p].code?(o[p].argument=String(Math.abs(parseInt(o[p].argument)).toString(2)),d=n(o[p],!0)):"c"==o[p].code?(o[p].argument=String(String.fromCharCode(Math.abs(parseInt(o[p].argument)))),d=n(o[p],!0)):"d"==o[p].code?(o[p].argument=String(Math.abs(parseInt(o[p].argument))),d=n(o[p])):"f"==o[p].code?(o[p].argument=String(Math.abs(parseFloat(o[p].argument)).toFixed(o[p].precision?o[p].precision:6)),d=n(o[p])):"o"==o[p].code?(o[p].argument=String(Math.abs(parseInt(o[p].argument)).toString(8)),d=n(o[p])):"s"==o[p].code?(o[p].argument=o[p].argument.substring(0,o[p].precision?o[p].precision:o[p].argument.length),d=n(o[p],!0)):"x"==o[p].code?(o[p].argument=String(Math.abs(parseInt(o[p].argument)).toString(16)),d=n(o[p])):"X"==o[p].code?(o[p].argument=String(Math.abs(parseInt(o[p].argument)).toString(16)),d=n(o[p]).toUpperCase()):d=o[p].match,l+=i[p],l+=d;return l+=i[p]},ul.formatDate=function(e,t){var o={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var n in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),o)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?o[n]:("00"+o[n]).substr((""+o[n]).length)));return t},ul.dump=function(e,t,o){var n=function e(t,o){var n="";o||(o=0);for(var i="",r=0;r<o+1;r++)i+="    ";if("object"==typeof t)for(var a in t){var s=t[a];"object"==typeof s?(n+=i+"'"+a+"' ...\n",n+=e(s,o+1)):n+=i+"'"+a+"' => \""+s+'"\n'}else n="===>"+t+"<===("+typeof t+")";return n}(e);console.log("dump-begin",t),console.log(n),console.log("dump-end")},ul.actionFloat=function(e,t,o,n){var i=cc.delayTime(e);return i.update=function(e){n(t*(1-e)+o*e)},i},ul.clone=function e(t){var o,n=i(t);if(t instanceof cc.Node)return t;if("object"===n)o={};else{if("array"!==n)return t;o=[]}if("array"===n)for(var r=0,a=t.length;r<a;r++)o.push(e(t[r]));else if("object"===n)for(var s in t)o[s]=e(t[s]);return o},ul.length=function(e){var t=i(e);if("array"===t)return e.length;if("object"===t){var o=0;for(var n in e)e[n]&&o++;return o}return 0},ul.clamp=function(e,t,o){return e<t&&(e=t),e>o&&(e=o),e},ul.getType=i,cc._RF.pop()},{}],vDebugPickerDialog:[function(e,t,o){"use strict";cc._RF.push(t,"05c8eGfY0BH07vCiWwdWExM","vDebugPickerDialog"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../ulframework/view/DialogBase"),i=e("../../../ulframework/view/ReuseList"),r=e("../../../ulframework/view/ReuseLayouterVBox"),a=e("../node/LayerColor"),s=e("../../../ulframework/utils/Tools"),c=cc._decorator,l=c.ccclass,u=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelTitle=null,t.layoutList=null,t}return __extends(t,e),t.prototype._getResourceName=function(){return"dialog/vDebugPickerDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_labelTitle:{varname:"labelTitle",vartype:cc.Label},CC_layoutList:{varname:"layoutList",vartype:cc.Layout}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.buildUi=function(){var e=this;this.labelTitle.string=this.context.title;var t=this.layoutList,o=new i.default;o.setLayouter((new r.default).setCellSize(390,50).setGap(4).setPending(0)),o.setCreator(function(t){var o=new a.default(cc.color(0,0,0,63));o.parent=t,o.setContentSize(t.getContentSize());var n=new cc.Node;n.parent=t;var i=n.addComponent(cc.Label);i.fontSize=20,i.verticalAlign=cc.Label.VerticalAlign.CENTER,t.label=i,s.default.registerTouchHandler(t,function(t){var o=t.target;if("began"==t.name?o.label.node.color=cc.color(0,255,0):"ended"!=t.name&&"cancelled"!=t.name||(o.label.node.color=cc.color(255,255,255)),t.isClick()){cc.log("click",o.data);var n=e.context.callback;n instanceof Function&&(n(o.data.value),e.closeDialog(!0))}})}),o.setSetter(function(e,t){e.label.string=t.text}),o.parent=t.node,o.setContentSize(t.node.getContentSize());var n=this.context.conf;o.setDatas(n)},t=__decorate([l],t)}(n.default));o.default=u,cc._RF.pop()},{"../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/DialogBase":"DialogBase","../../../ulframework/view/ReuseLayouterVBox":"ReuseLayouterVBox","../../../ulframework/view/ReuseList":"ReuseList","../node/LayerColor":"LayerColor"}],vGuideArrow:[function(e,t,o){"use strict";cc._RF.push(t,"059d2vsboRBSqFIQYk8E6SK","vGuideArrow"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../ulframework/view/ViewBase"),i=cc._decorator,r=i.ccclass,a=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype._getResourceName=function(){return"node/vGuideArrow"},t.prototype._getResourceBindingConfig=function(){return{}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t=__decorate([r],t)}(n.default));o.default=a,cc._RF.pop()},{"../../../ulframework/view/ViewBase":"ViewBase"}],vGuideMask:[function(e,t,o){"use strict";cc._RF.push(t,"1e813/+31BG6587xEYKG0RQ","vGuideMask"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../ulframework/view/ViewBase"),i=e("../../manager/mgrDirector"),r=e("../../Const"),a=e("../../../ulframework/utils/Tools"),s=e("../../manager/mgrTip"),c=e("../../manager/mgrGuide"),l=cc._decorator,u=l.ccclass,d=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeLeftBottom=null,t.spriteBlockBottom=null,t.spriteBlockLeft=null,t.spriteBlockRight=null,t.spriteBlockTop=null,t.spriteHole=null,t.rect=null,t.maskType=r.GuideMaskType.none_passAll,t.bFadeIn=!1,t._mask_click_last_time=0,t._mask_click_count=0,t}return __extends(t,e),t.prototype._getResourceName=function(){return"node/vGuideMask"},t.prototype._getResourceBindingConfig=function(){return{CC_nodeLeftBottom:{varname:"nodeLeftBottom",vartype:cc.Node},CC_spriteBlockBottom:{varname:"spriteBlockBottom",vartype:cc.Sprite},CC_spriteBlockLeft:{varname:"spriteBlockLeft",vartype:cc.Sprite},CC_spriteBlockRight:{varname:"spriteBlockRight",vartype:cc.Sprite},CC_spriteBlockTop:{varname:"spriteBlockTop",vartype:cc.Sprite},CC_spriteHole:{varname:"spriteHole",vartype:cc.Sprite}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.updateMask(),this.updateListeners()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.setMaskType=function(e){this.maskType=e,this.updateMask(),this.updateListeners()},t.prototype.setRect=function(e){this.rect=e,this.updateMask()},t.prototype.updateListeners=function(){if(this.isResourceLoaded()){var e=this.maskType;this.spriteHole.node.opacity=0,this.spriteBlockLeft.node.opacity=0,this.spriteBlockRight.node.opacity=0,this.spriteBlockTop.node.opacity=0,this.spriteBlockBottom.node.opacity=0,a.default.unregisterTouchHandler(this.spriteHole.node),a.default.unregisterTouchHandler(this.spriteBlockLeft.node),a.default.unregisterTouchHandler(this.spriteBlockRight.node),a.default.unregisterTouchHandler(this.spriteBlockTop.node),a.default.unregisterTouchHandler(this.spriteBlockBottom.node),e==r.GuideMaskType.mask_passAll||e==r.GuideMaskType.none_passAll||(e==r.GuideMaskType.mask_blockAll||e==r.GuideMaskType.none_blockkAll?(a.default.registerTouchHandler(this.spriteHole.node,this.onTouchMask.bind(this),!0),a.default.registerTouchHandler(this.spriteBlockLeft.node,this.onTouchMask.bind(this),!0),a.default.registerTouchHandler(this.spriteBlockRight.node,this.onTouchMask.bind(this),!0),a.default.registerTouchHandler(this.spriteBlockTop.node,this.onTouchMask.bind(this),!0),a.default.registerTouchHandler(this.spriteBlockBottom.node,this.onTouchMask.bind(this),!0)):e!=r.GuideMaskType.mask_passHole&&e!=r.GuideMaskType.none_passHole||(a.default.registerTouchHandler(this.spriteBlockLeft.node,this.onTouchMask.bind(this),!0),a.default.registerTouchHandler(this.spriteBlockRight.node,this.onTouchMask.bind(this),!0),a.default.registerTouchHandler(this.spriteBlockTop.node,this.onTouchMask.bind(this),!0),a.default.registerTouchHandler(this.spriteBlockBottom.node,this.onTouchMask.bind(this),!0)))}},t.prototype.updateMask=function(){if(this.isResourceLoaded()){this.nodeResource.setContentSize(i.default.size),this.nodeLeftBottom.getComponent(cc.Widget).updateAlignment();var e,t=this.nodeResource.getContentSize(),o=this.rect,n=this.maskType,a=n==r.GuideMaskType.mask_blockAll||n==r.GuideMaskType.mask_passAll||n==r.GuideMaskType.mask_passHole;if(o)this.spriteHole.node.x=o.x,this.spriteHole.node.y=o.y,this.spriteHole.node.setContentSize(o.size),(e=this.spriteBlockLeft.getComponent(cc.Widget)).left=0,e.right=t.width-o.x,e.top=0,e.bottom=0,e.updateAlignment(),(e=this.spriteBlockRight.getComponent(cc.Widget)).left=o.xMax,e.right=0,e.top=0,e.bottom=0,e.updateAlignment(),(e=this.spriteBlockTop.getComponent(cc.Widget)).left=o.x,e.right=t.width-o.xMax,e.top=0,e.bottom=o.yMax,e.updateAlignment(),this.spriteBlockBottom.enabled=!0,(e=this.spriteBlockBottom.getComponent(cc.Widget)).left=o.x,e.right=t.width-o.xMax,e.top=t.height-o.y,e.bottom=0,e.updateAlignment();else(e=this.spriteBlockLeft.getComponent(cc.Widget)).left=0,e.right=0,e.top=0,e.bottom=0,e.updateAlignment();a?o?(this.spriteHole.enabled=!0,this.spriteBlockLeft.enabled=!0,this.spriteBlockRight.enabled=!0,this.spriteBlockTop.enabled=!0,this.spriteBlockBottom.enabled=!0):(this.spriteHole.enabled=!1,this.spriteBlockLeft.enabled=!0,this.spriteBlockRight.enabled=!1,this.spriteBlockTop.enabled=!1,this.spriteBlockBottom.enabled=!1):(this.spriteHole.enabled=!1,this.spriteBlockLeft.enabled=!1,this.spriteBlockRight.enabled=!1,this.spriteBlockTop.enabled=!1,this.spriteBlockBottom.enabled=!1)}},t.prototype.fadeIn=function(){if(this.bFadeIn=!0,this.isResourceLoaded()){var e=this.nodeLeftBottom;cc.isValid(e)&&(e.opacity=0,e.stopAllActions(),e.runAction(cc.fadeIn(.3)))}},t.prototype.fadeOut=function(){if(this.bFadeIn=!1,this.isResourceLoaded()){var e=this.nodeLeftBottom;cc.isValid(e)&&(e.stopAllActions(),e.runAction(cc.fadeOut(.3)))}},t.prototype._onClickMaskLeftTop=function(){var e=this._mask_click_last_time||0;(a.default.time()-e<.5?this._mask_click_count++:this._mask_click_count=0,cc.log("vGuideMask._onClickMaskLeftTop",this._mask_click_count),this._mask_click_last_time=a.default.time(),this._mask_click_count>=19)&&(this._mask_click_count=0,s.default.alertPrompt2("\u63d0\u793a","\u662f\u5426\u8df3\u8fc7\u65b0\u624b\u5f15\u5bfc\uff1f","\u53d6\u6d88","\u8df3\u8fc7",null,function(){c.default._debugCancelDebug()}).parent.zIndex=r.default.GLOBAL_ORDER_DIALOG+1)},t.prototype.onTouchMask=function(e){e.isClick()&&(this.sendMsg("MSG_GUIDE_POINT",{id:"vGuideMask.click"}),e.getLocationX()<=100&&e.getLocationY()>=i.default.height-100&&this._onClickMaskLeftTop())},t=__decorate([u],t)}(n.default));o.default=d,cc._RF.pop()},{"../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/ViewBase":"ViewBase","../../Const":"Const","../../manager/mgrDirector":"mgrDirector","../../manager/mgrGuide":"mgrGuide","../../manager/mgrTip":"mgrTip"}],vGuideTip:[function(e,t,o){"use strict";cc._RF.push(t,"54dbe1CSJhPS58JzJXVJ0sg","vGuideTip"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../ulframework/view/ViewBase"),i=e("../../manager/mgrCfg"),r=e("../../manager/mgrPool"),a=e("../../manager/mgrPlayer"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelContent=null,t.labelName=null,t.nodeArrow=null,t.nodeSpine=null,t.spriteNameBg=null,t.spine=null,t}return __extends(t,e),t.prototype._getResourceName=function(){return"node/vGuideTip"},t.prototype._getResourceBindingConfig=function(){return{CC_labelContent:{varname:"labelContent",vartype:cc.Label},CC_labelName:{varname:"labelName",vartype:cc.Label},CC_nodeArrow:{varname:"nodeArrow",vartype:cc.Node},CC_nodeSpine:{varname:"nodeSpine",vartype:cc.Node},CC_spriteNameBg:{varname:"spriteNameBg",vartype:cc.Sprite}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){cc.isValid(this.spine)&&(r.default.put(this.spine),this.spine.removeFromParent()),this.spine=null,e.prototype.onDestroy.call(this)},t.prototype.buildUi=function(){var e=this.context.guideId,t=this.context.step,o=i.default.get("guide_db",e,t);if(o.tipSpineId){var n=r.default.get("spine",o.tipSpineId);n&&(n.parent=this.nodeSpine,n.play("mov_1",!0),this.spine=n)}o.tipName?(this.spriteNameBg.node.active=!0,this.labelName.string=o.tipName):this.spriteNameBg.node.active=!1;var s=o.tipContent;s=s.replace("PLAYER_NAME",a.default.getName()),this.labelContent.string=s,this.nodeArrow.active=!o.bTipArrowDisabled},t.prototype.setAnchorPoint=function(e,t){this.isResourceLoaded()&&this.nodeResource.setAnchorPoint(e,t)},t=__decorate([c],t)}(n.default));o.default=l,cc._RF.pop()},{"../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrCfg":"mgrCfg","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrPool":"mgrPool"}],vGuideView:[function(e,t,o){"use strict";cc._RF.push(t,"38f2bEVSjVPJ6lsbQuojwI3","vGuideView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../manager/mgrCfg"),i=e("../../manager/mgrGuide"),r=e("../../manager/mgrPool"),a=e("./vGuideMask"),s=e("./vGuideTip"),c=e("./vGuideArrow"),l=e("../../../ulframework/view/ViewBase"),u=e("../../manager/mgrSound"),d=e("../../../ulframework/utils/Timer"),p=e("../../../ulframework/utils/Tools"),h=cc._decorator,f=h.ccclass,g=(h.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bHide=!1,t.slideIndex=0,t}return __extends(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t),this.updatePos()},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this.bHide||(cc.warn("vGuideView.onCleanup \u5f15\u5bfc\u5f02\u5e38\u9000\u51fa\uff0c\u5e76\u6ca1\u6709\u8c03\u7528\u8fc7hideAndRemove\u51fd\u6570"),cc.warn("  \u5c1d\u8bd5\u53d6\u6d88\u5f15\u5bfc"),i.default.cancelGuide()),cc.isValid(this.animClick)&&(r.default.put(this.animClick),this.animClick.removeFromParent(),this.animClick=null)},t.prototype.buildUi=function(){var e=this.context.guideId,t=this.context.step,o=n.default.get("guide_db",e,t);if(cc.isValid(this.mask)&&(this.mask.destroy(),this.mask=null),cc.isValid(this.tip)&&(this.tip.destroy(),this.tip=null),cc.isValid(this.arrow)&&(this.arrow.destroy(),this.arrow=null),this.mask=new a.default,this.mask.parent=this,this.mask.setMaskType(o.maskType),o.tipContent&&(this.tip=new s.default({guideId:e,step:t}),this.tip.parent=this),"click"==o.arrowType){var i=o.bFlipArrow?-1:1,l=new cc.Node;l.parent=this,l.scaleX=i,l.rotation=o.arrowRotate,this.nodeSpine=l;var u=r.default.get("animNode","guideclick");u.parent=l,this.animClick=u}else"slide"==o.arrowType&&(this.arrow=new c.default,this.arrow.parent=this,this.arrow.scaleX=o.bFlipArrow?-1:1,this.playSlideArrowAction())},t.prototype.playSlideArrowAction=function(){var e=this.context.guideId,t=this.context.step,o=n.default.get("guide_db",e,t),r=i.default.getGuideNodes(o.nodeNames);if(r.length<2)return cc.warn("vGuideView.playSlideArrowAction nodes not enough!"),this.arrow.destroy(),void(this.arrow=null);var a=this.slideIndex%r.length,s=r[a],c=p.default.convertRectToNodeSpace(this,p.default.calcNodeBoundingBoxToWorld(s,o.nodeExt));if(0==a)this.arrow.setPosition(c.center),this.arrow.opacity=0,this.arrow.runAction(cc.sequence(cc.fadeIn(.3),cc.callFunc(this.playSlideArrowAction.bind(this))));else if(a==r.length-1){var l=this.arrow.position.sub(c.center).mag()/450;this.arrow.runAction(cc.sequence(cc.moveTo(l,c.center),cc.fadeOut(.3),cc.callFunc(this.playSlideArrowAction.bind(this))))}else{l=this.arrow.position.sub(c.center).mag()/450;this.arrow.runAction(cc.sequence(cc.moveTo(l,c.center),cc.callFunc(this.playSlideArrowAction.bind(this))))}this.slideIndex++},t.prototype.show=function(){this.buildUi();var e=this.context.guideId,t=this.context.step,o=n.default.get("guide_db",e,t);o.soundId&&u.default.play(o.soundId),this.mask&&this.mask.fadeIn(),this.arrow&&(this.arrow.stopActionByTag(1),this.arrow.opacity=0,this.arrow.runAction(cc.fadeIn(.3)).setTag(1)),this.nodeSpine&&(this.nodeSpine.stopActionByTag(1),this.nodeSpine.opacity=0,this.nodeSpine.runAction(cc.fadeIn(.3)).setTag(1)),this.tip&&(this.tip.stopActionByTag(1),this.tip.opacity=0,this.tip.runAction(cc.fadeIn(.3)).setTag(1))},t.prototype.hideAndRemove=function(){var e=this;this.bHide=!0,cc.isValid(this.mask)&&this.mask.fadeOut(),cc.isValid(this.arrow)&&(this.arrow.stopAllActions(),this.arrow.runAction(cc.fadeOut(.3))),cc.isValid(this.nodeSpine)&&(this.nodeSpine.stopAllActions(),this.nodeSpine.runAction(cc.fadeOut(.3))),cc.isValid(this.tip)&&(this.tip.stopAllActions(),this.tip.runAction(cc.fadeOut(.3))),d.default.callLater(.3,function(){e.destroy()},this)},t.prototype.updatePos=function(){var e=this.context.guideId,t=this.context.step,o=n.default.get("guide_db",e,t),i=this.calcFirstNodeRect(),r=p.default.convertRectToNodeSpace(this,i);if(this.mask&&this.mask.setRect(i),this.tip)if(r){var a=0,s=0,c=0,l=0,u=o.tipDir||"left";"left"==u||"leftTop"==u||"leftBottom"==u?(a=r.x-10,c=1):"right"==u||"rightTop"==u||"rightBottom"==u?(a=r.xMax+10,c=0):(a=r.center.x,c=.5),"top"==u||"leftTop"==u||"rightTop"==u?(s=r.yMax+10,l=0):"bottom"==u||"leftBottom"==u||"rightBottom"==u?(s=r.y-10,l=1):(s=r.center.y,l=.5),cc.log("update tipPos",c,l,a,s),this.tip.setAnchorPoint(c,l),this.tip.x=a+(o.tipOffset[0]||0),this.tip.y=s+(o.tipOffset[1]||0)}else this.tip.setAnchorPoint(.5,.5),this.tip.x=o.tipOffset[0]||0,this.tip.y=o.tipOffset[1]||0;this.nodeSpine&&"click"==o.arrowType&&(r?cc.isValid(this.nodeSpine)&&this.nodeSpine.setPosition(r.center):cc.warn("vGuideView.updatePos rect not found!"))},t.prototype.calcFirstNodeRect=function(){var e=this.context.guideId,t=this.context.step,o=n.default.get("guide_db",e,t),r=o.nodeNames[0];if(!r)return null;var a=i.default.getGuideNode(r);return a?p.default.calcNodeBoundingBoxToWorld(a,o.nodeExt):null},t=__decorate([f],t)}(l.default));o.default=g,cc._RF.pop()},{"../../../ulframework/utils/Timer":"Timer","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrCfg":"mgrCfg","../../manager/mgrGuide":"mgrGuide","../../manager/mgrPool":"mgrPool","../../manager/mgrSound":"mgrSound","./vGuideArrow":"vGuideArrow","./vGuideMask":"vGuideMask","./vGuideTip":"vGuideTip"}],vMark:[function(e,t,o){"use strict";cc._RF.push(t,"fd723UmBTpHV5u37EQQBUDy","vMark"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../ulframework/view/ViewBase"),i=cc._decorator,r=i.ccclass,a=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelCount=null,t.nodeRedPoint=null,t}return __extends(t,e),t.prototype._getResourceName=function(){return"node/vMark"},t.prototype._getResourceBindingConfig=function(){return{CC_labelCount:{varname:"labelCount",vartype:cc.Label},CC_nodeRedPoint:{varname:"nodeRedPoint",vartype:cc.Node}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.refreshCount()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.setCount=function(e){this.context.count=e,this.isResourceLoaded()&&this.refreshCount()},t.prototype.refreshCount=function(){var e=this.context.count||"";this.labelCount.string=e},t=__decorate([r],t)}(n.default));o.default=a,cc._RF.pop()},{"../../../ulframework/view/ViewBase":"ViewBase"}],vMsgTip:[function(e,t,o){"use strict";cc._RF.push(t,"89714dAk3pNcohO3hCJp5Yp","vMsgTip"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../ulframework/view/ViewBase"),i=e("../../manager/mgrTip"),r=e("../../manager/mgrDirector"),a=cc._decorator,s=a.ccclass,c=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelContent=null,t}return __extends(t,e),t.prototype._getResourceName=function(){return"node/vMsgTip"},t.prototype._getResourceBindingConfig=function(){return{CC_labelContent:{varname:"labelContent",vartype:cc.Label}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi(),this.fillData()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.buildUi=function(){this.labelContent.node.width=.9*r.default.width},t.prototype.fillData=function(){this.context.text&&this.setText(this.context.text),this.context.textColor&&this.setColorEx(this.context.textColor,this.context.outlineColor)},t.prototype.setText=function(e){this.context.text=e,this.isResourceLoaded()&&(this.labelContent.string=e)},t.prototype.setColorEx=function(e,t){if(this.context.textColor=e,this.context.outlineColor=t,this.isResourceLoaded()){this.labelContent.node.color=e;var o=this.labelContent.getComponent(cc.LabelOutline);t?(o.enabled=!0,o.color=t):o.enabled=!1}},t.prototype.play=function(e,t){this.parent=i.default.getTipRootNode(),t=t||50;var o=e||r.default.center,n=cc.v2(o.x,o.y+t);o=this.parent.convertToNodeSpace(o),n=this.parent.convertToNodeSpace(n),this.scale=0,this.setPosition(o),this.stopAllActions(),this.runAction(cc.spawn(cc.scaleTo(.15,1).easing(cc.easeIn(2)),cc.moveTo(1.1,n).easing(cc.easeOut(1.2)),cc.sequence(cc.fadeIn(.15).easing(cc.easeIn(2)),cc.delayTime(.65),cc.fadeOut(.3),cc.removeSelf())))},t=__decorate([s],t)}(n.default));o.default=c,cc._RF.pop()},{"../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrDirector":"mgrDirector","../../manager/mgrTip":"mgrTip"}],vPromptDialog:[function(e,t,o){"use strict";cc._RF.push(t,"1ae53LpSWxJTYS5zS3gAoda","vPromptDialog"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),r=cc._decorator,a=r.ccclass,s=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.button1=null,t.button2=null,t.button3=null,t.buttonClose=null,t.labelContent=null,t.labelTitle=null,t}return __extends(t,e),t.prototype._getResourceName=function(){return"dialog/vPromptDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_button1:{varname:"button1",vartype:n.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButton1"}]},CC_button2:{varname:"button2",vartype:n.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButton2"}]},CC_button3:{varname:"button3",vartype:n.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButton3"}]},CC_buttonClose:{varname:"buttonClose",vartype:n.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonClose"}]},CC_labelContent:{varname:"labelContent",vartype:cc.Label},CC_labelTitle:{varname:"labelTitle",vartype:cc.Label}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.labelTitle.string=this.context.title||"\u6807\u9898",this.labelContent.string=this.context.content||"\u5185\u5bb9";for(var t=this.context.btnTexts||[],o=0;o<2;o++){var n=this["button"+(o+1)],i=n.node.getComponentInChildren(cc.Label);null!=t[o]?i.string=t[o]:n.node.active=!1}this.buttonClose.node.active=!1},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.isClickShadowClose=function(){return this.context.btnTexts.length<=0},t.prototype.onOpenDialogCompleted=function(){e.prototype.onOpenDialogCompleted.call(this)},t.prototype.triggerCallback=function(e){var t=(this.context.callbacks||[])[e];null!=t&&t()||this.closeDialog()},t.prototype.onTouchButton1=function(e){e.isClick()&&this.triggerCallback(0)},t.prototype.onTouchButton2=function(e){e.isClick()&&this.triggerCallback(1)},t.prototype.onTouchButton3=function(e){e.isClick()&&this.triggerCallback(2)},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t=__decorate([a],t)}(i.default));o.default=s,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/DialogBase":"DialogBase"}],vUpdaterSceneBase:[function(e,t,o){"use strict";cc._RF.push(t,"c62363WFOdOTol2y4eu214a","vUpdaterSceneBase"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../view/SceneBase"),i=e("../utils/Timer"),r=e("../../game/Const"),a=e("../../game/manager/mgrDirector"),s=e("../../game/view/node/LayerColor"),c=cc._decorator,l=c.ccclass,u=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.patchInfo=null,t.localPid=null,t.patchs=null,t.patchIdx=null,t.TIMEOUT=5,t.requestPatchInfoXhr=null,t.timeoutTimer=null,t.bNeedRestart=!1,t.bGameStarted=!1,t}return __extends(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){var t=this;e.prototype.onResourceLoaded.call(this),jsb.fileUtils.isFileExist("src/patch_info.json")?(cc.log("\u53d1\u73b0patch_info.json\uff0c\u51c6\u5907\u66f4\u65b0"),this.needPlayLogo()?this.playLogo(function(){t.prepareUpdate()}):this.prepareUpdate()):(cc.log("patch_info.json\u672a\u627e\u5230\uff0c\u76f4\u63a5\u8fdb\u5165\u6e38\u620f"),this.startGame())},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.buildUi=function(){},t.prototype.sendUiMsg=function(e,t){this.onUiMsg(e,t)},t.prototype.onUiMsg=function(e,t){},t.prototype.needPlayLogo=function(){return"true"==cc.sys.localStorage.getItem("B_SKIP_LOGO_ONCE")?(cc.sys.localStorage.setItem("B_SKIP_LOGO_ONCE","false"),!1):!!this.getLogoTextures()},t.prototype.getLogoTextures=function(){var e,t=jsb.fileUtils.getStringFromFile("src/patch_info.json");if(t&&(e=JSON.parse(t)),!e)return null;var o=e.CONF;if(!o)return null;var n=o.LOGO_TEXTURES;return Array.isArray(n)?n:null},t.prototype.playLogo=function(e){var t=this;cc.log("-------------------------"),cc.log("-----   playLogo    -----"),cc.log("-------------------------");for(var o=this.getLogoTextures(),n=o.length-1;n>=0;n--){var i=o[n];cc.loader._getResUuid(i)||(cc.warn(ul.format("vUpdaterSceneBase.playLogo logoTexture not found! fileName=[%s]",i)),o.splice(n,1))}if(o.length<=0)e();else{this.nodeResource.active=!1;var r=new s.default(cc.color(0,0,0,255));r.parent=this,r.setContentSize(a.default.size);for(n=0;n<o.length;n++){i=o[n];var c=a.default.createSpriteNode(i);c.parent=this,c.opacity=0;var l=[];n>0&&l.push(cc.delayTime(3*n)),l.push(cc.fadeIn(.6)),l.push(cc.delayTime(1.8)),l.push(cc.fadeOut(.6)),n==o.length-1&&l.push(cc.callFunc(function(){t.nodeResource.active=!0,r.destroy(),e()}));var u=cc.sequence(l);c.runAction(u)}}},t.prototype.startGame=function(e){if(this.bGameStarted)cc.warn("vUpdataerSceneBase.startGame already started!");else{if(this.bGameStarted=!0,e&&this.patchInfo){var t=cc.sys.localStorage.getItem("GAME_VERSION");if(t)r.default.GAME_VERSION=t;else{var o=this.patchInfo.VERSION;o&&(cc.sys.localStorage.setItem("GAME_VERSION",o),r.default.GAME_VERSION=o)}}if(this.releaseAssetsManager(),this.releaseRequestPatchInfoXhr(),this.bNeedRestart)return cc.log("-------------------------"),cc.log("-----  restarting   -----"),cc.log("-------------------------"),cc.sys.localStorage.setItem("B_SKIP_LOGO_ONCE","true"),cc.audioEngine.stopAll(),void cc.game.restart();cc.log("-------------------------"),cc.log("-----   startGame   -----"),cc.log("-------------------------"),this.sendUiMsg("UPDATER_UI_MSG_ENTER_NEXT_SCENE")}},t.prototype.resetPatch=function(e,t,o,n){cc.log("-------------------------"),cc.log("-----  resetPatch   -----"),cc.log("-------------------------"),cc.log("resetTip",e);var i=this.getPatchPath();jsb.fileUtils.isDirectoryExist(i)&&jsb.fileUtils.removeDirectory(i),cc.sys.localStorage.setItem("PATCH_BID",t.toString()),cc.sys.localStorage.setItem("PATCH_PID",o.toString()),cc.sys.localStorage.setItem("PATCH_PACKAGE_PID",o.toString()),cc.sys.localStorage.setItem("PATCH_CHANNEL",n);var r=[i];cc.sys.localStorage.setItem("UPDATER_SEARCH_PATHS",JSON.stringify(r))},t.prototype.prepareUpdate=function(){cc.log("-------------------------"),cc.log("----- prepareUpdate -----"),cc.log("-------------------------");var e,t=jsb.fileUtils.getStringFromFile("src/patch_info.json");if(t&&(e=JSON.parse(t)),!e)return cc.warn("[warn] patch_info.json \u52a0\u8f7d\u5931\u8d25\uff0c\u76f4\u63a5\u8fdb\u5165\u6e38\u620f\u3002"),void this.startGame();this.patchInfo=e;var o=cc.sys.localStorage.getItem("GAME_VERSION");o||(o=e.VERSION),r.default.GAME_VERSION=o;var n=e.B_ID,i=e.P_ID,a=e.CHANNEL,s=parseInt(cc.sys.localStorage.getItem("PATCH_BID")),c=parseInt(cc.sys.localStorage.getItem("PATCH_PID")),l=parseInt(cc.sys.localStorage.getItem("PATCH_PACKAGE_PID")),u=cc.sys.localStorage.getItem("PATCH_CHANNEL"),d=null;n!=s?d=ul.format("bid not match! package = %s, record = %d",n,s):a!=u?d=ul.format("channel not match! package = %s, record = %d",a,u):i!=l?d=ul.format("package pid not match! package = %s, record = %d",i,l):i>(isNaN(c)?0:c)&&(d=ul.format("package pid is higher! package = %s, record = %s",i,c)),d&&this.resetPatch(d,n,i,a);var p=null;(c=parseInt(cc.sys.localStorage.getItem("PATCH_PID")))?(p=c,cc.log("use record pid",p)):(p=e.P_ID||0,cc.log("use patch_info pid",p)),this.localPid=p;var h=this.getPatchPath();if(!jsb.fileUtils.createDirectory(h))return cc.log("patchPath create faild!",h),void this.startGame();this.buildUi(),this.checkNewVersion()},t.prototype.checkNewVersion=function(){var e=this;this.sendUiMsg("UPDATER_UI_MSG_GET_VERSION");var t=this.patchInfo,o=ul.format("http://%s/%s/%s/%s/%s",t.HOST,t.PATCH_PATH,t.APP,t.CHANNEL,t.PATCH_INFO_FILENAME),n=cc.loader.getXMLHttpRequest();n.onreadystatechange=function(){if(4==n.readyState)if(n.status>=200&&n.status<207){e.stopTimeoutTimer();var t=void 0;try{t=JSON.parse(n.response)}catch(t){cc.warn("vUpdaterScene.checkNewVersion remote patch_info parse except!",n.response),e.startGame()}t?(e.releaseRequestPatchInfoXhr(),e.onPatchInfoDownloadSuccess(t)):(cc.warn("vUpdaterScene.checkNewVersion remote patch_info parse faild!",n.response),e.startGame())}else cc.warn("vUpdateScene.checkNewVersion network faild."),e.startGame()};n.open("GET",o),n.timeout=1e3*this.TIMEOUT,this.requestPatchInfoXhr=n,this.startTimeoutTimer(),n.send()},t.prototype.onPatchInfoDownloadSuccess=function(e){var t=this;cc.log("onPatchInfoDownloadSuccess",e),ul.dump(e);var o=parseInt(e.P_ID)||0,n=this.localPid;cc.log("pid:",n,o),n>o&&(cc.sys.localStorage.setItem("GAME_VERSION",""),cc.warn("local version is higher than remote version"),cc.warn("stop update!"),this.startGame());for(var r=[],a=0;a<e.PATCH_LIST.length;a++){var s=e.PATCH_LIST[a];s.pid>n&&(cc.log("ADD PATCH ->",s.pid,s.version),r.push(s))}this.patchInfo=e,r.length>0?(this.patchs=r,this.patchIdx=0,i.default.callLater(.016,function(){t.downloadPatchByIndexed()})):this.startGame(!0)},t.prototype.downloadPatchByIndexed=function(){this.releaseAssetsManager(),cc.log("downloadPatchByIndexed",this.patchIdx);var e=this.patchInfo,t=this.patchs[this.patchIdx],o=ul.format("http://%s/%s/%s/%s/%s/",e.HOST_CDN||e.HOST,e.PATCH_PATH,e.APP,e.CHANNEL,e.B_ID);cc.log("packageUrl",ul.format("%s%d.zip",o,t.pid));var n={};n[ul.format("%d.zip",t.pid)]={size:0,md5:"",compressed:!0};var r=JSON.stringify({packageUrl:o,version:(this.localPid-1).toString()}),a=new jsb.Manifest(r,this.getPatchPath()),s=JSON.stringify({packageUrl:o,version:t.pid.toString(),assets:n}),c=new jsb.Manifest(s,this.getPatchPath()),l=new jsb.AssetsManager("",this.getPatchPath()),u=new jsb.EventListenerAssetsManager(l,this.onAssetsManagerEvent.bind(this));cc.eventManager.addListener(u,1),this.assetsManager=l,this.assetsManagerListener=u;var d=new i.default(.016,-1,function(){cc.isValid(l)&&l.update()});this.assetsManagerTimer=d,l.loadLocalManifest(a,this.getPatchPath()),l.loadRemoteManifest(c),l.setVersionCompareHandle(function(e,t){return parseFloat(e)-parseFloat(t)}),l.setVerifyCallback(function(e,t){return!0}),d.startAndBindToNode(this)},t.prototype.onPatchDownloadSuccess=function(){var e=this.patchs[this.patchIdx];this.localPid=e.pid,cc.sys.localStorage.setItem("PATCH_PID",this.localPid.toString()),cc.log("save PATCH_PID",this.localPid),e.version&&(cc.sys.localStorage.setItem("GAME_VERSION",e.version),cc.log("save GAME_VERSION",e.version)),this.bNeedRestart=!0,cc.log("check patchIdx",this.patchIdx,this.patchs.length),this.patchIdx<this.patchs.length-1?(this.patchIdx++,this.downloadPatchByIndexed()):(this.sendUiMsg("UPDATER_UI_MSG_DOWNLOAD_SUCCESS"),this.startGame(!0))},t.prototype.onAssetsManagerEvent=function(e){switch(e.getEventCode()){case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:cc.log("onAssetsManagerEvent.ERROR_NO_LOCAL_MANIFEST"),this.startGame();break;case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:cc.log("onAssetsManagerEvent.ERROR_DOWNLOAD_MANIFEST"),this.startGame();break;case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:cc.log("onAssetsManagerEvent.ERROR_PARSE_MANIFEST"),this.startGame();break;case jsb.EventAssetsManager.NEW_VERSION_FOUND:cc.log("onAssetsManagerEvent.NEW_VERSION_FOUND");break;case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:cc.log("onAssetsManagerEvent.ALREADY_UP_TO_DATE"),this.sendUiMsg("UPDATER_UI_MSG_DOWNLOAD_PROGRESS",{bytePercent:1,filePercent:1}),this.onPatchDownloadSuccess();break;case jsb.EventAssetsManager.UPDATE_PROGRESSION:cc.log("onAssetsManagerEvent.UPDATE_PROGRESSION"),this.sendUiMsg("UPDATER_UI_MSG_DOWNLOAD_PROGRESS",{bytePercent:e.getPercent()||0,filePercent:e.getPercentByFile()||0});break;case jsb.EventAssetsManager.ASSET_UPDATED:cc.log("onAssetsManagerEvent.ASSET_UPDATED");break;case jsb.EventAssetsManager.ERROR_UPDATING:cc.log("onAssetsManagerEvent.ERROR_UPDATING"),this.startGame();break;case jsb.EventAssetsManager.UPDATE_FINISHED:cc.log("onAssetsManagerEvent.UPDATE_FINISHED"),this.sendUiMsg("UPDATER_UI_MSG_DOWNLOAD_PROGRESS",{bytePercent:1,filePercent:1}),this.onPatchDownloadSuccess();break;case jsb.EventAssetsManager.UPDATE_FAILED:cc.log("onAssetsManagerEvent.UPDATE_FAILED"),this.startGame();break;case jsb.EventAssetsManager.ERROR_DECOMPRESS:cc.log("onAssetsManagerEvent.ERROR_DECOMPRESS"),this.startGame();break;default:cc.log("onAssetsManagerEvent.unknown code",e.getEventCode()),this.startGame()}},t.prototype.getPatchPath=function(){var e=jsb.fileUtils.getWritablePath(),t=e.substr(e.length-1,1);return"/"==t||"\\"==t?e+"patch/":e+"/patch/"},t.prototype.onTimeout=function(){this.startGame()},t.prototype.startTimeoutTimer=function(){var e=this,t=new i.default(this.TIMEOUT,1,function(){e.stopTimeoutTimer(),e.onTimeout()});this.timeoutTimer=t,t.startAndBindToNode(this)},t.prototype.stopTimeoutTimer=function(){this.timeoutTimer&&(this.timeoutTimer.stop(),this.timeoutTimer=null)},t.prototype.releaseRequestPatchInfoXhr=function(){this.requestPatchInfoXhr&&(this.requestPatchInfoXhr.abort(),this.requestPatchInfoXhr=null)},t.prototype.releaseAssetsManager=function(){this.assetsManagerTimer&&(this.assetsManagerTimer.stop(),this.assetsManagerTimer=null),this.assetsManagerListener&&(cc.eventManager.removeListener(this.assetsManagerListener),this.assetsManagerListener=null),this.assetsManager&&(this.assetsManager=null)},t=__decorate([l],t)}(n.default));o.default=u,cc._RF.pop()},{"../../game/Const":"Const","../../game/manager/mgrDirector":"mgrDirector","../../game/view/node/LayerColor":"LayerColor","../utils/Timer":"Timer","../view/SceneBase":"SceneBase"}],vUpdaterScene:[function(e,t,o){"use strict";cc._RF.push(t,"af3f0IjSjlP96U4ugYAGRJe","vUpdaterScene"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../manager/mgrDirector"),i=e("../../../ulframework/updater/vUpdaterSceneBase"),r=cc._decorator,a=r.ccclass,s=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelProcess=null,t.nodeLoadAni=null,t.nodeStar=null,t.progressBar=null,t}return __extends(t,e),t.prototype._getResourceName=function(){return"scene/vUpdaterScene"},t.prototype._getResourceBindingConfig=function(){return{CC_labelProcess:{varname:"labelProcess",vartype:cc.Label},CC_nodeLoadAni:{varname:"nodeLoadAni",vartype:cc.Node},CC_nodeStar:{varname:"nodeStar",vartype:cc.Node},CC_progressBar:{varname:"progressBar",vartype:cc.ProgressBar}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.buildUi=function(){e.prototype.buildUi.call(this)},t.prototype.onUiMsg=function(t,o){if(e.prototype.onUiMsg.call(this,t,o),"UPDATER_UI_MSG_GET_VERSION"==t)this.progressBar.progress=0,this.labelProcess.string="\u8fdb\u5165\u4e2d";else if("UPDATER_UI_MSG_DOWNLOAD_PROGRESS"==t){if(!o)return;var i=cc.clampf(o.bytePercent||0,0,1),r=(cc.clampf(o.filePercent||0,0,1),this.patchs.length),a=(i+this.patchIdx)/r;this.progressBar.progress=a,this.labelProcess.string="\u8fdb\u5165\u4e2d."}else"UPDATER_UI_MSG_DOWNLOAD_SUCCESS"==t?(this.progressBar.progress=1,this.labelProcess.string="\u8fdb\u5165\u4e2d.."):"UPDATER_UI_MSG_ENTER_NEXT_SCENE"==t&&n.default.enterScene("vLoadingScene")},t=__decorate([a],t)}(i.default));o.default=s,cc._RF.pop()},{"../../../ulframework/updater/vUpdaterSceneBase":"vUpdaterSceneBase","../../manager/mgrDirector":"mgrDirector"}],vWarpSceneNode:[function(e,t,o){"use strict";cc._RF.push(t,"24990fPxkpB16/hRDlVyB4a","vWarpSceneNode"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../ulframework/view/ViewBase"),i=e("../../manager/mgrDirector"),r=cc._decorator,a=r.ccclass,s=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelTip=null,t.nodeBottom=null,t.nodeCloudBottom=null,t.nodeCloudCenter=null,t.nodeCloudTop=null,t.originPos=[],t.duration=.6,t.needToPlayFadeInAfterLoaded=!1,t}return __extends(t,e),t.prototype._getResourceName=function(){return"node/vWarpSceneNode"},t.prototype._getResourceBindingConfig=function(){return{CC_labelTip:{varname:"labelTip",vartype:cc.Label},CC_nodeBottom:{varname:"nodeBottom",vartype:cc.Node},CC_nodeCloudBottom:{varname:"nodeCloudBottom",vartype:cc.Node},CC_nodeCloudCenter:{varname:"nodeCloudCenter",vartype:cc.Node},CC_nodeCloudTop:{varname:"nodeCloudTop",vartype:cc.Node}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.nodeResource.setContentSize(i.default.size),this.originPos.push(this.nodeCloudTop.getPosition()),this.originPos.push(this.nodeCloudCenter.getPosition()),this.originPos.push(this.nodeCloudBottom.getPosition()),this.originPos.push(this.nodeBottom.getPosition()),this.duration=this.context.duration||this.duration,this.registerListeners({MSG_SCENE_LOADED:this.onMsgSceneLoaded}),this.setAsDefault(),this.needToPlayFadeInAfterLoaded&&this.playEffectIn()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.setAsDefault=function(){var e=this.nodeCloudCenter;e.stopAllActions(),e.setPosition(cc.v2(-i.default.size.width-200,e.y)),(e=this.nodeCloudTop).stopAllActions(),e.setPosition(cc.v2(i.default.size.width+200,e.y)),(e=this.nodeCloudBottom).stopAllActions(),e.setPosition(cc.v2(i.default.size.width+200,e.y))},t.prototype.playEffectIn=function(){var e=this;if(this.isResourceLoaded()){var t=this.nodeCloudCenter;t.stopAllActions(),t.setPosition(cc.v2(-i.default.size.width-200,t.y)),t.runAction(cc.sequence(cc.moveTo(this.duration,this.originPos[0]).easing(cc.easeIn(1.5)),cc.delayTime(.01),cc.callFunc(function(){cc.log("    fOnFadeInCompleted"),e.context.fOnFadeInCompleted instanceof Function&&e.context.fOnFadeInCompleted()}))),(t=this.nodeCloudTop).stopAllActions(),t.setPosition(cc.v2(i.default.size.width+200,t.y)),t.runAction(cc.moveTo(this.duration,this.originPos[1]).easing(cc.easeIn(1.5))),(t=this.nodeCloudBottom).stopAllActions(),t.setPosition(cc.v2(i.default.size.width+200,t.y)),t.runAction(cc.moveTo(this.duration,this.originPos[2]).easing(cc.easeIn(1.5)))}else this.needToPlayFadeInAfterLoaded=!0},t.prototype.playEffectOut=function(){var e=this,t=this.nodeCloudCenter;t.stopAllActions(),t.runAction(cc.sequence(cc.moveTo(this.duration,cc.v2(-i.default.size.width-200,t.y)).easing(cc.easeOut(1.5)),cc.delayTime(.01),cc.callFunc(function(){e.context.fOnFadeOutCompleted instanceof Function&&(e.context.fOnFadeOutCompleted(),e.removeFromParent(),e.destroy())}))),(t=this.nodeCloudTop).stopAllActions(),t.runAction(cc.moveTo(this.duration,cc.v2(i.default.size.width+200,t.y)).easing(cc.easeOut(1.5))),(t=this.nodeCloudBottom).stopAllActions(),t.runAction(cc.moveTo(this.duration,cc.v2(i.default.size.width+200,t.y)).easing(cc.easeOut(1.5)))},t.prototype.onMsgSceneLoaded=function(){this.playEffectOut()},t=__decorate([a],t)}(n.default));o.default=s,cc._RF.pop()},{"../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrDirector":"mgrDirector"}]},{},["ULNativeController","Const","mgrAd","mgrAlu","mgrCfg","mgrCop","mgrDirector","mgrGuide","mgrNative","mgrNetwork","mgrPlayer","mgrPool","mgrRecord","mgrSdk","mgrShop","mgrSound","mgrText","mgrTip","mgrUnitTest","mgrWordFilter","vDebugPickerDialog","vPromptDialog","LayerColor","singlePageReuseList","vGuideArrow","vGuideMask","vGuideTip","vGuideView","vMark","vMsgTip","vWarpSceneNode","vUpdaterScene","init","main","LifeCycleMonitor","ScleableButton","Manager","NetworkAdapterBase","NetworkAdapterHttp","NetworkAdapterHttpUlServer","NetworkManager","NetworkTask","vUpdaterSceneBase","Base64","CfgParser","EventTouchEx","FSMObject","IPoolManagerCacheableObject","MsgHandler","PoolManager","Randomizer","SpriteEx","TaskManager","Timer","Tools","UnitTestCase","ul","AnimNode","DebugMenu","DebugMouseControlNode","DialogBase","FSMSceneBase","IReuseLayouter","Particle","ResourceNode","ReuseLayouterHBox","ReuseLayouterHGrid","ReuseLayouterVBox","ReuseLayouterVGrid","ReuseList","ReusePageView","SceneBase","Spine","SpriteBasedClippingNode","ViewBase","sdkdemocConfig","sdkdemoULCop","sdkdemohttprequest","sdkdemotools","ulsdkdemomanager","ulsdkdemomiddleware","sdkDemoModule"]);